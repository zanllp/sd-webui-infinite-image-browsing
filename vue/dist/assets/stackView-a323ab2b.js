import{d as Q,u as ge,g as K,_ as Te,c as r,a as ce,P as te,D as pe,f as Le,w as _t,b as yt,e as ht,h as Re,M as me,i as wt,j as St,F as fe,A as It,o as k,k as $,l as s,m as E,t as m,n as ve,p as N,q as Ee,r as At,s as $t,v as Fe,x as D,y as i,z as e,B as p,C as B,E as Pt,G as xt,H as Me,I as Rt,J as Ft,S as Mt,K as Dt,L as Bt,N as Nt,O as Ot,Q as De,R as Tt,T as Lt,U as Et,V as Vt,W as zt,X as jt}from"./index-c18d3071.js";import{S as Ut}from"./index-ef2a2828.js";import{F as O,_ as Wt}from"./index-d98a1aa8.js";import"./index-517bc5b9.js";import"./index-2c9b531d.js";import{_ as Gt}from"./index-f6ba45f2.js";import{_ as qt}from"./shortcut-6b6e6109.js";import{D as Ve}from"./index-4f012af4.js";/* empty css              */import"./index-d723cdb9.js";/* empty css              */import{u as Kt,a as Ht,b as Qt,c as Jt,d as Xt,e as Yt,f as Zt,g as en,h as tn,s as nn,o as Be}from"./index-128067fd.js";import{s as on,F as rn}from"./FileItem-5d15049a.js";import{M as an,L as ln,R as sn,f as un}from"./MultiSelectKeep-4bd06486.js";import"./isArrayLikeObject-fb455182.js";import"./index-45bf24e1.js";import"./_isIterateeCall-253dc00c.js";import"./index-ad99ad0b.js";var dn=["class","style"],cn=function(){return{prefixCls:String,href:String,separator:te.any,overlay:te.any,onClick:Function}};const H=Q({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:cn(),slots:["separator","overlay"],setup:function(o,u){var c=u.slots,f=u.attrs,h=ge("breadcrumb",o),C=h.prefixCls,I=function(w,v){var d=K(c,o,"overlay");return d?r(Ve,{overlay:d,placement:"bottom"},{default:function(){return[r("span",{class:"".concat(v,"-overlay-link")},[w,r(pe,null,null)])]}}):w};return function(){var A,w=(A=K(c,o,"separator"))!==null&&A!==void 0?A:"/",v=K(c,o),d=f.class,_=f.style,g=Te(f,dn),b;return o.href!==void 0?b=r("a",ce({class:"".concat(C.value,"-link"),onClick:o.onClick},g),[v]):b=r("span",ce({class:"".concat(C.value,"-link"),onClick:o.onClick},g),[v]),b=I(b,C.value),v?r("span",{class:d,style:_},[b,w&&r("span",{class:"".concat(C.value,"-separator")},[w])]):null}}});var pn=function(){return{prefixCls:String,routes:{type:Array},params:te.any,separator:te.any,itemRender:{type:Function}}};function mn(l,o){if(!l.breadcrumbName)return null;var u=Object.keys(o).join("|"),c=l.breadcrumbName.replace(new RegExp(":(".concat(u,")"),"g"),function(f,h){return o[h]||f});return c}function Ne(l){var o=l.route,u=l.params,c=l.routes,f=l.paths,h=c.indexOf(o)===c.length-1,C=mn(o,u);return h?r("span",null,[C]):r("a",{href:"#/".concat(f.join("/"))},[C])}const j=Q({compatConfig:{MODE:3},name:"ABreadcrumb",props:pn(),slots:["separator","itemRender"],setup:function(o,u){var c=u.slots,f=ge("breadcrumb",o),h=f.prefixCls,C=f.direction,I=function(d,_){return d=(d||"").replace(/^\//,""),Object.keys(_).forEach(function(g){d=d.replace(":".concat(g),_[g])}),d},A=function(d,_,g){var b=wt(d),S=I(_||"",g);return S&&b.push(S),b},w=function(d){var _=d.routes,g=_===void 0?[]:_,b=d.params,S=b===void 0?{}:b,T=d.separator,P=d.itemRender,x=P===void 0?Ne:P,L=[];return g.map(function(y){var R=I(y.path,S);R&&L.push(R);var U=[].concat(L),W=null;return y.children&&y.children.length&&(W=r(me,null,{default:function(){return[y.children.map(function(V){return r(me.Item,{key:V.path||V.breadcrumbName},{default:function(){return[x({route:V,params:S,routes:g,paths:A(U,V.path,S)})]}})})]}})),r(H,{overlay:W,separator:T,key:R||y.breadcrumbName},{default:function(){return[x({route:y,params:S,routes:g,paths:U})]}})})};return function(){var v,d,_,g=o.routes,b=o.params,S=b===void 0?{}:b,T=Le(K(c,o)),P=(v=K(c,o,"separator"))!==null&&v!==void 0?v:"/",x=o.itemRender||c.itemRender||Ne;g&&g.length>0?_=w({routes:g,params:S,separator:P,itemRender:x}):T.length&&(_=T.map(function(y,R){return _t(yt(y.type)==="object"&&(y.type.__ANT_BREADCRUMB_ITEM||y.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),ht(y,{separator:P,key:R})}));var L=(d={},Re(d,h.value,!0),Re(d,"".concat(h.value,"-rtl"),C.value==="rtl"),d);return r("div",{class:L},[_])}}});var fn=["separator","class"],vn=function(){return{prefixCls:String}};const ke=Q({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:vn(),setup:function(o,u){var c=u.slots,f=u.attrs,h=ge("breadcrumb",o),C=h.prefixCls;return function(){var I;f.separator;var A=f.class,w=Te(f,fn),v=Le((I=c.default)===null||I===void 0?void 0:I.call(c));return r("span",ce({class:["".concat(C.value,"-separator"),A]},w),[v.length>0?v:"/"])}}});j.Item=H;j.Separator=ke;j.install=function(l){return l.component(j.name,j),l.component(H.name,H),l.component(ke.name,ke),l};O.useInjectFormItemContext=St;O.ItemRest=fe;O.install=function(l){return l.component(O.name,O),l.component(O.Item.name,O.Item),l.component(fe.name,fe),l};var kn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};const gn=kn;function Oe(l){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?Object(arguments[o]):{},c=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(u).filter(function(f){return Object.getOwnPropertyDescriptor(u,f).enumerable}))),c.forEach(function(f){bn(l,f,u[f])})}return l}function bn(l,o,u){return o in l?Object.defineProperty(l,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):l[o]=u,l}var be=function(o,u){var c=Oe({},o,u.attrs);return r(It,Oe({},c,{icon:gn}),null)};be.displayName="ArrowLeftOutlined";be.inheritAttrs=!1;const Cn=be;const _n={class:"base-info"},yn=Q({__name:"BaseFileListInfo",props:{fileNum:{},selectedFileNum:{}},setup(l){return(o,u)=>(k(),$("div",_n,[s("span",null,[E(m(o.$t("items",[o.fileNum]))+" ",1),o.selectedFileNum?(k(),$(ve,{key:0},[E(", "+m(o.$t("selectedItems",[o.selectedFileNum])),1)],64)):N("",!0)])]))}});const hn=Ee(yn,[["__scopeId","data-v-afd25667"]]),wn={class:"hint"},Sn={class:"location-bar"},In=["onClick"],An={key:3,class:"location-act"},$n={class:"actions"},Pn=["onClick"],xn=["onClick"],Rn={style:{width:"512px",background:"var(--zp-primary-background)",padding:"16px","border-radius":"4px","box-shadow":"0 0 4px var(--zp-secondary-background)",border:"1px solid var(--zp-secondary-background)"}},Fn={style:{padding:"4px"}},Mn={style:{padding:"4px"}},Dn={style:{padding:"4px"}},Bn={key:0,style:{padding:"4px"}},Nn={style:{padding:"4px"}},On={style:{padding:"16px 0 512px"}},Tn={key:0,class:"preview-switch"},Ln=Q({__name:"stackView",props:{tabIdx:{},paneIdx:{},path:{},mode:{},stackKey:{}},setup(l){const o=l,u=At(),{scroller:c,stackViewEl:f,props:h,multiSelectedIdxs:C,spinning:I}=Kt().toRefs();c.value,f.value;const{currLocation:A,currPage:w,refresh:v,copyLocation:d,back:_,openNext:g,stack:b,quickMoveTo:S,addToSearchScanPathAndQuickMove:T,locInputValue:P,isLocationEditing:x,onLocEditEnter:L,onEditBtnClick:y,share:R,selectAll:U,onCreateFloderBtnClick:W,onWalkBtnClick:J,showWalkButton:V,searchInCurrentDir:ne,backToLastUseTo:oe,polling:ze,onPollRefreshClick:Ce}=Ht(),{gridItems:je,sortMethodConv:Ue,moreActionsDropdownShow:re,sortedFiles:F,sortMethod:ae,itemSize:_e,loadNextDir:We,loadNextDirLoading:Ge,canLoadNext:qe,onScroll:Ke,cellWidth:X,dirCoverCache:He}=Qt(),{onDrop:ye,onFileDragStart:Qe,onFileDragEnd:Je,onFileDropToFolder:Xe}=Jt(),{onFileItemClick:Ye,onContextMenuClick:he,showGenInfo:Y,imageGenInfo:we,q:Ze}=Xt({openNext:g}),{previewIdx:G,onPreviewVisibleChange:et,previewing:le,previewImgMove:Se,canPreview:Ie,scrollToFileId:tt}=Yt(),Ae=$t(),{showMenuIdx:se}=Zt(),{onClearAllSelected:nt,onReverseSelect:ot,onSelectAll:rt}=en(),{getGenDiff:at,changeIndchecked:q,seedChangeChecked:Z,getRawGenParams:lt,getGenDiffWatchDep:st}=tn(),it=a=>{var M;const t=a.target;(M=t==null?void 0:t.closest)!=null&&M.call(t,".file-item-trigger")||oe()},ut=async(a,t)=>{await Xe(a,t)||await ye(a)},dt=()=>{F.value.length!==0&&Be(F.value,G.value||0)};return Fe(()=>o,()=>{h.value=o;const a=nn.get(o.stackKey??"");a&&(b.value=a.slice())},{immediate:!0}),Fe(()=>Ae.visible,(a,t)=>{if(!a&&t){const M=Ae.lastActiveId;M&&tt(M)}}),(a,t)=>{const M=Tt,ct=Lt,pt=Et,mt=Vt,ft=H,vt=j,$e=zt,ie=jt,Pe=me,ue=Ve,kt=qt,ee=Wt,xe=Gt,gt=O,bt=Ut;return k(),D(bt,{spinning:e(I),size:"large"},{default:i(()=>[r(an,{show:e(u).keepMultiSelect||!!e(C).length,onClearAllSelected:e(nt),onSelectAll:e(rt),onReverseSelect:e(ot)},null,8,["show","onClearAllSelected","onSelectAll","onReverseSelect"]),r(M,{style:{display:"none"}}),s("div",{ref_key:"stackViewEl",ref:f,onDragover:t[31]||(t[31]=p(()=>{},["prevent"])),onDrop:t[32]||(t[32]=p(n=>e(ye)(n),["prevent"])),class:"container"},[r(pt,{visible:e(Y),"onUpdate:visible":t[1]||(t[1]=n=>B(Y)?Y.value=n:null),width:"70vw","mask-closable":"",onOk:t[2]||(t[2]=n=>Y.value=!1)},{cancelText:i(()=>[]),default:i(()=>[r(ct,{active:"",loading:!e(Ze).isIdle},{default:i(()=>[s("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto","z-index":"9999"},onDblclick:t[0]||(t[0]=n=>e(Pt)(e(we)))},[s("div",wn,m(a.$t("doubleClickToCopy")),1),E(" "+m(e(we)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),s("div",Sn,[s("div",{class:"breadcrumb",style:xt({flex:e(x)?1:""})},[e(x)?(k(),D(mt,{key:0,style:{flex:"1"},value:e(P),"onUpdate:value":t[3]||(t[3]=n=>B(P)?P.value=n:null),onClick:t[4]||(t[4]=p(()=>{},["stop"])),onKeydown:t[5]||(t[5]=p(()=>{},["stop"])),onPressEnter:e(L),"allow-clear":""},null,8,["value","onPressEnter"])):(k(),D(vt,{key:1,style:{flex:"1"}},{default:i(()=>[(k(!0),$(ve,null,Me(e(b),(n,z)=>(k(),D(ft,{key:z},{default:i(()=>[s("a",{onClick:p(de=>e(_)(z),["prevent"])},m(n.curr==="/"?a.$t("root"):n.curr.replace(/:\/$/,a.$t("drive"))),9,In)]),_:2},1024))),128))]),_:1})),e(x)?(k(),D($e,{key:2,size:"small",onClick:e(L),type:"primary"},{default:i(()=>[E(m(a.$t("go")),1)]),_:1},8,["onClick"])):(k(),$("div",An,[a.mode==="scanned-fixed"?(k(),$("a",{key:0,onClick:t[6]||(t[6]=p((...n)=>e(oe)&&e(oe)(...n),["prevent"])),style:{margin:"0 8px 16px 0"}},[r(e(Cn))])):N("",!0),s("a",{onClick:t[7]||(t[7]=p((...n)=>e(d)&&e(d)(...n),["prevent"])),class:"copy"},m(a.$t("copy")),1),s("a",{onClick:t[8]||(t[8]=p((...n)=>e(y)&&e(y)(...n),["prevent","stop"]))},m(a.$t("edit")),1)]))],4),s("div",$n,[s("a",{class:"opt",onClick:t[9]||(t[9]=p((...n)=>e(v)&&e(v)(...n),["prevent"]))},m(a.$t("refresh")),1),s("a",{class:"opt",onClick:p(dt,["prevent"])},m(a.$t("TikTok View")),9,Pn),r(ue,null,{overlay:i(()=>[r(Pe,null,{default:i(()=>[r(ie,{key:"tag-search"},{default:i(()=>[s("a",{onClick:t[11]||(t[11]=p(n=>e(ne)("tag-search"),["prevent"]))},m(a.$t("imgSearch")),1)]),_:1}),r(ie,{key:"tag-search"},{default:i(()=>[s("a",{onClick:t[12]||(t[12]=p(n=>e(ne)("fuzzy-search"),["prevent"]))},m(a.$t("fuzzy-search")),1)]),_:1})]),_:1})]),default:i(()=>[s("a",{class:"opt",onClick:t[10]||(t[10]=p(()=>{},["prevent"]))},[E(m(a.$t("search"))+" ",1),r(e(pe))])]),_:1}),e(V)?(k(),$("a",{key:0,class:"opt",onClick:t[13]||(t[13]=p((...n)=>e(J)&&e(J)(...n),["prevent"]))}," Walk ")):N("",!0),s("a",{class:"opt",onClick:t[14]||(t[14]=p((...n)=>e(U)&&e(U)(...n),["prevent","stop"]))},m(a.$t("selectAll")),1),r(ue,null,{overlay:i(()=>[r(Pe,null,{default:i(()=>[(k(!0),$(ve,null,Me(e(u).quickMovePaths,n=>(k(),D(ie,{key:n.dir},{default:i(()=>[s("a",{onClick:p(z=>e(S)(n.dir),["prevent"])},m(n.zh),9,xn)]),_:2},1024))),128))]),_:1})]),default:i(()=>[s("a",{class:"opt",onClick:t[15]||(t[15]=p(()=>{},["prevent"]))},[E(m(a.$t("quickMove"))+" ",1),r(e(pe))])]),_:1}),r(ue,{trigger:["click"],visible:e(re),"onUpdate:visible":t[27]||(t[27]=n=>B(re)?re.value=n:null),placement:"bottomLeft",getPopupContainer:n=>n.parentNode},{overlay:i(()=>[s("div",Rn,[r(gt,Rt(Ft({labelCol:{span:10},wrapperCol:{span:14}})),{default:i(()=>[r(ee,{label:a.$t("gridCellWidth")},{default:i(()=>[r(kt,{modelValue:e(X),"onUpdate:modelValue":t[17]||(t[17]=n=>B(X)?X.value=n:null),max:1024,min:64,step:16},null,8,["modelValue"])]),_:1},8,["label"]),r(ee,{label:a.$t("sortingMethod")},{default:i(()=>[r(e(Mt),{value:e(ae),"onUpdate:value":t[18]||(t[18]=n=>B(ae)?ae.value=n:null),onClick:t[19]||(t[19]=p(()=>{},["stop"])),conv:e(Ue),options:e(Dt)},null,8,["value","conv","options"])]),_:1},8,["label"]),r(ee,{label:a.$t("showChangeIndicators")},{default:i(()=>[r(xe,{checked:e(q),"onUpdate:checked":t[20]||(t[20]=n=>B(q)?q.value=n:null),onClick:e(lt)},null,8,["checked","onClick"])]),_:1},8,["label"]),r(ee,{label:a.$t("seedAsChange")},{default:i(()=>[r(xe,{checked:e(Z),"onUpdate:checked":t[21]||(t[21]=n=>B(Z)?Z.value=n:null),disabled:!e(q)},null,8,["checked","disabled"])]),_:1},8,["label"]),s("div",Fn,[s("a",{onClick:t[22]||(t[22]=p((...n)=>e(T)&&e(T)(...n),["prevent"]))},m(a.$t("addToSearchScanPathAndQuickMove")),1)]),s("div",Mn,[s("a",{onClick:t[23]||(t[23]=p(n=>e(Bt)(e(A)+"/"),["prevent"]))},m(a.$t("openWithLocalFileBrowser")),1)]),s("div",Dn,[s("a",{onClick:t[24]||(t[24]=p((...n)=>e(Ce)&&e(Ce)(...n),["prevent"]))},m(e(ze)?a.$t("stopPollRefresh"):a.$t("pollRefresh")),1)]),e(Nt)?N("",!0):(k(),$("div",Bn,[s("a",{onClick:t[25]||(t[25]=p((...n)=>e(R)&&e(R)(...n),["prevent"]))},m(a.$t("share")),1)])),s("div",Nn,[s("a",{onClick:t[26]||(t[26]=p((...n)=>e(W)&&e(W)(...n),["prevent"]))},m(a.$t("createFolder")),1)])]),_:1},16)])]),default:i(()=>[s("a",{class:"opt",onClick:t[16]||(t[16]=p(()=>{},["prevent"]))},m(a.$t("more")),1)]),_:1},8,["visible","getPopupContainer"])])]),e(w)?(k(),$("div",{key:0,class:"view",onDblclick:it},[r(e(on),{class:"file-list",items:e(F),ref_key:"scroller",ref:c,onScroll:e(Ke),"item-size":e(_e).first,"key-field":"fullpath","item-secondary-size":e(_e).second,gridItems:e(je)},{default:i(({item:n,index:z})=>[r(rn,{idx:parseInt(z),file:n,"full-screen-preview-image-url":e(F)[e(G)]?e(Ot)(e(F)[e(G)]):"","show-menu-idx":e(se),"onUpdate:showMenuIdx":t[28]||(t[28]=de=>B(se)?se.value=de:null),selected:e(C).includes(z),"cell-width":e(X),onFileItemClick:e(Ye),onDragstart:e(Qe),onDragend:e(Je),onPreviewVisibleChange:e(et),onContextMenuClick:e(he),onDropToFolder:ut,onTiktokView:(de,Ct)=>e(Be)(e(F),Ct),"is-selected-mutil-files":e(C).length>1,"enable-change-indicator":e(q),"seed-change-checked":e(Z),"get-gen-diff":e(at),"get-gen-diff-watch-dep":e(st),previewing:e(le),"cover-files":e(He).get(n.fullpath)},null,8,["idx","file","full-screen-preview-image-url","show-menu-idx","selected","cell-width","onFileItemClick","onDragstart","onDragend","onPreviewVisibleChange","onContextMenuClick","onTiktokView","is-selected-mutil-files","enable-change-indicator","seed-change-checked","get-gen-diff","get-gen-diff-watch-dep","previewing","cover-files"])]),after:i(()=>[s("div",On,[o.mode==="walk"?(k(),D($e,{key:0,onClick:e(We),loading:e(Ge),block:"",type:"primary",disabled:!e(qe),ghost:""},{default:i(()=>[E(m(a.$t("loadNextPage")),1)]),_:1},8,["onClick","loading","disabled"])):N("",!0)])]),_:1},8,["items","onScroll","item-size","item-secondary-size","gridItems"]),e(le)?(k(),$("div",Tn,[r(e(ln),{onClick:t[29]||(t[29]=n=>e(Se)("prev")),class:De({disable:!e(Ie)("prev")})},null,8,["class"]),r(e(sn),{onClick:t[30]||(t[30]=n=>e(Se)("next")),class:De({disable:!e(Ie)("next")})},null,8,["class"])])):N("",!0)],32)):N("",!0)],544),e(le)?(k(),D(un,{key:0,file:e(F)[e(G)],idx:e(G),onContextMenuClick:e(he)},null,8,["file","idx","onContextMenuClick"])):N("",!0),r(hn,{"file-num":e(F).length,"selected-file-num":e(C).length},null,8,["file-num","selected-file-num"])]),_:1},8,["spinning"])}}});const oo=Ee(Ln,[["__scopeId","data-v-88c8f118"]]);export{oo as default};
