import{d as he,u as Ge,g as fe,_ as ft,c as i,a as ze,P as Ie,D as Ve,f as vt,w as Vt,b as jt,e as Ut,h as nt,M as je,i as Wt,j as Ht,F as Ue,A as mt,k as Le,l as qt,r as pe,m as Pe,n as ot,o as Gt,p as _e,s as Ne,q as U,t as st,v as Kt,x as Qt,y as Jt,z as de,B as N,C as Xt,E as Yt,G as Se,H as lt,I as Zt,J as ea,K as ta,L as We,N as aa,O as na,Q as Be,R as Ee,S as oa,T as ht,U as R,V as j,W as h,X as ee,Y as b,Z as He,$ as J,a0 as gt,a1 as sa,a2 as la,a3 as K,a4 as g,a5 as e,a6 as k,a7 as Q,a8 as ra,a9 as rt,aa as ia,ab as ua,ac as ca,ad as da,ae as pa,af as fa,ag as va,ah as it,ai as ma,aj as ha,ak as ga,al as ka,am as ba}from"./index-214c37f1.js";import{S as ve,s as ya}from"./index-a8e9eaff.js";import{F as X,_ as kt,a as Ca}from"./numInput-6dbdd468.js";import"./index-ed800624.js";/* empty css              */import{_ as wa}from"./index-fbb9b9b7.js";import{D as bt}from"./index-e9d0b4c7.js";/* empty css              */import"./index-89a840f7.js";import{u as yt,N as _a,g as S,s as Ct,a as Sa,b as Ia,c as Pa,d as xa,F as Aa}from"./FileItem-ce402db7.js";import{u as $a,a as Ra,b as Ma,c as Fa,M as Da,o as ut,L as Oa,R as Ta,f as La}from"./MultiSelectKeep-7de19d67.js";import{u as Na}from"./useGenInfoDiff-ad344c7f.js";import"./isArrayLikeObject-f708a19c.js";import"./numInput.vue_vue_type_style_index_0_scoped_bd954eda_lang-3d61c006.js";import"./index-3237a2fe.js";import"./_isIterateeCall-00caa5e4.js";import"./index-6edd4c1a.js";import"./shortcut-c70bb424.js";import"./Checkbox-f143d30a.js";var Ba=["class","style"],Ea=function(){return{prefixCls:String,href:String,separator:Ie.any,overlay:Ie.any,onClick:Function}};const me=he({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:Ea(),slots:["separator","overlay"],setup:function(t,l){var s=l.slots,p=l.attrs,c=Ge("breadcrumb",t),y=c.prefixCls,x=function(f,C){var v=fe(s,t,"overlay");return v?i(bt,{overlay:v,placement:"bottom"},{default:function(){return[i("span",{class:"".concat(C,"-overlay-link")},[f,i(Ve,null,null)])]}}):f};return function(){var F,f=(F=fe(s,t,"separator"))!==null&&F!==void 0?F:"/",C=fe(s,t),v=p.class,A=p.style,I=ft(p,Ba),P;return t.href!==void 0?P=i("a",ze({class:"".concat(y.value,"-link"),onClick:t.onClick},I),[C]):P=i("span",ze({class:"".concat(y.value,"-link"),onClick:t.onClick},I),[C]),P=x(P,y.value),C?i("span",{class:v,style:A},[P,f&&i("span",{class:"".concat(y.value,"-separator")},[f])]):null}}});var za=function(){return{prefixCls:String,routes:{type:Array},params:Ie.any,separator:Ie.any,itemRender:{type:Function}}};function Va(o,t){if(!o.breadcrumbName)return null;var l=Object.keys(t).join("|"),s=o.breadcrumbName.replace(new RegExp(":(".concat(l,")"),"g"),function(p,c){return t[c]||p});return s}function ct(o){var t=o.route,l=o.params,s=o.routes,p=o.paths,c=s.indexOf(t)===s.length-1,y=Va(t,l);return c?i("span",null,[y]):i("a",{href:"#/".concat(p.join("/"))},[y])}const oe=he({compatConfig:{MODE:3},name:"ABreadcrumb",props:za(),slots:["separator","itemRender"],setup:function(t,l){var s=l.slots,p=Ge("breadcrumb",t),c=p.prefixCls,y=p.direction,x=function(v,A){return v=(v||"").replace(/^\//,""),Object.keys(A).forEach(function(I){v=v.replace(":".concat(I),A[I])}),v},F=function(v,A,I){var P=Wt(v),O=x(A||"",I);return O&&P.push(O),P},f=function(v){var A=v.routes,I=A===void 0?[]:A,P=v.params,O=P===void 0?{}:P,W=v.separator,B=v.itemRender,E=B===void 0?ct:B,T=[];return I.map(function(D){var L=x(D.path,O);L&&T.push(L);var H=[].concat(T),Y=null;return D.children&&D.children.length&&(Y=i(je,null,{default:function(){return[D.children.map(function(q){return i(je.Item,{key:q.path||q.breadcrumbName},{default:function(){return[E({route:q,params:O,routes:I,paths:F(H,q.path,O)})]}})})]}})),i(me,{overlay:Y,separator:W,key:L||D.breadcrumbName},{default:function(){return[E({route:D,params:O,routes:I,paths:H})]}})})};return function(){var C,v,A,I=t.routes,P=t.params,O=P===void 0?{}:P,W=vt(fe(s,t)),B=(C=fe(s,t,"separator"))!==null&&C!==void 0?C:"/",E=t.itemRender||s.itemRender||ct;I&&I.length>0?A=f({routes:I,params:O,separator:B,itemRender:E}):W.length&&(A=W.map(function(D,L){return Vt(jt(D.type)==="object"&&(D.type.__ANT_BREADCRUMB_ITEM||D.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),Ut(D,{separator:B,key:L})}));var T=(v={},nt(v,c.value,!0),nt(v,"".concat(c.value,"-rtl"),y.value==="rtl"),v);return i("div",{class:T},[A])}}});var ja=["separator","class"],Ua=function(){return{prefixCls:String}};const qe=he({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:Ua(),setup:function(t,l){var s=l.slots,p=l.attrs,c=Ge("breadcrumb",t),y=c.prefixCls;return function(){var x;p.separator;var F=p.class,f=ft(p,ja),C=vt((x=s.default)===null||x===void 0?void 0:x.call(s));return i("span",ze({class:["".concat(y.value,"-separator"),F]},f),[C.length>0?C:"/"])}}});oe.Item=me;oe.Separator=qe;oe.install=function(o){return o.component(oe.name,oe),o.component(me.name,me),o.component(qe.name,qe),o};X.useInjectFormItemContext=Ht;X.ItemRest=Ue;X.install=function(o){return o.component(X.name,X),o.component(X.Item.name,X.Item),o.component(Ue.name,Ue),o};ve.setDefaultIndicator=ya;ve.install=function(o){return o.component(ve.name,ve),o};var Wa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};const Ha=Wa;function dt(o){for(var t=1;t<arguments.length;t++){var l=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(l).filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable}))),s.forEach(function(p){qa(o,p,l[p])})}return o}function qa(o,t,l){return t in o?Object.defineProperty(o,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[t]=l,o}var Ke=function(t,l){var s=dt({},t,l.attrs);return i(mt,dt({},s,{icon:Ha}),null)};Ke.displayName="ArrowLeftOutlined";Ke.inheritAttrs=!1;const Ga=Ke;class xe{static run(t){const l=Object.assign({immediately:!0,id:-1,isFinished:!1,errorHandleMethod:"ignore"},t);let s,p;const c=new Promise((f,C)=>{p=f,s=C}),y=()=>{l.isFinished=!0,clearTimeout(l.id)},x=()=>Le(this,void 0,void 0,function*(){try{l.res=yield l.action(),l.validator&&l.validator(l.res)&&(p(l.res),y())}catch(f){xe.silent||console.error(f),l.errorHandleMethod==="stop"&&(y(),s(f))}}),F=()=>{l.isFinished||(l.id=setTimeout(()=>Le(this,void 0,void 0,function*(){yield x(),F()}),l.pollInterval))};return setTimeout(()=>Le(this,void 0,void 0,function*(){l.immediately&&(yield x()),F()}),0),qt({task:l,clearTask:y,completedTask:c})}}xe.silent=!1;var Ka={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};const Qa=Ka;function pt(o){for(var t=1;t<arguments.length;t++){var l=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(l).filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable}))),s.forEach(function(p){Ja(o,p,l[p])})}return o}function Ja(o,t,l){return t in o?Object.defineProperty(o,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[t]=l,o}var Qe=function(t,l){var s=pt({},t,l.attrs);return i(mt,pt({},s,{icon:Qa}),null)};Qe.displayName="DatabaseOutlined";Qe.inheritAttrs=!1;const Xa=Qe;function Ya(){const o=pe(),{scroller:t,stackViewEl:l,stack:s,currPage:p,currLocation:c,useEventListen:y,eventEmitter:x,getPane:F,props:f,deletedFiles:C,walker:v,sortedFiles:A,previewing:I}=yt().toRefs();Pe(()=>s.value.length,ot((n,u)=>{var d;n!==u&&((d=t.value)==null||d.scrollToItem(0))},300)),Gt(async()=>{var n;if(!s.value.length)if(f.value.mode==="scanned-fixed"||f.value.mode==="walk")s.value=[{files:[],curr:f.value.path??""}];else{const u=await _e("/");s.value.push({files:u.files,curr:"/"})}o.value=new _a,o.value.configure({parent:l.value}),f.value.path&&f.value.path!=="/"?await T(f.value.path):(n=S.conf)!=null&&n.home&&T(S.conf.home)}),Pe(c,ot(n=>{const u=F.value();if(!u)return;u.path=n;const d=Ne(n).pop()??"",_=(()=>{const M={walk:"Walk","scanned-fixed":"Fixed",scanned:null}[f.value.mode??"scanned"],$=G=>M?`${M}: ${G}`:G,V=S.getShortPath(n);return $(V.length>24&&d?d:V)})();u.name=U("div",{style:"display:flex;align-items:center"},[U(Xa),U("span",{class:"line-clamp-1",style:"max-width: 256px"},_)]),u.nameFallbackStr=_,S.recent=S.recent.filter(M=>M.key!==u.key),S.recent.unshift({path:n,key:u.key,mode:f.value.mode}),S.recent.length>20&&(S.recent=S.recent.slice(0,20))},300));const P=()=>We(c.value),O=async n=>{var u,d;if(n.type==="dir")try{(u=o.value)==null||u.start();const{files:w}=await _e(n.fullpath);f.value.mode=="scanned-fixed"?s.value=[{files:w,curr:n.fullpath}]:s.value.push({files:w,curr:n.name})}finally{(d=o.value)==null||d.done()}},W=n=>{if(f.value.mode!="walk")for(;n<s.value.length-1;)s.value.pop()},B=()=>{T(aa(c.value))},E=(n,u)=>(na(S.conf,"global.conf load failed"),S.conf.is_win?n.toLowerCase()==u.toLowerCase():n==u),T=async n=>{f.value.mode==="walk"?F.value().path=n:f.value.mode==="scanned-fixed"?await O({fullpath:n,name:n,type:"dir"}):await D(n),st(500).then(()=>x.value.emit("viewableAreaFilesChange"))},D=async n=>{var d,w;const u=s.value.slice();try{Kt(n)||(n=Qt(((d=S.conf)==null?void 0:d.sd_cwd)??"/",n));const _=Ne(n),M=s.value.map($=>$.curr);for(M.shift();M[0]&&_[0]&&E(M[0],_[0]);)M.shift(),_.shift();for(let $=0;$<M.length;$++)s.value.pop();if(!_.length)return L();for(const $ of _){const V=(w=p.value)==null?void 0:w.files.find(G=>E(G.name,$));if(!V)throw console.error({frags:_,frag:$,stack:Jt(s.value)}),new Error(`${$} not found`);await O(V)}}catch(_){throw de.error(N("moveFailedCheckPath")+(_ instanceof Error?_.message:"")),console.error(n,Ne(n),p.value),s.value=u,_}},L=Xt(async()=>{var n,u,d;try{if((n=o.value)==null||n.start(),v.value)await v.value.reset(),x.value.emit("loadNextDir");else{const{files:w}=await _e(c.value);Be(s.value).files=w}C.value.clear(),(u=t.value)==null||u.scrollToItem(0),de.success(N("refreshCompleted"))}finally{(d=o.value)==null||d.done()}}),H=async(n=!1)=>{var u,d,w;if(!(n===!0&&I.value)){if(f.value.mode==="walk"&&v.value){const _=((u=t.value)==null?void 0:u.$_endIndex)??64;if(S.autoRefreshWalkMode&&_<S.autoRefreshWalkModePosLimit&&await v.value.isExpired()){const M=pe(!1),$=()=>{M.value=!0,S.autoRefreshWalkMode=!1,V(),de.success(N("walkModeAutoRefreshDisabled"))},V=de.loading(U("span",{},[N("autoUpdate"),U("span",{onClick:$,style:{paddingLeft:"16px",cursor:"pointer",color:"var(--primary-color)"}},N("disable"))]),0);try{const G=new Promise(be=>{v.value.seamlessRefresh(_,M).then(ae=>{M.value||(v.value=ae,x.value.emit("loadNextDir"),be())})});await Promise.all([G,st(1500)])}finally{V()}}return}try{if(!S.autoRefreshNormalFixedMode)return;(d=o.value)==null||d.start();const{files:_}=await _e(c.value);Be(s.value).files.map($=>$.date).join()!==_.map($=>$.date).join()&&(Be(s.value).files=_,de.success(N("autoUpdate")))}finally{(w=o.value)==null||w.done()}}};Yt("returnToIIB",H),y.value("refresh",L);const Y=n=>{T(n)},te=Se(()=>S.quickMovePaths.map(n=>({...n,path:lt(n.dir)}))),q=Se(()=>{const n=lt(c.value);return te.value.find(d=>d.path===n)}),se=async()=>{const n=S.tabList[f.value.tabIdx],u={type:"empty",name:N("emptyStartPage"),key:Date.now()+Ee(),popAddPathModal:{path:c.value,type:"scanned-fixed"}};n.panes.push(u),n.key=u.key},Z=pe(!1),le=pe(c.value),ge=()=>{Z.value=!0,le.value=c.value},Ae=async()=>{await T(le.value),Z.value=!1};$a("click",n=>{var u,d,w;(w=(d=(u=n.target)==null?void 0:u.className)==null?void 0:d.includes)!=null&&w.call(d,"ant-input")||(Z.value=!1)});const $e=()=>{const n=parent.location,u=n.href.substring(0,n.href.length-n.search.length),d=new URLSearchParams(n.search);d.set("action","open"),d.set("path",c.value),d.set("mode",f.value.mode??"scanned");const w=`${u}?${d.toString()}`;We(w,N("copyLocationUrlSuccessMsg"))},re=(n="tag-search")=>{const u=S.tabList[f.value.tabIdx],d={type:n,key:Ee(),searchScope:c.value,name:N(n==="tag-search"?"imgSearch":"fuzzy-search")};u.panes.push(d),u.key=d.key},z=()=>x.value.emit("selectAll"),ie=async()=>{await oa(c.value),await L()},ke=()=>{const n=c.value;Ct.set(n,s.value);const u=S.tabList[f.value.tabIdx],d={type:"local",key:Ee(),path:n,name:N("local"),stackKey:n,mode:"walk"};u.panes.push(d),u.key=d.key},Re=Se(()=>!v.value&&A.value.some(n=>n.type==="dir"));return{locInputValue:le,isLocationEditing:Z,onLocEditEnter:Ae,onEditBtnClick:ge,addToSearchScanPathAndQuickMove:se,searchPathInfo:q,refresh:L,copyLocation:P,back:W,openNext:O,currPage:p,currLocation:c,stack:s,scroller:t,share:$e,selectAll:z,quickMoveTo:Y,onCreateFloderBtnClick:ie,onWalkBtnClick:ke,showWalkButton:Re,searchInCurrentDir:re,backToLastUseTo:B,...Za(()=>H(!0))}}const Za=o=>{const t=pe([]),l=Se(()=>t.value.length>0);Zt(()=>{t.value.forEach(c=>c())});const s=ea(ta+"poll-interval",3);return{onPollRefreshClick:()=>{if(t.value.length){t.value.forEach(c=>c()),t.value=[];return}ht.confirm({title:N("pollRefresh"),width:640,content:()=>U("div",{},[U("p",{class:"uni-desc primary-bg"},N("pollRefreshTip")),U("div",{style:{display:"flex",alignItems:"center",gap:"4px"}},[U("span",{},N("pollInterval")+"(s): "),U(kt,{min:1,max:60*10,modelValue:s.value,"onUpdate:modelValue":c=>{s.value=c}})])]),onOk:()=>{const{clearTask:c}=xe.run({pollInterval:s.value*1e3,action:o});t.value.push(c)}})},polling:l}};const en={class:"base-info"},tn=he({__name:"BaseFileListInfo",props:{fileNum:{},selectedFileNum:{}},setup(o){return(t,l)=>(R(),j("div",en,[h("span",null,[ee(b(t.$t("items",[t.fileNum]))+" ",1),t.selectedFileNum?(R(),j(He,{key:0},[ee(", "+b(t.$t("selectedItems",[t.selectedFileNum])),1)],64)):J("",!0)])]))}});const an=gt(tn,[["__scopeId","data-v-7f9c0b15"]]),nn={class:"hint"},on={class:"location-bar"},sn=["onClick"],ln={key:3,class:"location-act"},rn={class:"actions"},un=["onClick"],cn=["onClick"],dn={style:{width:"512px",background:"var(--zp-primary-background)",padding:"16px","border-radius":"4px","box-shadow":"0 0 4px var(--zp-secondary-background)",border:"1px solid var(--zp-secondary-background)"}},pn={style:{padding:"4px"}},fn={style:{padding:"4px"}},vn={style:{padding:"4px"}},mn={key:0,class:"view"},hn={style:{padding:"16px 0 512px"}},gn={key:0,class:"preview-switch"},kn=he({__name:"stackView",props:{tabIdx:{},paneIdx:{},path:{},mode:{},stackKey:{}},setup(o){const t=o,l=sa(),{scroller:s,stackViewEl:p,props:c,multiSelectedIdxs:y,spinning:x}=yt().toRefs();s.value,p.value;const{currLocation:F,currPage:f,refresh:C,copyLocation:v,back:A,openNext:I,stack:P,quickMoveTo:O,addToSearchScanPathAndQuickMove:W,locInputValue:B,isLocationEditing:E,onLocEditEnter:T,onEditBtnClick:D,share:L,selectAll:H,onCreateFloderBtnClick:Y,onWalkBtnClick:te,showWalkButton:q,searchInCurrentDir:se,backToLastUseTo:Z,polling:le,onPollRefreshClick:ge}=Ya(),{gridItems:Ae,sortMethodConv:$e,moreActionsDropdownShow:re,sortedFiles:z,sortMethod:ie,itemSize:ke,loadNextDir:Re,loadNextDirLoading:n,canLoadNext:u,onScroll:d,cellWidth:w,dirCoverCache:_}=Sa(),{onDrop:M,onFileDragStart:$,onFileDragEnd:V}=Ra(),{onFileItemClick:G,onContextMenuClick:be,showGenInfo:ae,imageGenInfo:Je,q:wt}=Ma({openNext:I}),{previewIdx:ue,onPreviewVisibleChange:_t,previewing:Me,previewImgMove:Xe,canPreview:Ye,scrollToFileId:St}=Fa(),Ze=la(),{showMenuIdx:Fe}=Ia(),{onClearAllSelected:It,onReverseSelect:Pt,onSelectAll:xt}=Pa(),{getGenDiff:At,changeIndchecked:ce,seedChangeChecked:ye,getRawGenParams:$t,getGenDiffWatchDep:Rt}=Na(),Mt=()=>{z.value.length!==0&&ut(z.value,ue.value||0)};return Pe(()=>t,()=>{c.value=t;const m=Ct.get(t.stackKey??"");m&&(P.value=m.slice())},{immediate:!0}),Pe(()=>Ze.visible,(m,a)=>{if(!m&&a){const Ce=Ze.lastActiveId;Ce&&St(Ce)}}),(m,a)=>{const Ce=ma,Ft=ha,Dt=ht,Ot=ga,Tt=me,Lt=oe,et=ka,De=ba,tt=je,Oe=bt,Nt=kt,we=Ca,at=wa,Bt=X,Et=ve;return R(),K(Et,{spinning:e(x),size:"large"},{default:g(()=>[i(Da,{show:e(l).keepMultiSelect||!!e(y).length,onClearAllSelected:e(It),onSelectAll:e(xt),onReverseSelect:e(Pt)},null,8,["show","onClearAllSelected","onSelectAll","onReverseSelect"]),i(Ce,{style:{display:"none"}}),h("div",{ref_key:"stackViewEl",ref:p,onDragover:a[31]||(a[31]=k(()=>{},["prevent"])),onDrop:a[32]||(a[32]=k(r=>e(M)(r),["prevent"])),class:"container"},[i(Dt,{visible:e(ae),"onUpdate:visible":a[1]||(a[1]=r=>Q(ae)?ae.value=r:null),width:"70vw","mask-closable":"",onOk:a[2]||(a[2]=r=>ae.value=!1)},{cancelText:g(()=>[]),default:g(()=>[i(Ft,{active:"",loading:!e(wt).isIdle},{default:g(()=>[h("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto","z-index":"9999"},onDblclick:a[0]||(a[0]=r=>e(We)(e(Je)))},[h("div",nn,b(m.$t("doubleClickToCopy")),1),ee(" "+b(e(Je)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),h("div",on,[h("div",{class:"breadcrumb",style:ra({flex:e(E)?1:""})},[e(E)?(R(),K(Ot,{key:0,style:{flex:"1"},value:e(B),"onUpdate:value":a[3]||(a[3]=r=>Q(B)?B.value=r:null),onClick:a[4]||(a[4]=k(()=>{},["stop"])),onKeydown:a[5]||(a[5]=k(()=>{},["stop"])),onPressEnter:e(T),"allow-clear":""},null,8,["value","onPressEnter"])):(R(),K(Lt,{key:1,style:{flex:"1"}},{default:g(()=>[(R(!0),j(He,null,rt(e(P),(r,ne)=>(R(),K(Tt,{key:ne},{default:g(()=>[h("a",{onClick:k(Te=>e(A)(ne),["prevent"])},b(r.curr==="/"?m.$t("root"):r.curr.replace(/:\/$/,m.$t("drive"))),9,sn)]),_:2},1024))),128))]),_:1})),e(E)?(R(),K(et,{key:2,size:"small",onClick:e(T),type:"primary"},{default:g(()=>[ee(b(m.$t("go")),1)]),_:1},8,["onClick"])):(R(),j("div",ln,[m.mode==="scanned-fixed"?(R(),j("a",{key:0,onClick:a[6]||(a[6]=k((...r)=>e(Z)&&e(Z)(...r),["prevent"])),style:{margin:"0 8px 16px 0"}},[i(e(Ga))])):J("",!0),h("a",{onClick:a[7]||(a[7]=k((...r)=>e(v)&&e(v)(...r),["prevent"])),class:"copy"},b(m.$t("copy")),1),h("a",{onClick:a[8]||(a[8]=k((...r)=>e(D)&&e(D)(...r),["prevent","stop"]))},b(m.$t("edit")),1)]))],4),h("div",rn,[h("a",{class:"opt",onClick:a[9]||(a[9]=k((...r)=>e(C)&&e(C)(...r),["prevent"]))},b(m.$t("refresh")),1),h("a",{class:"opt",onClick:a[10]||(a[10]=k((...r)=>e(ge)&&e(ge)(...r),["prevent"]))},b(e(le)?m.$t("stopPollRefresh"):m.$t("pollRefresh")),1),h("a",{class:"opt",onClick:k(Mt,["prevent"])},b(m.$t("TikTok View")),9,un),i(Oe,null,{overlay:g(()=>[i(tt,null,{default:g(()=>[i(De,{key:"tag-search"},{default:g(()=>[h("a",{onClick:a[12]||(a[12]=k(r=>e(se)("tag-search"),["prevent"]))},b(m.$t("imgSearch")),1)]),_:1}),i(De,{key:"tag-search"},{default:g(()=>[h("a",{onClick:a[13]||(a[13]=k(r=>e(se)("fuzzy-search"),["prevent"]))},b(m.$t("fuzzy-search")),1)]),_:1})]),_:1})]),default:g(()=>[h("a",{class:"opt",onClick:a[11]||(a[11]=k(()=>{},["prevent"]))},[ee(b(m.$t("search"))+" ",1),i(e(Ve))])]),_:1}),e(q)?(R(),j("a",{key:0,class:"opt",onClick:a[14]||(a[14]=k((...r)=>e(te)&&e(te)(...r),["prevent"]))}," Walk ")):J("",!0),h("a",{class:"opt",onClick:a[15]||(a[15]=k((...r)=>e(H)&&e(H)(...r),["prevent","stop"]))},b(m.$t("selectAll")),1),e(ia)?J("",!0):(R(),j("a",{key:1,class:"opt",onClick:a[16]||(a[16]=k((...r)=>e(L)&&e(L)(...r),["prevent"]))},b(m.$t("share")),1)),i(Oe,null,{overlay:g(()=>[i(tt,null,{default:g(()=>[(R(!0),j(He,null,rt(e(l).quickMovePaths,r=>(R(),K(De,{key:r.dir},{default:g(()=>[h("a",{onClick:k(ne=>e(O)(r.dir),["prevent"])},b(r.zh),9,cn)]),_:2},1024))),128))]),_:1})]),default:g(()=>[h("a",{class:"opt",onClick:a[17]||(a[17]=k(()=>{},["prevent"]))},[ee(b(m.$t("quickMove"))+" ",1),i(e(Ve))])]),_:1}),i(Oe,{trigger:["click"],visible:e(re),"onUpdate:visible":a[27]||(a[27]=r=>Q(re)?re.value=r:null),placement:"bottomLeft",getPopupContainer:r=>r.parentNode},{overlay:g(()=>[h("div",dn,[i(Bt,ua(ca({labelCol:{span:10},wrapperCol:{span:14}})),{default:g(()=>[i(we,{label:m.$t("gridCellWidth")},{default:g(()=>[i(Nt,{modelValue:e(w),"onUpdate:modelValue":a[19]||(a[19]=r=>Q(w)?w.value=r:null),max:1024,min:64,step:16},null,8,["modelValue"])]),_:1},8,["label"]),i(we,{label:m.$t("sortingMethod")},{default:g(()=>[i(e(da),{value:e(ie),"onUpdate:value":a[20]||(a[20]=r=>Q(ie)?ie.value=r:null),onClick:a[21]||(a[21]=k(()=>{},["stop"])),conv:e($e),options:e(pa)},null,8,["value","conv","options"])]),_:1},8,["label"]),i(we,{label:m.$t("showChangeIndicators")},{default:g(()=>[i(at,{checked:e(ce),"onUpdate:checked":a[22]||(a[22]=r=>Q(ce)?ce.value=r:null),onClick:e($t)},null,8,["checked","onClick"])]),_:1},8,["label"]),i(we,{label:m.$t("seedAsChange")},{default:g(()=>[i(at,{checked:e(ye),"onUpdate:checked":a[23]||(a[23]=r=>Q(ye)?ye.value=r:null),disabled:!e(ce)},null,8,["checked","disabled"])]),_:1},8,["label"]),h("div",pn,[h("a",{onClick:a[24]||(a[24]=k((...r)=>e(W)&&e(W)(...r),["prevent"]))},b(m.$t("addToSearchScanPathAndQuickMove")),1)]),h("div",fn,[h("a",{onClick:a[25]||(a[25]=k(r=>e(fa)(e(F)+"/"),["prevent"]))},b(m.$t("openWithLocalFileBrowser")),1)]),h("div",vn,[h("a",{onClick:a[26]||(a[26]=k((...r)=>e(Y)&&e(Y)(...r),["prevent"]))},b(m.$t("createFolder")),1)])]),_:1},16)])]),default:g(()=>[h("a",{class:"opt",onClick:a[18]||(a[18]=k(()=>{},["prevent"]))},b(m.$t("more")),1)]),_:1},8,["visible","getPopupContainer"])])]),e(f)?(R(),j("div",mn,[i(e(xa),{class:"file-list",items:e(z),ref_key:"scroller",ref:s,onScroll:e(d),"item-size":e(ke).first,"key-field":"fullpath","item-secondary-size":e(ke).second,gridItems:e(Ae)},{default:g(({item:r,index:ne})=>[i(Aa,{idx:parseInt(ne),file:r,"full-screen-preview-image-url":e(z)[e(ue)]?e(va)(e(z)[e(ue)]):"","show-menu-idx":e(Fe),"onUpdate:showMenuIdx":a[28]||(a[28]=Te=>Q(Fe)?Fe.value=Te:null),selected:e(y).includes(ne),"cell-width":e(w),onFileItemClick:e(G),onDragstart:e($),onDragend:e(V),onPreviewVisibleChange:e(_t),onContextMenuClick:e(be),onTiktokView:(Te,zt)=>e(ut)(e(z),zt),"is-selected-mutil-files":e(y).length>1,"enable-change-indicator":e(ce),"seed-change-checked":e(ye),"get-gen-diff":e(At),"get-gen-diff-watch-dep":e(Rt),previewing:e(Me),"cover-files":e(_).get(r.fullpath)},null,8,["idx","file","full-screen-preview-image-url","show-menu-idx","selected","cell-width","onFileItemClick","onDragstart","onDragend","onPreviewVisibleChange","onContextMenuClick","onTiktokView","is-selected-mutil-files","enable-change-indicator","seed-change-checked","get-gen-diff","get-gen-diff-watch-dep","previewing","cover-files"])]),after:g(()=>[h("div",hn,[t.mode==="walk"?(R(),K(et,{key:0,onClick:e(Re),loading:e(n),block:"",type:"primary",disabled:!e(u),ghost:""},{default:g(()=>[ee(b(m.$t("loadNextPage")),1)]),_:1},8,["onClick","loading","disabled"])):J("",!0)])]),_:1},8,["items","onScroll","item-size","item-secondary-size","gridItems"]),e(Me)?(R(),j("div",gn,[i(e(Oa),{onClick:a[29]||(a[29]=r=>e(Xe)("prev")),class:it({disable:!e(Ye)("prev")})},null,8,["class"]),i(e(Ta),{onClick:a[30]||(a[30]=r=>e(Xe)("next")),class:it({disable:!e(Ye)("next")})},null,8,["class"])])):J("",!0)])):J("",!0)],544),e(Me)?(R(),K(La,{key:0,file:e(z)[e(ue)],idx:e(ue),onContextMenuClick:e(be)},null,8,["file","idx","onContextMenuClick"])):J("",!0),i(an,{"file-num":e(z).length,"selected-file-num":e(y).length},null,8,["file-num","selected-file-num"])]),_:1},8,["spinning"])}}});const Bn=gt(kn,[["__scopeId","data-v-95943bb5"]]);export{Bn as default};
