import{Y as ne,Z as te,d as D,j as ae,av as le,w as O,$ as V,aj as E,l as L,u as oe,aw as ue,ax as ie,h as S,c as a,a as U,ay as de,az as se,g as R,aA as ce,P as s,aB as A,k as H,aC as re,o as y,y as I,n as c,r as n,ai as p,m as K,E as F,p as _,z as P,v as C,S as G,aD as he,I as fe,x,q as z,A as me,C as ve,aE as ge,aF as _e,aG as pe,aH as be,V as ke,U as Ce,X as we}from"./index-24041d00.js";import{N as W,_ as q,F as ye}from"./numInput-8adc0e3b.js";import{g as Se}from"./shortcut-f1370d0c.js";/* empty css              *//* empty css              */var Te=te("small","default"),$e=function(){return{id:String,prefixCls:String,size:s.oneOf(Te),disabled:{type:Boolean,default:void 0},checkedChildren:s.any,unCheckedChildren:s.any,tabindex:s.oneOfType([s.string,s.number]),autofocus:{type:Boolean,default:void 0},loading:{type:Boolean,default:void 0},checked:s.oneOfType([s.string,s.number,s.looseBool]),checkedValue:s.oneOfType([s.string,s.number,s.looseBool]).def(!0),unCheckedValue:s.oneOfType([s.string,s.number,s.looseBool]).def(!1),onChange:{type:Function},onClick:{type:Function},onKeydown:{type:Function},onMouseup:{type:Function},"onUpdate:checked":{type:Function},onBlur:Function,onFocus:Function}},xe=D({compatConfig:{MODE:3},name:"ASwitch",__ANT_SWITCH:!0,inheritAttrs:!1,props:$e(),slots:["checkedChildren","unCheckedChildren"],setup:function(e,u){var v=u.attrs,w=u.slots,h=u.expose,r=u.emit,l=ae();le(function(){O(!("defaultChecked"in v),"Switch","'defaultChecked' is deprecated, please use 'v-model:checked'"),O(!("value"in v),"Switch","`value` is not validate prop, do you mean `checked`?")});var t=V(e.checked!==void 0?e.checked:v.defaultChecked),g=E(function(){return t.value===e.checkedValue});L(function(){return e.checked},function(){t.value=e.checked});var m=oe("switch",e),f=m.prefixCls,T=m.direction,M=m.size,b=V(),i=function(){var o;(o=b.value)===null||o===void 0||o.focus()},$=function(){var o;(o=b.value)===null||o===void 0||o.blur()};h({focus:i,blur:$}),ue(function(){ie(function(){e.autofocus&&!e.disabled&&b.value.focus()})});var N=function(o,k){e.disabled||(r("update:checked",o),r("change",o,k),l.onFieldChange())},Y=function(o){r("blur",o)},Z=function(o){i();var k=g.value?e.unCheckedValue:e.checkedValue;N(k,o),r("click",k,o)},J=function(o){o.keyCode===A.LEFT?N(e.unCheckedValue,o):o.keyCode===A.RIGHT&&N(e.checkedValue,o),r("keydown",o)},Q=function(o){var k;(k=b.value)===null||k===void 0||k.blur(),r("mouseup",o)},ee=E(function(){var d;return d={},S(d,"".concat(f.value,"-small"),M.value==="small"),S(d,"".concat(f.value,"-loading"),e.loading),S(d,"".concat(f.value,"-checked"),g.value),S(d,"".concat(f.value,"-disabled"),e.disabled),S(d,f.value,!0),S(d,"".concat(f.value,"-rtl"),T.value==="rtl"),d});return function(){var d;return a(ce,{insertExtraNode:!0},{default:function(){return[a("button",U(U(U({},de(e,["prefixCls","checkedChildren","unCheckedChildren","checked","autofocus","checkedValue","unCheckedValue","id","onChange","onUpdate:checked"])),v),{},{id:(d=e.id)!==null&&d!==void 0?d:l.id.value,onKeydown:J,onClick:Z,onBlur:Y,onMouseup:Q,type:"button",role:"switch","aria-checked":t.value,disabled:e.disabled||e.loading,class:[v.class,ee.value],ref:b}),[a("div",{class:"".concat(f.value,"-handle")},[e.loading?a(se,{class:"".concat(f.value,"-loading-icon")},null):null]),a("span",{class:"".concat(f.value,"-inner")},[g.value?R(w,e,"checkedChildren"):R(w,e,"unCheckedChildren")])])]}})}}});const X=ne(xe);const j="/infinite_image_browsing/fe-static/assets/sample-55dcafc6.webp",Ie=["width","height","src"],Fe=D({__name:"ImageSetting",setup(B){function e(w,h){return new Promise(r=>{const l=new Image;l.onload=()=>{const t=document.createElement("canvas");t.width=l.width*h,t.height=l.height*h,t.getContext("2d").drawImage(l,0,0,t.width,t.height),r(t.toDataURL())},l.src=w})}const u=H(),v=V("");return L(()=>[u.enableThumbnail,u.gridThumbnailResolution],re(async()=>{u.enableThumbnail&&(v.value=await e(j,u.gridThumbnailResolution/1024))},300),{immediate:!0,deep:!0}),(w,h)=>{const r=q,l=X;return y(),I(P,null,[a(r,{label:n(p)("defaultGridCellWidth")},{default:c(()=>[a(W,{min:64,max:1024,step:32,modelValue:n(u).defaultGridCellWidth,"onUpdate:modelValue":h[0]||(h[0]=t=>n(u).defaultGridCellWidth=t)},null,8,["modelValue"])]),_:1},8,["label"]),a(r,{label:n(p)("useThumbnailPreview")},{default:c(()=>[a(l,{checked:n(u).enableThumbnail,"onUpdate:checked":h[1]||(h[1]=t=>n(u).enableThumbnail=t)},null,8,["checked"])]),_:1},8,["label"]),n(u).enableThumbnail?(y(),K(r,{key:0,label:n(p)("thumbnailResolution")},{default:c(()=>[a(W,{modelValue:n(u).gridThumbnailResolution,"onUpdate:modelValue":h[2]||(h[2]=t=>n(u).gridThumbnailResolution=t),min:256,max:1024,step:64},null,8,["modelValue"])]),_:1},8,["label"])):F("",!0),a(r,{label:n(p)("livePreview")},{default:c(()=>[_("div",null,[_("img",{width:n(u).defaultGridCellWidth,height:n(u).defaultGridCellWidth,src:n(u).enableThumbnail?v.value:n(j)},null,8,Ie)])]),_:1},8,["label"])],64)}}}),Ve={class:"panel"},Be={style:{"margin-top":"0"}},Me={class:"lang-select-wrap"},Ne={class:"col"},Ue={class:"col"},Ke={class:"col"},Pe=D({__name:"globalSetting",setup(B){const e=H(),u=V(!1),v=async()=>{window.location.reload()},w=[{value:"en",text:"English"},{value:"zh",text:"中文"},{value:"de",text:"Deutsch"}],h=(l,t)=>{const g=Se(l);g&&(e.shortcut[t]=g)},r=async()=>{await ge("shutdown_api_server_command"),await _e.removeFile(pe),await be()};return(l,t)=>{const g=X,m=q,f=ke,T=Ce,M=ye;return y(),I("div",Ve,[F("",!0),a(M,null,{default:c(()=>{var b;return[_("h2",Be,C(n(p)("ImageBrowsingSettings")),1),a(Fe),_("h2",null,C(n(p)("other")),1),a(m,{label:l.$t("onlyFoldersAndImages")},{default:c(()=>[a(g,{checked:n(e).onlyFoldersAndImages,"onUpdate:checked":t[0]||(t[0]=i=>n(e).onlyFoldersAndImages=i)},null,8,["checked"])]),_:1},8,["label"]),a(m,{label:l.$t("defaultSortingMethod")},{default:c(()=>[a(n(G),{value:n(e).defaultSortingMethod,"onUpdate:value":t[1]||(t[1]=i=>n(e).defaultSortingMethod=i),conv:n(he),options:n(fe)},null,8,["value","conv","options"])]),_:1},8,["label"]),a(m,{label:l.$t("longPressOpenContextMenu")},{default:c(()=>[a(g,{checked:n(e).longPressOpenContextMenu,"onUpdate:checked":t[2]||(t[2]=i=>n(e).longPressOpenContextMenu=i)},null,8,["checked"])]),_:1},8,["label"]),a(m,{label:l.$t("lang")},{default:c(()=>[_("div",Me,[a(n(G),{options:w,value:n(e).lang,"onUpdate:value":t[3]||(t[3]=i=>n(e).lang=i),onChange:t[4]||(t[4]=i=>u.value=!0)},null,8,["value"])]),u.value?(y(),K(f,{key:0,type:"primary",onClick:v,ghost:""},{default:c(()=>[x(C(n(p)("langChangeReload")),1)]),_:1})):F("",!0)]),_:1},8,["label"]),_("h2",null,C(n(p)("shortcutKey")),1),a(m,{label:l.$t("deleteSelected")},{default:c(()=>[_("div",Ne,[a(T,{value:n(e).shortcut.delete,onKeydown:t[5]||(t[5]=z(i=>h(i,"delete"),["stop","prevent"])),placeholder:l.$t("shortcutKeyDescription")},null,8,["value","placeholder"]),a(f,{onClick:t[6]||(t[6]=i=>n(e).shortcut.delete=""),class:"clear-btn"},{default:c(()=>[x(C(l.$t("clear")),1)]),_:1})])]),_:1},8,["label"]),(y(!0),I(P,null,me(((b=n(e).conf)==null?void 0:b.all_custom_tags)??[],i=>(y(),K(m,{label:l.$t("toggleTagSelection",{tag:i.name}),key:i.id},{default:c(()=>[_("div",Ue,[a(T,{value:n(e).shortcut[`toggle_tag_${i.name}`],onKeydown:z($=>h($,`toggle_tag_${i.name}`),["stop","prevent"]),placeholder:l.$t("shortcutKeyDescription")},null,8,["value","onKeydown","placeholder"]),a(f,{onClick:$=>n(e).shortcut[`toggle_tag_${i.name}`]="",class:"clear-btn"},{default:c(()=>[x(C(l.$t("clear")),1)]),_:2},1032,["onClick"])])]),_:2},1032,["label"]))),128)),n(ve)?(y(),I(P,{key:0},[_("h2",null,C(n(p)("clientSpecificSettings")),1),a(m,null,{default:c(()=>[_("div",Ke,[a(f,{onClick:r,class:"clear-btn"},{default:c(()=>[x(C(l.$t("initiateSoftwareStartupConfig")),1)]),_:1})])]),_:1})],64)):F("",!0)]}),_:1})])}}});const Ge=we(Pe,[["__scopeId","data-v-60bd6962"]]);export{Ge as default};
