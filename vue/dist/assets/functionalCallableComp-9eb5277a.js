import{cP as re,cQ as le,d as L,bq as oe,$ as O,l as q,_ as H,a as v,a0 as z,h as M,c as f,P as ee,j as ne,u as ae,aI as ue,b0 as ie,aM as ce,aw as se,w as de,f as fe,ao as U,aK as ve,i as he,ag as pe,c4 as K,R as X,cR as me,L as Y,V as be,cz as ge,ai as G,am as ye,al as xe,U as ke,cq as Ce,x as we}from"./index-3ef1f0fd.js";import{i as Se}from"./db-e68559e0.js";function Ie(n,e){var a=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!a){if(Array.isArray(n)||(a=re(n))||e&&n&&typeof n.length=="number"){a&&(n=a);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(s){throw s},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var C=!0,b=!1,g;return{s:function(){a=a.call(n)},n:function(){var s=a.next();return C=s.done,s},e:function(s){b=!0,g=s},f:function(){try{!C&&a.return!=null&&a.return()}finally{if(b)throw g}}}}var J=1/0,Oe=17976931348623157e292;function Ue(n){if(!n)return n===0?n:0;if(n=le(n),n===J||n===-J){var e=n<0?-1:1;return e*Oe}return n===n?n:0}var Pe=["prefixCls","name","id","type","disabled","readonly","tabindex","autofocus","value","required"],Me={prefixCls:String,name:String,id:String,type:String,defaultChecked:{type:[Boolean,Number],default:void 0},checked:{type:[Boolean,Number],default:void 0},disabled:Boolean,tabindex:{type:[Number,String]},readonly:Boolean,autofocus:Boolean,value:ee.any,required:Boolean};const _e=L({compatConfig:{MODE:3},name:"Checkbox",inheritAttrs:!1,props:oe(Me,{prefixCls:"rc-checkbox",type:"checkbox",defaultChecked:!1}),emits:["click","change"],setup:function(e,a){var r=a.attrs,i=a.emit,C=a.expose,b=O(e.checked===void 0?e.defaultChecked:e.checked),g=O();q(function(){return e.checked},function(){b.value=e.checked}),C({focus:function(){var l;(l=g.value)===null||l===void 0||l.focus()},blur:function(){var l;(l=g.value)===null||l===void 0||l.blur()}});var d=O(),s=function(l){if(!e.disabled){e.checked===void 0&&(b.value=l.target.checked),l.shiftKey=d.value;var w={target:v(v({},e),{},{checked:l.target.checked}),stopPropagation:function(){l.stopPropagation()},preventDefault:function(){l.preventDefault()},nativeEvent:l};e.checked!==void 0&&(g.value.checked=!!e.checked),i("change",w),d.value=!1}},y=function(l){i("click",l),d.value=l.shiftKey};return function(){var o,l=e.prefixCls,w=e.name,S=e.id,F=e.type,_=e.disabled,k=e.readonly,t=e.tabindex,u=e.autofocus,h=e.value,p=e.required,m=H(e,Pe),c=r.class,I=r.onFocus,B=r.onBlur,A=r.onKeydown,V=r.onKeypress,E=r.onKeyup,D=v(v({},m),r),x=Object.keys(D).reduce(function(N,P){return(P.substr(0,5)==="aria-"||P.substr(0,5)==="data-"||P==="role")&&(N[P]=D[P]),N},{}),R=z(l,c,(o={},M(o,"".concat(l,"-checked"),b.value),M(o,"".concat(l,"-disabled"),_),o)),T=v(v({name:w,id:S,type:F,readonly:k,disabled:_,tabindex:t,class:"".concat(l,"-input"),checked:!!b.value,autofocus:u,value:h},x),{},{onChange:s,onClick:y,onFocus:I,onBlur:B,onKeydown:A,onKeypress:V,onKeyup:E,required:p});return f("span",{class:R},[f("input",v({ref:g},T),null),f("span",{class:"".concat(l,"-inner")},null)])}}});function qe(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}var Ve=function(){return{name:String,prefixCls:String,options:{type:Array,default:function(){return[]}},disabled:Boolean,id:String}},Be=function(){return v(v({},Ve()),{},{defaultValue:{type:Array},value:{type:Array},onChange:{type:Function},"onUpdate:value":{type:Function}})},Fe=function(){return{prefixCls:String,defaultChecked:{type:Boolean,default:void 0},checked:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},isGroup:{type:Boolean,default:void 0},value:ee.any,name:String,id:String,indeterminate:{type:Boolean,default:void 0},type:{type:String,default:"checkbox"},autofocus:{type:Boolean,default:void 0},onChange:Function,"onUpdate:checked":Function,onClick:Function,skipGroup:{type:Boolean,default:!1}}},Ae=function(){return v(v({},Fe()),{},{indeterminate:{type:Boolean,default:!1}})},te=Symbol("CheckboxGroupContext"),Ne=["indeterminate","skipGroup","id"],je=["onMouseenter","onMouseleave","onInput","class","style"];const j=L({compatConfig:{MODE:3},name:"ACheckbox",inheritAttrs:!1,__ANT_CHECKBOX:!0,props:Ae(),setup:function(e,a){var r=a.emit,i=a.attrs,C=a.slots,b=a.expose,g=ne(),d=ae("checkbox",e),s=d.prefixCls,y=d.direction,o=ue(te,void 0),l=Symbol("checkboxUniId");ie(function(){!e.skipGroup&&o&&o.registerValue(l,e.value)}),ce(function(){o&&o.cancelValue(l)}),se(function(){de(e.checked!==void 0||o||e.value===void 0,"Checkbox","`value` is not validate prop, do you mean `checked`?")});var w=function(t){var u=t.target.checked;r("update:checked",u),r("change",t)},S=O(),F=function(){var t;(t=S.value)===null||t===void 0||t.focus()},_=function(){var t;(t=S.value)===null||t===void 0||t.blur()};return b({focus:F,blur:_}),function(){var k,t,u=fe((k=C.default)===null||k===void 0?void 0:k.call(C)),h=e.indeterminate,p=e.skipGroup,m=e.id,c=m===void 0?g.id.value:m,I=H(e,Ne),B=i.onMouseenter,A=i.onMouseleave;i.onInput;var V=i.class,E=i.style,D=H(i,je),x=v(v({},I),{},{id:c,prefixCls:s.value},D);o&&!p?(x.onChange=function(){for(var N=arguments.length,P=new Array(N),$=0;$<N;$++)P[$]=arguments[$];r.apply(void 0,["change"].concat(P)),o.toggleOption({label:u,value:e.value})},x.name=o.name.value,x.checked=o.mergedValue.value.indexOf(e.value)!==-1,x.disabled=e.disabled||o.disabled.value,x.indeterminate=h):x.onChange=w;var R=z((t={},M(t,"".concat(s.value,"-wrapper"),!0),M(t,"".concat(s.value,"-rtl"),y.value==="rtl"),M(t,"".concat(s.value,"-wrapper-checked"),x.checked),M(t,"".concat(s.value,"-wrapper-disabled"),x.disabled),t),V),T=z(M({},"".concat(s.value,"-indeterminate"),h));return f("label",{class:R,style:E,onMouseenter:B,onMouseleave:A},[f(_e,v(v({},x),{},{class:T,ref:S}),null),u.length?f("span",null,[u]):null])}}}),W=L({compatConfig:{MODE:3},name:"ACheckboxGroup",props:Be(),setup:function(e,a){var r=a.slots,i=a.emit,C=a.expose,b=ne(),g=ae("checkbox",e),d=g.prefixCls,s=g.direction,y=O((e.value===void 0?e.defaultValue:e.value)||[]);q(function(){return e.value},function(){y.value=e.value||[]});var o=U(function(){return e.options.map(function(t){return typeof t=="string"||typeof t=="number"?{label:t,value:t}:t})}),l=O(Symbol()),w=O(new Map),S=function(u){w.value.delete(u),l.value=Symbol()},F=function(u,h){w.value.set(u,h),l.value=Symbol()},_=O(new Map);q(l,function(){var t=new Map,u=Ie(w.value.values()),h;try{for(u.s();!(h=u.n()).done;){var p=h.value;t.set(p,!0)}}catch(m){u.e(m)}finally{u.f()}_.value=t});var k=function(u){var h=y.value.indexOf(u.value),p=he(y.value);h===-1?p.push(u.value):p.splice(h,1),e.value===void 0&&(y.value=p);var m=p.filter(function(c){return _.value.has(c)}).sort(function(c,I){var B=o.value.findIndex(function(V){return V.value===c}),A=o.value.findIndex(function(V){return V.value===I});return B-A});i("update:value",m),i("change",m),b.onFieldChange()};return ve(te,{cancelValue:S,registerValue:F,toggleOption:k,mergedValue:y,name:U(function(){return e.name}),disabled:U(function(){return e.disabled})}),C({mergedValue:y}),function(){var t,u=e.id,h=u===void 0?b.id.value:u,p=null,m="".concat(d.value,"-group");return o.value&&o.value.length>0&&(p=o.value.map(function(c){var I;return f(j,{prefixCls:d.value,key:c.value.toString(),disabled:"disabled"in c?c.disabled:e.disabled,indeterminate:c.indeterminate,value:c.value,checked:y.value.indexOf(c.value)!==-1,onChange:c.onChange,class:"".concat(m,"-item")},{default:function(){return[c.label===void 0?(I=r.label)===null||I===void 0?void 0:I.call(r,c):c.label]}})})),f("div",{class:[m,M({},"".concat(m,"-rtl"),s.value==="rtl")],id:h},[p||((t=r.default)===null||t===void 0?void 0:t.call(r))])}}});j.Group=W;j.install=function(n){return n.component(j.name,j),n.component(W.name,W),n};var Ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"};const Ke=Ge;function Z(n){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable}))),r.forEach(function(i){De(n,i,a[i])})}return n}function De(n,e,a){return e in n?Object.defineProperty(n,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[e]=a,n}var Q=function(e,a){var r=Z({},e,a.attrs);return f(pe,Z({},r,{icon:Ke}),null)};Q.displayName="DownloadOutlined";Q.inheritAttrs=!1;const $e=Q;const He=async n=>(await K.value.get("/files",{params:{folder_path:n}})).data,ze=async n=>(await K.value.post("/delete_files",{file_paths:n})).data,We=async(n,e,a)=>(await K.value.post("/move_files",{file_paths:n,dest:e,create_dest_folder:a})).data,Le=async(n,e,a)=>(await K.value.post("/copy_files",{file_paths:n,dest:e,create_dest_folder:a})).data,Ee=async n=>{await K.value.post("/mkdirs",{dest_folder:n})},Xe=n=>{const e=[];return n.shiftKey&&e.push("Shift"),n.ctrlKey&&e.push("Ctrl"),n.metaKey&&e.push("Cmd"),(n.code.startsWith("Key")||n.code.startsWith("Digit"))&&e.push(n.code),e.join(" + ")},Qe=n=>{const e=O("");return new Promise(a=>{X.confirm({title:G("inputFolderName"),content:()=>f(ke,{value:e.value,"onUpdate:value":r=>e.value=r},null),async onOk(){if(!e.value)return;const r=Ce(n,e.value);await Ee(r),a()}})})},Ye=()=>f("p",{style:{background:"var(--zp-secondary-background)",padding:"8px",borderLeft:"4px solid var(--primary-color)"}},[we("Tips: "),G("multiSelectTips")]),Je=n=>{X.confirm({width:"80vw",title:n.name,icon:null,content:()=>f("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},[f("video",{style:{maxHeight:me?"80vh":"60vh"},src:Y(n),controls:!0,autoplay:!0},null),f("div",{class:"actions",style:{marginTop:"16px"}},[f(be,{onClick:()=>ge([Y(n,!0)])},{icon:f($e,null,null),default:G("download")})])]),maskClosable:!0,wrapClassName:"hidden-antd-btns-modal"})},Ze=()=>{X.confirm({title:G("confirmRebuildImageIndex"),onOk:async()=>{await Se(),ye.emit("searchIndexExpired"),xe.success(G("rebuildComplete"))}})};export{j as C,Ye as M,He as a,Qe as b,Le as c,ze as d,Je as e,Xe as g,qe as l,We as m,Ze as o,Ue as t};
