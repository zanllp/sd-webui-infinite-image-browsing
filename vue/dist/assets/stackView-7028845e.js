import{d as K,u as re,g as U,_ as Ce,c as a,a as te,P as X,D as ye,f as we,w as Le,b as qe,e as Ke,h as _e,M as ne,i as Ge,j as Qe,F as ae,k as He,r as We,o as C,l as A,m as i,n as e,p as z,q as c,t as y,s as J,I as Je,v as he,x as Xe,y as Ye,z as F,A as x,B as Ze,C as H,E as ee,G as et,H as tt,S as be,J as W,K as nt,L as at,N as ke,O as ot,Q as rt,R as st,T as lt,U as it,V as ut}from"./index-e0b49225.js";import{D as Ie,S as L,s as dt,u as ct,a as pt,b as mt,c as vt,d as ft,e as _t,f as bt,g as kt,h as gt,i as Ct,j as yt,t as wt,L as ht,R as It,k as xt}from"./fullScreenContextMenu-7f6a8d02.js";import{F as R,_ as St}from"./index-84ff8eb7.js";import"./index-f1c455a2.js";/* empty css              *//* empty css              */import"./db-b8702e20.js";import"./_baseIteratee-21c606ba.js";var Pt=["class","style"],Mt=function(){return{prefixCls:String,href:String,separator:X.any,overlay:X.any,onClick:Function}};const q=K({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:Mt(),slots:["separator","overlay"],setup:function(o,k){var u=k.slots,d=k.attrs,g=re("breadcrumb",o),_=g.prefixCls,v=function(h,l){var s=U(u,o,"overlay");return s?a(Ie,{overlay:s,placement:"bottom"},{default:function(){return[a("span",{class:"".concat(l,"-overlay-link")},[h,a(ye,null,null)])]}}):h};return function(){var w,h=(w=U(u,o,"separator"))!==null&&w!==void 0?w:"/",l=U(u,o),s=d.class,b=d.style,f=Ce(d,Pt),m;return o.href!==void 0?m=a("a",te({class:"".concat(_.value,"-link"),onClick:o.onClick},f),[l]):m=a("span",te({class:"".concat(_.value,"-link"),onClick:o.onClick},f),[l]),m=v(m,_.value),l?a("span",{class:s,style:b},[m,h&&a("span",{class:"".concat(_.value,"-separator")},[h])]):null}}});var $t=function(){return{prefixCls:String,routes:{type:Array},params:X.any,separator:X.any,itemRender:{type:Function}}};function At(r,o){if(!r.breadcrumbName)return null;var k=Object.keys(o).join("|"),u=r.breadcrumbName.replace(new RegExp(":(".concat(k,")"),"g"),function(d,g){return o[g]||d});return u}function ge(r){var o=r.route,k=r.params,u=r.routes,d=r.paths,g=u.indexOf(o)===u.length-1,_=At(o,k);return g?a("span",null,[_]):a("a",{href:"#/".concat(d.join("/"))},[_])}const V=K({compatConfig:{MODE:3},name:"ABreadcrumb",props:$t(),slots:["separator","itemRender"],setup:function(o,k){var u=k.slots,d=re("breadcrumb",o),g=d.prefixCls,_=d.direction,v=function(s,b){return s=(s||"").replace(/^\//,""),Object.keys(b).forEach(function(f){s=s.replace(":".concat(f),b[f])}),s},w=function(s,b,f){var m=Ge(s),S=v(b||"",f);return S&&m.push(S),m},h=function(s){var b=s.routes,f=b===void 0?[]:b,m=s.params,S=m===void 0?{}:m,E=s.separator,P=s.itemRender,B=P===void 0?ge:P,O=[];return f.map(function(I){var M=v(I.path,S);M&&O.push(M);var N=[].concat(O),T=null;return I.children&&I.children.length&&(T=a(ne,null,{default:function(){return[I.children.map(function(D){return a(ne.Item,{key:D.path||D.breadcrumbName},{default:function(){return[B({route:D,params:S,routes:f,paths:w(N,D.path,S)})]}})})]}})),a(q,{overlay:T,separator:E,key:M||I.breadcrumbName},{default:function(){return[B({route:I,params:S,routes:f,paths:N})]}})})};return function(){var l,s,b,f=o.routes,m=o.params,S=m===void 0?{}:m,E=we(U(u,o)),P=(l=U(u,o,"separator"))!==null&&l!==void 0?l:"/",B=o.itemRender||u.itemRender||ge;f&&f.length>0?b=h({routes:f,params:S,separator:P,itemRender:B}):E.length&&(b=E.map(function(I,M){return Le(qe(I.type)==="object"&&(I.type.__ANT_BREADCRUMB_ITEM||I.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),Ke(I,{separator:P,key:M})}));var O=(s={},_e(s,g.value,!0),_e(s,"".concat(g.value,"-rtl"),_.value==="rtl"),s);return a("div",{class:O},[b])}}});var Rt=["separator","class"],Bt=function(){return{prefixCls:String}};const oe=K({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:Bt(),setup:function(o,k){var u=k.slots,d=k.attrs,g=re("breadcrumb",o),_=g.prefixCls;return function(){var v;d.separator;var w=d.class,h=Ce(d,Rt),l=we((v=u.default)===null||v===void 0?void 0:v.call(u));return a("span",te({class:["".concat(_.value,"-separator"),w]},h),[l.length>0?l:"/"])}}});V.Item=q;V.Separator=oe;V.install=function(r){return r.component(V.name,V),r.component(q.name,q),r.component(oe.name,oe),r};R.useInjectFormItemContext=Qe;R.ItemRest=ae;R.install=function(r){return r.component(R.name,R),r.component(R.Item.name,R.Item),r.component(ae.name,ae),r};L.setDefaultIndicator=dt;L.install=function(r){return r.component(L.name,L),r};const Nt=K({__name:"folderNavigator",props:{loc:{}},emits:["to"],setup(r,{emit:o}){const k=r,u=He(()=>k.loc),d=We(!1),g=()=>{d.value=!1,o("to",u.value)};return(_,v)=>{const w=Je,h=he;return C(),A(J,null,[a(h,{visible:d.value,"onUpdate:visible":v[1]||(v[1]=l=>d.value=l),title:_.$t("inputAddressAndPressEnter"),onOk:g},{default:i(()=>[a(w,{onPressEnter:g,value:e(u),"onUpdate:value":v[0]||(v[0]=l=>z(u)?u.value=l:null),style:{width:"100%"},"allow-clear":""},null,8,["value"])]),_:1},8,["visible","title"]),c("a",{onClick:v[2]||(v[2]=l=>d.value=!0)},y(_.$t("go")),1)],64)}}}),Dt={class:"hint"},Ft={class:"location-bar"},Et={class:"breadcrumb"},Ot=["onClick"],Tt={class:"actions"},jt=["onClick"],zt={style:{width:"512px",background:"var(--zp-primary-background)",padding:"16px","border-radius":"4px","box-shadow":"0 0 4px var(--zp-secondary-background)",border:"1px solid var(--zp-secondary-background)"}},Vt={style:{padding:"4px"}},Ut={style:{padding:"4px"}},Lt={style:{padding:"4px"}},qt={style:{padding:"4px"}},Kt={key:0,class:"view"},Gt={key:0,class:"preview-switch"},Qt=K({__name:"stackView",props:{tabIdx:{},paneIdx:{},path:{},walkModePath:{},stackKey:{}},setup(r){const o=r,k=Xe(),{scroller:u,stackViewEl:d,props:g,multiSelectedIdxs:_,spinning:v}=ct().toRefs(),{currLocation:w,currPage:h,refresh:l,copyLocation:s,back:b,openNext:f,stack:m,to:S,quickMoveTo:E,addToSearchScanPathAndQuickMove:P,searchPathInfo:B}=pt(o),{gridItems:O,sortMethodConv:I,moreActionsDropdownShow:M,sortedFiles:N,sortMethod:T,viewMode:j,viewModeMap:D,itemSize:Y,loadNextDir:xe,loadNextDirLoading:Se,canLoadNext:Pe,onScroll:Me}=mt(o),{onDrop:$e,onFileDragStart:Ae}=vt(),{onFileItemClick:Re,onContextMenuClick:se,showGenInfo:G,imageGenInfo:le,q:Be}=ft(o,{openNext:f}),{previewIdx:Q,onPreviewVisibleChange:Ne,previewing:ie,previewImgMove:ue,canPreview:de}=_t(o),{showMenuIdx:Z}=bt();return Ye(()=>o,()=>{g.value=o;const p=kt.get(o.stackKey??"");p&&(m.value=p.slice())},{immediate:!0}),(p,t)=>{const De=ot,Fe=rt,Ee=he,ce=q,pe=V,Oe=st,Te=lt,je=ne,me=Ie,ve=St,ze=R,Ve=it,Ue=L;return C(),F(Ue,{spinning:e(v),size:"large"},{default:i(()=>[a(De,{style:{display:"none"}}),c("div",{ref_key:"stackViewEl",ref:d,onDragover:t[18]||(t[18]=x(()=>{},["prevent"])),onDrop:t[19]||(t[19]=x(n=>e($e)(n),["prevent"])),class:"container"},[a(Ee,{visible:e(G),"onUpdate:visible":t[1]||(t[1]=n=>z(G)?G.value=n:null),width:"70vw","mask-closable":"",onOk:t[2]||(t[2]=n=>G.value=!1)},{cancelText:i(()=>[]),default:i(()=>[a(Fe,{active:"",loading:!e(Be).isIdle},{default:i(()=>[c("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto","z-index":"9999"},onDblclick:t[0]||(t[0]=n=>e(Ze)(e(le)))},[c("div",Dt,y(p.$t("doubleClickToCopy")),1),H(" "+y(e(le)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),c("div",Ft,[c("div",Et,[o.walkModePath?(C(),F(Oe,{key:0},{title:i(()=>[H(y(p.$t("walk-mode-move-message")),1)]),default:i(()=>[a(pe,{style:{flex:"1"}},{default:i(()=>[(C(!0),A(J,null,ee(e(m),(n,$)=>(C(),F(ce,{key:$},{default:i(()=>[c("span",null,y(n.curr==="/"?p.$t("root"):n.curr.replace(/:\/$/,p.$t("drive"))),1)]),_:2},1024))),128))]),_:1})]),_:1})):(C(),F(pe,{key:1,style:{flex:"1"}},{default:i(()=>[(C(!0),A(J,null,ee(e(m),(n,$)=>(C(),F(ce,{key:$},{default:i(()=>[c("a",{onClick:x(fe=>e(b)($),["prevent"])},y(n.curr==="/"?p.$t("root"):n.curr.replace(/:\/$/,p.$t("drive"))),9,Ot)]),_:2},1024))),128))]),_:1}))]),c("div",Tt,[c("a",{class:"opt",onClick:t[3]||(t[3]=x((...n)=>e(l)&&e(l)(...n),["prevent"]))},y(p.$t("refresh")),1),a(me,null,{overlay:i(()=>[a(je,null,{default:i(()=>[(C(!0),A(J,null,ee(e(k).quickMovePaths,n=>(C(),F(Te,{key:n.dir},{default:i(()=>[c("a",{onClick:x($=>e(E)(n.dir),["prevent"])},y(n.zh),9,jt)]),_:2},1024))),128))]),_:1})]),default:i(()=>[c("a",{class:"opt",onClick:t[4]||(t[4]=x(()=>{},["prevent"]))},[H(y(p.$t("quickMove"))+" ",1),a(e(ye))])]),_:1}),a(me,{trigger:["click"],visible:e(M),"onUpdate:visible":t[14]||(t[14]=n=>z(M)?M.value=n:null),placement:"bottomLeft",getPopupContainer:n=>n.parentNode},{overlay:i(()=>[c("div",zt,[a(ze,et(tt({labelCol:{span:6},wrapperCol:{span:18}})),{default:i(()=>[a(ve,{label:p.$t("viewMode")},{default:i(()=>[a(e(be),{value:e(j),"onUpdate:value":t[6]||(t[6]=n=>z(j)?j.value=n:null),onClick:t[7]||(t[7]=x(()=>{},["stop"])),conv:{value:n=>n,text:n=>e(D)[n]},options:Object.keys(e(D))},null,8,["value","conv","options"])]),_:1},8,["label"]),a(ve,{label:p.$t("sortingMethod")},{default:i(()=>[a(e(be),{value:e(T),"onUpdate:value":t[8]||(t[8]=n=>z(T)?T.value=n:null),onClick:t[9]||(t[9]=x(()=>{},["stop"])),conv:e(I),options:Object.keys(e(gt))},null,8,["value","conv","options"])]),_:1},8,["label"]),c("div",Vt,[c("a",{onClick:t[10]||(t[10]=x((...n)=>e(s)&&e(s)(...n),["prevent"]))},y(p.$t("copyPath")),1)]),c("div",Ut,[a(Nt,{loc:e(w),onTo:e(S)},null,8,["loc","onTo"])]),c("div",Lt,[e(B)?e(B).can_delete?(C(),A("a",{key:1,onClick:t[12]||(t[12]=x((...n)=>e(P)&&e(P)(...n),["prevent"]))},y(p.$t("removeFromSearchScanPathAndQuickMove")),1)):W("",!0):(C(),A("a",{key:0,onClick:t[11]||(t[11]=x((...n)=>e(P)&&e(P)(...n),["prevent"]))},y(p.$t("addToSearchScanPathAndQuickMove")),1))]),c("div",qt,[c("a",{onClick:t[13]||(t[13]=x(n=>e(nt)(e(w)+"/"),["prevent"]))},y(p.$t("openWithLocalFileBrowser")),1)])]),_:1},16)])]),default:i(()=>[c("a",{class:"opt",onClick:t[5]||(t[5]=x(()=>{},["prevent"]))},y(p.$t("more")),1)]),_:1},8,["visible","getPopupContainer"])])]),e(h)?(C(),A("div",Kt,[a(e(Ct),{class:"file-list",items:e(N),ref_key:"scroller",ref:u,onScroll:e(Me),"item-size":e(Y).first,"key-field":"fullpath","item-secondary-size":e(Y).second,gridItems:e(O)},at({default:i(({item:n,index:$})=>[a(yt,{idx:$,file:n,"full-screen-preview-image-url":e(N)[e(Q)]?e(wt)(e(N)[e(Q)]):"","show-menu-idx":e(Z),"onUpdate:showMenuIdx":t[15]||(t[15]=fe=>z(Z)?Z.value=fe:null),selected:e(_).includes($),"view-mode":e(j),onFileItemClick:e(Re),onDragstart:e(Ae),onPreviewVisibleChange:e(Ne),onContextMenuClick:e(se)},null,8,["idx","file","full-screen-preview-image-url","show-menu-idx","selected","view-mode","onFileItemClick","onDragstart","onPreviewVisibleChange","onContextMenuClick"])]),_:2},[o.walkModePath?{name:"after",fn:i(()=>[a(Ve,{onClick:e(xe),loading:e(Se),block:"",type:"primary",disabled:!e(Pe),ghost:""},{default:i(()=>[H(y(p.$t("loadNextPage")),1)]),_:1},8,["onClick","loading","disabled"])]),key:"0"}:void 0]),1032,["items","onScroll","item-size","item-secondary-size","gridItems"]),e(ie)?(C(),A("div",Gt,[a(e(ht),{onClick:t[16]||(t[16]=n=>e(ue)("prev")),class:ke({disable:!e(de)("prev")})},null,8,["class"]),a(e(It),{onClick:t[17]||(t[17]=n=>e(ue)("next")),class:ke({disable:!e(de)("next")})},null,8,["class"])])):W("",!0)])):W("",!0)],544),e(ie)?(C(),F(xt,{key:0,file:e(N)[e(Q)],idx:e(Q),onContextMenuClick:e(se)},null,8,["file","idx","onContextMenuClick"])):W("",!0)]),_:1},8,["spinning"])}}});const nn=ut(Qt,[["__scopeId","data-v-a3f5bdd4"]]);export{nn as default};
