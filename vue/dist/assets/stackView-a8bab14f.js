import{d as H,u as ke,g as q,_ as Oe,c as r,a as de,P as te,D as ce,f as Te,w as gt,b as bt,e as Ct,h as Re,M as pe,i as _t,j as yt,F as me,A as ht,o as k,k as $,l as s,m as L,t as m,n as fe,p as D,q as Le,r as wt,s as St,v as xe,x as B,y as i,z as e,B as p,C as F,E as It,G as At,H as Me,I as $t,J as Pt,K as Rt,S as xt,L as Mt,N as Bt,O as Ft,Q as Be,R as Dt,T as Nt,U as Ot,V as Tt,W as Lt,X as Et}from"./index-199f8388.js";import{S as Vt}from"./index-7e51dac4.js";import{F as N,_ as zt}from"./index-c8d0a710.js";import"./index-7522e103.js";import"./index-35375b6a.js";import{_ as jt}from"./index-6905bc51.js";import{_ as Ut}from"./shortcut-61d236ef.js";import{D as Ee}from"./index-15b4c137.js";/* empty css              */import"./index-6dc5f88c.js";/* empty css              */import{u as Wt,a as Gt,b as qt,c as Kt,d as Ht,e as Qt,f as Jt,g as Xt,h as Yt,s as Zt,o as Fe}from"./index-ea810700.js";import{s as en,F as tn}from"./FileItem-cdbc027c.js";import{M as nn,L as on,R as rn,f as an}from"./MultiSelectKeep-634cf4db.js";import"./isArrayLikeObject-49824137.js";import"./index-3f517ea8.js";import"./_isIterateeCall-bed55584.js";import"./index-23736bbf.js";var ln=["class","style"],sn=function(){return{prefixCls:String,href:String,separator:te.any,overlay:te.any,onClick:Function}};const K=H({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:sn(),slots:["separator","overlay"],setup:function(o,u){var c=u.slots,f=u.attrs,h=ke("breadcrumb",o),C=h.prefixCls,I=function(w,v){var d=q(c,o,"overlay");return d?r(Ee,{overlay:d,placement:"bottom"},{default:function(){return[r("span",{class:"".concat(v,"-overlay-link")},[w,r(ce,null,null)])]}}):w};return function(){var A,w=(A=q(c,o,"separator"))!==null&&A!==void 0?A:"/",v=q(c,o),d=f.class,_=f.style,g=Oe(f,ln),b;return o.href!==void 0?b=r("a",de({class:"".concat(C.value,"-link"),onClick:o.onClick},g),[v]):b=r("span",de({class:"".concat(C.value,"-link"),onClick:o.onClick},g),[v]),b=I(b,C.value),v?r("span",{class:d,style:_},[b,w&&r("span",{class:"".concat(C.value,"-separator")},[w])]):null}}});var un=function(){return{prefixCls:String,routes:{type:Array},params:te.any,separator:te.any,itemRender:{type:Function}}};function dn(a,o){if(!a.breadcrumbName)return null;var u=Object.keys(o).join("|"),c=a.breadcrumbName.replace(new RegExp(":(".concat(u,")"),"g"),function(f,h){return o[h]||f});return c}function De(a){var o=a.route,u=a.params,c=a.routes,f=a.paths,h=c.indexOf(o)===c.length-1,C=dn(o,u);return h?r("span",null,[C]):r("a",{href:"#/".concat(f.join("/"))},[C])}const z=H({compatConfig:{MODE:3},name:"ABreadcrumb",props:un(),slots:["separator","itemRender"],setup:function(o,u){var c=u.slots,f=ke("breadcrumb",o),h=f.prefixCls,C=f.direction,I=function(d,_){return d=(d||"").replace(/^\//,""),Object.keys(_).forEach(function(g){d=d.replace(":".concat(g),_[g])}),d},A=function(d,_,g){var b=_t(d),S=I(_||"",g);return S&&b.push(S),b},w=function(d){var _=d.routes,g=_===void 0?[]:_,b=d.params,S=b===void 0?{}:b,O=d.separator,P=d.itemRender,R=P===void 0?De:P,T=[];return g.map(function(y){var x=I(y.path,S);x&&T.push(x);var j=[].concat(T),U=null;return y.children&&y.children.length&&(U=r(pe,null,{default:function(){return[y.children.map(function(E){return r(pe.Item,{key:E.path||E.breadcrumbName},{default:function(){return[R({route:E,params:S,routes:g,paths:A(j,E.path,S)})]}})})]}})),r(K,{overlay:U,separator:O,key:x||y.breadcrumbName},{default:function(){return[R({route:y,params:S,routes:g,paths:j})]}})})};return function(){var v,d,_,g=o.routes,b=o.params,S=b===void 0?{}:b,O=Te(q(c,o)),P=(v=q(c,o,"separator"))!==null&&v!==void 0?v:"/",R=o.itemRender||c.itemRender||De;g&&g.length>0?_=w({routes:g,params:S,separator:P,itemRender:R}):O.length&&(_=O.map(function(y,x){return gt(bt(y.type)==="object"&&(y.type.__ANT_BREADCRUMB_ITEM||y.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),Ct(y,{separator:P,key:x})}));var T=(d={},Re(d,h.value,!0),Re(d,"".concat(h.value,"-rtl"),C.value==="rtl"),d);return r("div",{class:T},[_])}}});var cn=["separator","class"],pn=function(){return{prefixCls:String}};const ve=H({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:pn(),setup:function(o,u){var c=u.slots,f=u.attrs,h=ke("breadcrumb",o),C=h.prefixCls;return function(){var I;f.separator;var A=f.class,w=Oe(f,cn),v=Te((I=c.default)===null||I===void 0?void 0:I.call(c));return r("span",de({class:["".concat(C.value,"-separator"),A]},w),[v.length>0?v:"/"])}}});z.Item=K;z.Separator=ve;z.install=function(a){return a.component(z.name,z),a.component(K.name,K),a.component(ve.name,ve),a};N.useInjectFormItemContext=yt;N.ItemRest=me;N.install=function(a){return a.component(N.name,N),a.component(N.Item.name,N.Item),a.component(me.name,me),a};var mn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};const fn=mn;function Ne(a){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?Object(arguments[o]):{},c=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(u).filter(function(f){return Object.getOwnPropertyDescriptor(u,f).enumerable}))),c.forEach(function(f){vn(a,f,u[f])})}return a}function vn(a,o,u){return o in a?Object.defineProperty(a,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[o]=u,a}var ge=function(o,u){var c=Ne({},o,u.attrs);return r(ht,Ne({},c,{icon:fn}),null)};ge.displayName="ArrowLeftOutlined";ge.inheritAttrs=!1;const kn=ge;const gn={class:"base-info"},bn=H({__name:"BaseFileListInfo",props:{fileNum:{},selectedFileNum:{}},setup(a){return(o,u)=>(k(),$("div",gn,[s("span",null,[L(m(o.$t("items",[o.fileNum]))+" ",1),o.selectedFileNum?(k(),$(fe,{key:0},[L(", "+m(o.$t("selectedItems",[o.selectedFileNum])),1)],64)):D("",!0)])]))}});const Cn=Le(bn,[["__scopeId","data-v-afd25667"]]),_n={class:"hint"},yn={class:"location-bar"},hn=["onClick"],wn={key:3,class:"location-act"},Sn={class:"actions"},In=["onClick"],An=["onClick"],$n={style:{width:"512px",background:"var(--zp-primary-background)",padding:"16px","border-radius":"4px","box-shadow":"0 0 4px var(--zp-secondary-background)",border:"1px solid var(--zp-secondary-background)"}},Pn={style:{padding:"4px"}},Rn={style:{padding:"4px"}},xn={style:{padding:"4px"}},Mn={key:0,class:"view"},Bn={style:{padding:"16px 0 512px"}},Fn={key:0,class:"preview-switch"},Dn=H({__name:"stackView",props:{tabIdx:{},paneIdx:{},path:{},mode:{},stackKey:{}},setup(a){const o=a,u=wt(),{scroller:c,stackViewEl:f,props:h,multiSelectedIdxs:C,spinning:I}=Wt().toRefs();c.value,f.value;const{currLocation:A,currPage:w,refresh:v,copyLocation:d,back:_,openNext:g,stack:b,quickMoveTo:S,addToSearchScanPathAndQuickMove:O,locInputValue:P,isLocationEditing:R,onLocEditEnter:T,onEditBtnClick:y,share:x,selectAll:j,onCreateFloderBtnClick:U,onWalkBtnClick:Q,showWalkButton:E,searchInCurrentDir:ne,backToLastUseTo:be,polling:Ve,onPollRefreshClick:Ce}=Gt(),{gridItems:ze,sortMethodConv:je,moreActionsDropdownShow:oe,sortedFiles:M,sortMethod:re,itemSize:_e,loadNextDir:Ue,loadNextDirLoading:We,canLoadNext:Ge,onScroll:qe,cellWidth:J,dirCoverCache:Ke}=qt(),{onDrop:He,onFileDragStart:Qe,onFileDragEnd:Je}=Kt(),{onFileItemClick:Xe,onContextMenuClick:ye,showGenInfo:X,imageGenInfo:he,q:Ye}=Ht({openNext:g}),{previewIdx:W,onPreviewVisibleChange:Ze,previewing:ae,previewImgMove:we,canPreview:Se,scrollToFileId:et}=Qt(),Ie=St(),{showMenuIdx:le}=Jt(),{onClearAllSelected:tt,onReverseSelect:nt,onSelectAll:ot}=Xt(),{getGenDiff:rt,changeIndchecked:G,seedChangeChecked:Y,getRawGenParams:at,getGenDiffWatchDep:lt}=Yt(),st=()=>{M.value.length!==0&&Fe(M.value,W.value||0)};return xe(()=>o,()=>{h.value=o;const l=Zt.get(o.stackKey??"");l&&(b.value=l.slice())},{immediate:!0}),xe(()=>Ie.visible,(l,t)=>{if(!l&&t){const Z=Ie.lastActiveId;Z&&et(Z)}}),(l,t)=>{const Z=Dt,it=Nt,ut=Ot,dt=Tt,ct=K,pt=z,Ae=Lt,se=Et,$e=pe,ie=Ee,mt=Ut,ee=zt,Pe=jt,ft=N,vt=Vt;return k(),B(vt,{spinning:e(I),size:"large"},{default:i(()=>[r(nn,{show:e(u).keepMultiSelect||!!e(C).length,onClearAllSelected:e(tt),onSelectAll:e(ot),onReverseSelect:e(nt)},null,8,["show","onClearAllSelected","onSelectAll","onReverseSelect"]),r(Z,{style:{display:"none"}}),s("div",{ref_key:"stackViewEl",ref:f,onDragover:t[31]||(t[31]=p(()=>{},["prevent"])),onDrop:t[32]||(t[32]=p(n=>e(He)(n),["prevent"])),class:"container"},[r(ut,{visible:e(X),"onUpdate:visible":t[1]||(t[1]=n=>F(X)?X.value=n:null),width:"70vw","mask-closable":"",onOk:t[2]||(t[2]=n=>X.value=!1)},{cancelText:i(()=>[]),default:i(()=>[r(it,{active:"",loading:!e(Ye).isIdle},{default:i(()=>[s("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto","z-index":"9999"},onDblclick:t[0]||(t[0]=n=>e(It)(e(he)))},[s("div",_n,m(l.$t("doubleClickToCopy")),1),L(" "+m(e(he)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),s("div",yn,[s("div",{class:"breadcrumb",style:At({flex:e(R)?1:""})},[e(R)?(k(),B(dt,{key:0,style:{flex:"1"},value:e(P),"onUpdate:value":t[3]||(t[3]=n=>F(P)?P.value=n:null),onClick:t[4]||(t[4]=p(()=>{},["stop"])),onKeydown:t[5]||(t[5]=p(()=>{},["stop"])),onPressEnter:e(T),"allow-clear":""},null,8,["value","onPressEnter"])):(k(),B(pt,{key:1,style:{flex:"1"}},{default:i(()=>[(k(!0),$(fe,null,Me(e(b),(n,V)=>(k(),B(ct,{key:V},{default:i(()=>[s("a",{onClick:p(ue=>e(_)(V),["prevent"])},m(n.curr==="/"?l.$t("root"):n.curr.replace(/:\/$/,l.$t("drive"))),9,hn)]),_:2},1024))),128))]),_:1})),e(R)?(k(),B(Ae,{key:2,size:"small",onClick:e(T),type:"primary"},{default:i(()=>[L(m(l.$t("go")),1)]),_:1},8,["onClick"])):(k(),$("div",wn,[l.mode==="scanned-fixed"?(k(),$("a",{key:0,onClick:t[6]||(t[6]=p((...n)=>e(be)&&e(be)(...n),["prevent"])),style:{margin:"0 8px 16px 0"}},[r(e(kn))])):D("",!0),s("a",{onClick:t[7]||(t[7]=p((...n)=>e(d)&&e(d)(...n),["prevent"])),class:"copy"},m(l.$t("copy")),1),s("a",{onClick:t[8]||(t[8]=p((...n)=>e(y)&&e(y)(...n),["prevent","stop"]))},m(l.$t("edit")),1)]))],4),s("div",Sn,[s("a",{class:"opt",onClick:t[9]||(t[9]=p((...n)=>e(v)&&e(v)(...n),["prevent"]))},m(l.$t("refresh")),1),s("a",{class:"opt",onClick:t[10]||(t[10]=p((...n)=>e(Ce)&&e(Ce)(...n),["prevent"]))},m(e(Ve)?l.$t("stopPollRefresh"):l.$t("pollRefresh")),1),s("a",{class:"opt",onClick:p(st,["prevent"])},m(l.$t("TikTok View")),9,In),r(ie,null,{overlay:i(()=>[r($e,null,{default:i(()=>[r(se,{key:"tag-search"},{default:i(()=>[s("a",{onClick:t[12]||(t[12]=p(n=>e(ne)("tag-search"),["prevent"]))},m(l.$t("imgSearch")),1)]),_:1}),r(se,{key:"tag-search"},{default:i(()=>[s("a",{onClick:t[13]||(t[13]=p(n=>e(ne)("fuzzy-search"),["prevent"]))},m(l.$t("fuzzy-search")),1)]),_:1})]),_:1})]),default:i(()=>[s("a",{class:"opt",onClick:t[11]||(t[11]=p(()=>{},["prevent"]))},[L(m(l.$t("search"))+" ",1),r(e(ce))])]),_:1}),e(E)?(k(),$("a",{key:0,class:"opt",onClick:t[14]||(t[14]=p((...n)=>e(Q)&&e(Q)(...n),["prevent"]))}," Walk ")):D("",!0),s("a",{class:"opt",onClick:t[15]||(t[15]=p((...n)=>e(j)&&e(j)(...n),["prevent","stop"]))},m(l.$t("selectAll")),1),e($t)?D("",!0):(k(),$("a",{key:1,class:"opt",onClick:t[16]||(t[16]=p((...n)=>e(x)&&e(x)(...n),["prevent"]))},m(l.$t("share")),1)),r(ie,null,{overlay:i(()=>[r($e,null,{default:i(()=>[(k(!0),$(fe,null,Me(e(u).quickMovePaths,n=>(k(),B(se,{key:n.dir},{default:i(()=>[s("a",{onClick:p(V=>e(S)(n.dir),["prevent"])},m(n.zh),9,An)]),_:2},1024))),128))]),_:1})]),default:i(()=>[s("a",{class:"opt",onClick:t[17]||(t[17]=p(()=>{},["prevent"]))},[L(m(l.$t("quickMove"))+" ",1),r(e(ce))])]),_:1}),r(ie,{trigger:["click"],visible:e(oe),"onUpdate:visible":t[27]||(t[27]=n=>F(oe)?oe.value=n:null),placement:"bottomLeft",getPopupContainer:n=>n.parentNode},{overlay:i(()=>[s("div",$n,[r(ft,Pt(Rt({labelCol:{span:10},wrapperCol:{span:14}})),{default:i(()=>[r(ee,{label:l.$t("gridCellWidth")},{default:i(()=>[r(mt,{modelValue:e(J),"onUpdate:modelValue":t[19]||(t[19]=n=>F(J)?J.value=n:null),max:1024,min:64,step:16},null,8,["modelValue"])]),_:1},8,["label"]),r(ee,{label:l.$t("sortingMethod")},{default:i(()=>[r(e(xt),{value:e(re),"onUpdate:value":t[20]||(t[20]=n=>F(re)?re.value=n:null),onClick:t[21]||(t[21]=p(()=>{},["stop"])),conv:e(je),options:e(Mt)},null,8,["value","conv","options"])]),_:1},8,["label"]),r(ee,{label:l.$t("showChangeIndicators")},{default:i(()=>[r(Pe,{checked:e(G),"onUpdate:checked":t[22]||(t[22]=n=>F(G)?G.value=n:null),onClick:e(at)},null,8,["checked","onClick"])]),_:1},8,["label"]),r(ee,{label:l.$t("seedAsChange")},{default:i(()=>[r(Pe,{checked:e(Y),"onUpdate:checked":t[23]||(t[23]=n=>F(Y)?Y.value=n:null),disabled:!e(G)},null,8,["checked","disabled"])]),_:1},8,["label"]),s("div",Pn,[s("a",{onClick:t[24]||(t[24]=p((...n)=>e(O)&&e(O)(...n),["prevent"]))},m(l.$t("addToSearchScanPathAndQuickMove")),1)]),s("div",Rn,[s("a",{onClick:t[25]||(t[25]=p(n=>e(Bt)(e(A)+"/"),["prevent"]))},m(l.$t("openWithLocalFileBrowser")),1)]),s("div",xn,[s("a",{onClick:t[26]||(t[26]=p((...n)=>e(U)&&e(U)(...n),["prevent"]))},m(l.$t("createFolder")),1)])]),_:1},16)])]),default:i(()=>[s("a",{class:"opt",onClick:t[18]||(t[18]=p(()=>{},["prevent"]))},m(l.$t("more")),1)]),_:1},8,["visible","getPopupContainer"])])]),e(w)?(k(),$("div",Mn,[r(e(en),{class:"file-list",items:e(M),ref_key:"scroller",ref:c,onScroll:e(qe),"item-size":e(_e).first,"key-field":"fullpath","item-secondary-size":e(_e).second,gridItems:e(ze)},{default:i(({item:n,index:V})=>[r(tn,{idx:parseInt(V),file:n,"full-screen-preview-image-url":e(M)[e(W)]?e(Ft)(e(M)[e(W)]):"","show-menu-idx":e(le),"onUpdate:showMenuIdx":t[28]||(t[28]=ue=>F(le)?le.value=ue:null),selected:e(C).includes(V),"cell-width":e(J),onFileItemClick:e(Xe),onDragstart:e(Qe),onDragend:e(Je),onPreviewVisibleChange:e(Ze),onContextMenuClick:e(ye),onTiktokView:(ue,kt)=>e(Fe)(e(M),kt),"is-selected-mutil-files":e(C).length>1,"enable-change-indicator":e(G),"seed-change-checked":e(Y),"get-gen-diff":e(rt),"get-gen-diff-watch-dep":e(lt),previewing:e(ae),"cover-files":e(Ke).get(n.fullpath)},null,8,["idx","file","full-screen-preview-image-url","show-menu-idx","selected","cell-width","onFileItemClick","onDragstart","onDragend","onPreviewVisibleChange","onContextMenuClick","onTiktokView","is-selected-mutil-files","enable-change-indicator","seed-change-checked","get-gen-diff","get-gen-diff-watch-dep","previewing","cover-files"])]),after:i(()=>[s("div",Bn,[o.mode==="walk"?(k(),B(Ae,{key:0,onClick:e(Ue),loading:e(We),block:"",type:"primary",disabled:!e(Ge),ghost:""},{default:i(()=>[L(m(l.$t("loadNextPage")),1)]),_:1},8,["onClick","loading","disabled"])):D("",!0)])]),_:1},8,["items","onScroll","item-size","item-secondary-size","gridItems"]),e(ae)?(k(),$("div",Fn,[r(e(on),{onClick:t[29]||(t[29]=n=>e(we)("prev")),class:Be({disable:!e(Se)("prev")})},null,8,["class"]),r(e(rn),{onClick:t[30]||(t[30]=n=>e(we)("next")),class:Be({disable:!e(Se)("next")})},null,8,["class"])])):D("",!0)])):D("",!0)],544),e(ae)?(k(),B(an,{key:0,file:e(M)[e(W)],idx:e(W),onContextMenuClick:e(ye)},null,8,["file","idx","onContextMenuClick"])):D("",!0),r(Cn,{"file-num":e(M).length,"selected-file-num":e(C).length},null,8,["file-num","selected-file-num"])]),_:1},8,["spinning"])}}});const Zn=Le(Dn,[["__scopeId","data-v-9de65cf0"]]);export{Zn as default};
