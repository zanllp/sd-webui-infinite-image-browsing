var vt=Object.defineProperty;var mt=(i,t,e)=>t in i?vt(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var ue=(i,t,e)=>(mt(i,typeof t!="symbol"?t+"":t,e),e);import{d as X,u as Ye,B as V,ak as qe,h as K,c as S,an as yt,cO as bt,r as j,b9 as At,U as H,cD as St,P as ze,bY as kt,A as W,ca as _t,aV as It,cP as Ct,cQ as wt,cR as ce,H as ge,ai as ke,bc as Et,cn as Tt,cS as Pt,cT as Ot,cN as Dt,cU as Nt,cV as Ge,cW as le,cX as zt,aE as $t,cY as Qt,cZ as Mt,l as pe,k as re,aM as Bt,n as Ze,X as _e,cq as Xe,aG as Ft,c_ as et,c$ as Rt,I as Lt,q as jt,aK as tt,aL as nt,aw as it,O as a,Y as F,d0 as Ht,d1 as Vt,d2 as xt,d3 as Ut,d4 as Jt,aq as Wt,Q as h,aD as ee,V as A,Z as _,a3 as J,d5 as $e,bO as Kt,d6 as Yt,a2 as rt,ab as Y,S as I,T as y,$ as M,ah as st,cv as qt,cu as Gt,M as ot,R as u,W as lt,cp as Zt,d7 as Qe,aa as Xt,d8 as en,cs as tn,K as nn,d9 as rn,da as de,db as sn}from"./index-1961a2a7.js";import{g as on,e as Me,f as ln}from"./functionalCallableComp-0536b145.js";import{D as G,a as ve}from"./index-8dbf40be.js";/* empty css              */var an=function(){return{prefixCls:String,checked:{type:Boolean,default:void 0},onChange:{type:Function},onClick:{type:Function},"onUpdate:checked":Function}},un=X({compatConfig:{MODE:3},name:"ACheckableTag",props:an(),setup:function(t,e){var n=e.slots,r=e.emit,o=Ye("tag",t),p=o.prefixCls,d=function(E){var w=t.checked;r("update:checked",!w),r("change",!w),r("click",E)},v=V(function(){var b;return qe(p.value,(b={},K(b,"".concat(p.value,"-checkable"),!0),K(b,"".concat(p.value,"-checkable-checked"),t.checked),b))});return function(){var b;return S("span",{class:v.value,onClick:d},[(b=n.default)===null||b===void 0?void 0:b.call(n)])}}});const me=un;var cn=new RegExp("^(".concat(yt.join("|"),")(-inverse)?$")),dn=new RegExp("^(".concat(bt.join("|"),")$")),fn=function(){return{prefixCls:String,color:{type:String},closable:{type:Boolean,default:!1},closeIcon:ze.any,visible:{type:Boolean,default:void 0},onClose:{type:Function},"onUpdate:visible":Function,icon:ze.any}},Z=X({compatConfig:{MODE:3},name:"ATag",props:fn(),slots:["closeIcon","icon"],setup:function(t,e){var n=e.slots,r=e.emit,o=e.attrs,p=Ye("tag",t),d=p.prefixCls,v=p.direction,b=j(!0);At(function(){t.visible!==void 0&&(b.value=t.visible)});var E=function(s){s.stopPropagation(),r("update:visible",!1),r("close",s),!s.defaultPrevented&&t.visible===void 0&&(b.value=!1)},w=V(function(){var l=t.color;return l?cn.test(l)||dn.test(l):!1}),T=V(function(){var l;return qe(d.value,(l={},K(l,"".concat(d.value,"-").concat(t.color),w.value),K(l,"".concat(d.value,"-has-color"),t.color&&!w.value),K(l,"".concat(d.value,"-hidden"),!b.value),K(l,"".concat(d.value,"-rtl"),v.value==="rtl"),l))});return function(){var l,s,c,m=t.icon,N=m===void 0?(l=n.icon)===null||l===void 0?void 0:l.call(n):m,O=t.color,z=t.closeIcon,g=z===void 0?(s=n.closeIcon)===null||s===void 0?void 0:s.call(n):z,f=t.closable,C=f===void 0?!1:f,Q=function(){return C?g?S("span",{class:"".concat(d.value,"-close-icon"),onClick:E},[g]):S(kt,{class:"".concat(d.value,"-close-icon"),onClick:E},null):null},B={backgroundColor:O&&!w.value?O:void 0},R=N||null,k=(c=n.default)===null||c===void 0?void 0:c.call(n),L=R?S(H,null,[R,S("span",null,[k])]):k,P="onClick"in o,$=S("span",{class:T.value,style:B},[L,Q()]);return P?S(St,null,{default:function(){return[$]}}):$}}});Z.CheckableTag=me;Z.install=function(i){return i.component(Z.name,Z),i.component(me.name,me),i};const hn=Z;G.Button=ve;G.install=function(i){return i.component(G.name,G),i.component(ve.name,ve),i};var gn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"};const pn=gn;function Be(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){vn(i,r,e[r])})}return i}function vn(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var Ie=function(t,e){var n=Be({},t,e.attrs);return S(W,Be({},n,{icon:pn}),null)};Ie.displayName="StarFilled";Ie.inheritAttrs=!1;const at=Ie;var mn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"};const yn=mn;function Fe(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){bn(i,r,e[r])})}return i}function bn(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var Ce=function(t,e){var n=Fe({},t,e.attrs);return S(W,Fe({},n,{icon:yn}),null)};Ce.displayName="FileOutlined";Ce.inheritAttrs=!1;const An=Ce;var Sn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};const kn=Sn;function Re(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){_n(i,r,e[r])})}return i}function _n(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var we=function(t,e){var n=Re({},t,e.attrs);return S(W,Re({},n,{icon:kn}),null)};we.displayName="FolderOpenOutlined";we.inheritAttrs=!1;const In=we;function Cn(i,t,e){if(!_t(e))return!1;var n=typeof t;return(n=="number"?It(e)&&Ct(t,e.length):n=="string"&&t in e)?wt(e[t],i):!1}function wn(i){return i&&i.length?i[0]:void 0}var En=Math.ceil,Tn=Math.max;function Pn(i,t,e,n){for(var r=-1,o=Tn(En((t-i)/(e||1)),0),p=Array(o);o--;)p[n?o:++r]=i,i+=e;return p}function On(i){return function(t,e,n){return n&&typeof n!="number"&&Cn(t,e,n)&&(e=n=void 0),t=ce(t),e===void 0?(e=t,t=0):e=ce(e),n=n===void 0?t<e?1:-1:ce(n),Pn(t,e,n,i)}}var Dn=On();const Nn=Dn,zn="data:image/png;base64,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",te=new WeakMap;function $n(i,t){return{useHookShareState:n=>{const r=Pt();ge(r),te.has(r)||(te.set(r,ke(i(r,n??(t==null?void 0:t())))),Et(()=>{te.delete(r)}));const o=te.get(r);return ge(o),{state:o,toRefs(){return Tt(o)}}}}}var Qn={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"};const Mn=Qn;function Le(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){Bn(i,r,e[r])})}return i}function Bn(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var Ee=function(t,e){var n=Le({},t,e.attrs);return S(W,Le({},n,{icon:Mn}),null)};Ee.displayName="CaretRightOutlined";Ee.inheritAttrs=!1;const je=Ee;var Fn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9z"}}]},name:"heart",theme:"filled"};const Rn=Fn;function He(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){Ln(i,r,e[r])})}return i}function Ln(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var Te=function(t,e){var n=He({},t,e.attrs);return S(W,He({},n,{icon:Rn}),null)};Te.displayName="HeartFilled";Te.inheritAttrs=!1;const jn=Te;var Hn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]},name:"heart",theme:"outlined"};const Vn=Hn;function Ve(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){xn(i,r,e[r])})}return i}function xn(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var Pe=function(t,e){var n=Ve({},t,e.attrs);return S(W,Ve({},n,{icon:Vn}),null)};Pe.displayName="HeartOutlined";Pe.inheritAttrs=!1;const Un=Pe;var Jn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"};const Wn=Jn;function xe(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){Kn(i,r,e[r])})}return i}function Kn(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var Oe=function(t,e){var n=xe({},t,e.attrs);return S(W,xe({},n,{icon:Wn}),null)};Oe.displayName="StarOutlined";Oe.inheritAttrs=!1;const ut=Oe,Yn="/infinite_image_browsing/fe-static/assets/play-68f5544d.svg",qn=Ot("useBatchDownloadStore",()=>{const i=j([]);return{selectdFiles:i,addFiles:e=>{i.value=Dt([...i.value,...e])}}});class se{constructor(t,e=Nt.CREATED_TIME_DESC){ue(this,"root");ue(this,"execQueue",[]);this.entryPath=t,this.sortMethod=e,this.root={children:[],info:{name:this.entryPath,size:"-",bytes:0,created_time:"",is_under_scanned_path:!0,date:"",type:"dir",fullpath:this.entryPath}},this.fetchChildren(this.root)}reset(){return this.root.children=[],this.fetchChildren(this.root)}get images(){const t=e=>e.children.map(n=>{if(n.info.type==="dir")return t(n);if(le(n.info.name))return n.info}).filter(n=>n).flat(1);return t(this.root)}get isCompleted(){return this.execQueue.length===0}async fetchChildren(t){const{files:e}=await on(t.info.fullpath);return t.children=Ge(e,this.sortMethod).map(n=>({info:n,children:[]})),this.execQueue.shift(),this.execQueue.unshift(...t.children.filter(n=>n.info.type==="dir").map(n=>({fn:()=>this.fetchChildren(n),...n}))),t}async next(){this.root.info.date===""&&(this.root.info=(await Me([this.entryPath]))[this.entryPath]);const t=wn(this.execQueue);if(!t)return null;const e=await t.fn();return this.execQueue=this.execQueue.slice(),this.root={...this.root},e}async isExpired(){const t=[this.root.info],e=r=>{for(const o of r.children)o.info.type==="dir"&&(t.push(o.info),e(o))};e(this.root);const n=await Me(t.map(r=>r.fullpath));for(const r of t)if(JSON.stringify(r)!==JSON.stringify(n[r.fullpath]))return!0;return!1}async seamlessRefresh(t){console.log("seamlessRefresh",t);const e=new se(this.entryPath,this.sortMethod);for(;!e.isCompleted||e.images.length<t;)await e.next();this.root={...e.root},this.execQueue=e.execQueue.slice()}}var ct={exports:{}};/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */(function(i,t){(function(e,n){i.exports=n})(zt,function(){var e={};e.version="0.3.5";var n=e.settings={minimum:.08,easing:"linear",positionUsing:"",speed:200,trickle:!0,trickleSpeed:200,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};e.configure=function(s){var c,m;for(c in s)m=s[c],m!==void 0&&s.hasOwnProperty(c)&&(n[c]=m);return this},e.status=null,e.set=function(s){var c=e.isStarted();s=r(s,n.minimum,1),e.status=s===1?null:s;var m=e.render(!c),N=m.querySelector(n.barSelector),O=n.speed,z=n.easing;return m.offsetWidth,d(function(g){n.positionUsing===""&&(n.positionUsing=e.getPositioningCSS()),v(N,p(s,O,z)),s===1?(v(m,{transition:"none",opacity:1}),m.offsetWidth,setTimeout(function(){v(m,{transition:"all "+O+"ms linear",opacity:0}),setTimeout(function(){e.remove(),g()},O)},O)):setTimeout(g,O)}),this},e.isStarted=function(){return typeof e.status=="number"},e.start=function(){e.status||e.set(0);var s=function(){setTimeout(function(){e.status&&(e.trickle(),s())},n.trickleSpeed)};return n.trickle&&s(),this},e.done=function(s){return!s&&!e.status?this:e.inc(.3+.5*Math.random()).set(1)},e.inc=function(s){var c=e.status;return c?c>1?void 0:(typeof s!="number"&&(c>=0&&c<.2?s=.1:c>=.2&&c<.5?s=.04:c>=.5&&c<.8?s=.02:c>=.8&&c<.99?s=.005:s=0),c=r(c+s,0,.994),e.set(c)):e.start()},e.trickle=function(){return e.inc()},function(){var s=0,c=0;e.promise=function(m){return!m||m.state()==="resolved"?this:(c===0&&e.start(),s++,c++,m.always(function(){c--,c===0?(s=0,e.done()):e.set((s-c)/s)}),this)}}(),e.getElement=function(){var s=e.getParent();if(s){var c=Array.prototype.slice.call(s.querySelectorAll(".nprogress")).filter(function(m){return m.parentElement===s});if(c.length>0)return c[0]}return null},e.getParent=function(){if(n.parent instanceof HTMLElement)return n.parent;if(typeof n.parent=="string")return document.querySelector(n.parent)},e.render=function(s){if(e.isRendered())return e.getElement();E(document.documentElement,"nprogress-busy");var c=document.createElement("div");c.id="nprogress",c.className="nprogress",c.innerHTML=n.template;var m=c.querySelector(n.barSelector),N=s?"-100":o(e.status||0),O=e.getParent(),z;return v(m,{transition:"all 0 linear",transform:"translate3d("+N+"%,0,0)"}),n.showSpinner||(z=c.querySelector(n.spinnerSelector),z&&l(z)),O!=document.body&&E(O,"nprogress-custom-parent"),O.appendChild(c),c},e.remove=function(){e.status=null,w(document.documentElement,"nprogress-busy"),w(e.getParent(),"nprogress-custom-parent");var s=e.getElement();s&&l(s)},e.isRendered=function(){return!!e.getElement()},e.getPositioningCSS=function(){var s=document.body.style,c="WebkitTransform"in s?"Webkit":"MozTransform"in s?"Moz":"msTransform"in s?"ms":"OTransform"in s?"O":"";return c+"Perspective"in s?"translate3d":c+"Transform"in s?"translate":"margin"};function r(s,c,m){return s<c?c:s>m?m:s}function o(s){return(-1+s)*100}function p(s,c,m){var N;return n.positionUsing==="translate3d"?N={transform:"translate3d("+o(s)+"%,0,0)"}:n.positionUsing==="translate"?N={transform:"translate("+o(s)+"%,0)"}:N={"margin-left":o(s)+"%"},N.transition="all "+c+"ms "+m,N}var d=function(){var s=[];function c(){var m=s.shift();m&&m(c)}return function(m){s.push(m),s.length==1&&c()}}(),v=function(){var s=["Webkit","O","Moz","ms"],c={};function m(g){return g.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(f,C){return C.toUpperCase()})}function N(g){var f=document.body.style;if(g in f)return g;for(var C=s.length,Q=g.charAt(0).toUpperCase()+g.slice(1),B;C--;)if(B=s[C]+Q,B in f)return B;return g}function O(g){return g=m(g),c[g]||(c[g]=N(g))}function z(g,f,C){f=O(f),g.style[f]=C}return function(g,f){var C=arguments,Q,B;if(C.length==2)for(Q in f)B=f[Q],B!==void 0&&f.hasOwnProperty(Q)&&z(g,Q,B);else z(g,C[1],C[2])}}();function b(s,c){var m=typeof s=="string"?s:T(s);return m.indexOf(" "+c+" ")>=0}function E(s,c){var m=T(s),N=m+c;b(m,c)||(s.className=N.substring(1))}function w(s,c){var m=T(s),N;b(s,c)&&(N=m.replace(" "+c+" "," "),s.className=N.substring(1,N.length-1))}function T(s){return(" "+(s&&s.className||"")+" ").replace(/\s+/gi," ")}function l(s){s&&s.parentNode&&s.parentNode.removeChild(s)}return e})})(ct);var Gn=ct.exports;const ps=$t(Gn);function vs({fetchNext:i}={}){const{scroller:t,sortedFiles:e,sortMethod:n,currLocation:r,stackViewEl:o,canLoadNext:p,previewIdx:d,props:v,walker:b,getViewableAreaFiles:E}=oe().toRefs(),{state:w}=oe(),T=j(!1),l=j(q.defaultGridCellWidth),s=V(()=>l.value+16),c=44,{width:m}=Qt(o),N=V(()=>~~(m.value/s.value)),O=ke(new Map),z=V(()=>{const R=s.value;return{first:R+(l.value<=160?0:c),second:R}}),g=j(!1),f=async()=>{var R;if(!(g.value||v.value.mode!=="walk"||!p.value))try{g.value=!0,await((R=b.value)==null?void 0:R.next())}finally{g.value=!1}},C=async(R=!1)=>{const k=t.value,L=()=>R?d.value:(k==null?void 0:k.$_endIndex)??0,P=()=>{const $=e.value.length,x=50;return $?i?L()>$-x:L()>$-x&&p.value:!0};for(;P();){await Ze(30);const $=await(i??f)();if(typeof $=="boolean"&&!$)return}};w.useEventListen("loadNextDir",async()=>{await C(),v.value.mode==="walk"&&Q()}),w.useEventListen("viewableAreaFilesChange",()=>{const R=E.value(),k=R.filter(P=>P.is_under_scanned_path&&le(P.name)).map(P=>P.fullpath);Zn.fetchImageTags(k);const L=R.filter(P=>P.is_under_scanned_path&&P.type==="dir"&&!O.has(P.fullpath)).map(P=>P.fullpath);L.length&&Mt(L).then(P=>{for(const $ in P)if(Object.prototype.hasOwnProperty.call(P,$)){const x=P[$];O.set($,x)}})}),w.useEventListen("refresh",async()=>{w.eventEmitter.emit("viewableAreaFilesChange")});const Q=pe(()=>w.eventEmitter.emit("viewableAreaFilesChange"),300);re(r,Q);const B=pe(async()=>{await C(),Q()},150);return{gridItems:N,sortedFiles:e,sortMethodConv:Bt,moreActionsDropdownShow:T,gridSize:s,sortMethod:n,onScroll:B,loadNextDir:f,loadNextDirLoading:g,canLoadNext:p,itemSize:z,cellWidth:l,dirCoverCache:O}}const ms=new Map,q=_e(),ys=qn(),Zn=Xe(),bs=Ft(),As=new BroadcastChannel("iib-image-transfer-bus"),{eventEmitter:Ss,useEventListen:ks}=et(),{useHookShareState:oe}=$n((i,{images:t})=>{const e=j({tabIdx:-1,paneIdx:-1}),n=V(()=>Lt(r.value)),r=j([]),o=V(()=>{var f;return r.value.map(C=>C.curr).slice((f=q.conf)!=null&&f.is_win&&e.value.mode!=="scanned-fixed"?1:0)}),p=V(()=>jt(...o.value)),d=V(()=>{var f,C;return e.value.mode==="scanned-fixed"?((C=(f=r.value)==null?void 0:f[0])==null?void 0:C.curr)??"":e.value.mode==="walk"?e.value.path??"":r.value.length===1?"/":p.value}),v=j(q.defaultSortingMethod),b=j(e.value.mode=="walk"?new se(e.value.path,v.value):void 0);re([()=>e.value.mode,()=>e.value.path,v],async([f,C,Q])=>{var B;f==="walk"?(b.value=new se(C,Q),r.value=[{files:[],curr:C}],await Ze(),await((B=b.value)==null?void 0:B.reset()),z.eventEmitter.emit("loadNextDir")):b.value=void 0});const E=ke(new Set);re(n,()=>E.clear());const w=V(()=>{var B;if(t.value)return t.value;if(b.value)return b.value.images.filter(R=>!E.has(R.fullpath));if(!n.value)return[];const f=((B=n.value)==null?void 0:B.files)??[],C=v.value;return Ge((R=>q.onlyFoldersAndImages?R.filter(k=>k.type==="dir"||le(k.name)):R)(f),C).filter(R=>!E.has(R.fullpath))}),T=j([]),l=j(-1),s=V(()=>b.value?!b.value.isCompleted:!1),c=j(!1),m=j(!1),N=j(),O=()=>{var f,C,Q;return(Q=(C=(f=q.tabList)==null?void 0:f[e.value.tabIdx])==null?void 0:C.panes)==null?void 0:Q[e.value.paneIdx]},z=et();z.useEventListen("selectAll",()=>{console.log(`select all 0 -> ${w.value.length}`),T.value=Nn(0,w.value.length)});const g=()=>{const f=N.value;if(f){const C=Math.max(f.$_startIndex-10,0);return w.value.slice(C,f.$_endIndex+10)}return[]};return{previewing:m,spinning:c,canLoadNext:s,multiSelectedIdxs:T,previewIdx:l,basePath:o,currLocation:d,currPage:n,stack:r,sortMethod:v,sortedFiles:w,scroller:N,stackViewEl:j(),props:e,getPane:O,walker:b,deletedFiles:E,getViewableAreaFiles:g,...z}},()=>({images:j()}));function _s(){const{eventEmitter:i,multiSelectedIdxs:t,sortedFiles:e}=oe().toRefs();return{onSelectAll:()=>i.value.emit("selectAll"),onReverseSelect:()=>{t.value=e.value.map((p,d)=>d).filter(p=>!t.value.includes(p))},onClearAllSelected:()=>{t.value=[]}}}const Is=()=>{const{stackViewEl:i}=oe().toRefs(),t=j(-1);return Rt(i,e=>{var r;let n=e.target;for(;n.parentElement;)if(n=n.parentElement,n.tagName.toLowerCase()==="li"&&n.classList.contains("file-item-trigger")){const o=(r=n.dataset)==null?void 0:r.idx;o&&Number.isSafeInteger(+o)&&(t.value=+o);return}}),{showMenuIdx:t}};function Xn(){var i=window.navigator.userAgent,t=i.indexOf("MSIE ");if(t>0)return parseInt(i.substring(t+5,i.indexOf(".",t)),10);var e=i.indexOf("Trident/");if(e>0){var n=i.indexOf("rv:");return parseInt(i.substring(n+3,i.indexOf(".",n)),10)}var r=i.indexOf("Edge/");return r>0?parseInt(i.substring(r+5,i.indexOf(".",r)),10):-1}let ne;function ye(){ye.init||(ye.init=!0,ne=Xn()!==-1)}var ae={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){ye(),it(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const i=document.createElement("object");this._resizeObject=i,i.setAttribute("aria-hidden","true"),i.setAttribute("tabindex",-1),i.onload=this.addResizeHandlers,i.type="text/html",ne&&this.$el.appendChild(i),i.data="about:blank",ne||this.$el.appendChild(i)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!ne&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const ei=Ht();tt("data-v-b329ee4c");const ti={class:"resize-observer",tabindex:"-1"};nt();const ni=ei((i,t,e,n,r,o)=>(a(),F("div",ti)));ae.render=ni;ae.__scopeId="data-v-b329ee4c";ae.__file="src/components/ResizeObserver.vue";function ie(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ie=function(t){return typeof t}:ie=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(i)}function ii(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function ri(i,t,e){return t&&Ue(i.prototype,t),e&&Ue(i,e),i}function Je(i){return si(i)||oi(i)||li(i)||ai()}function si(i){if(Array.isArray(i))return be(i)}function oi(i){if(typeof Symbol<"u"&&Symbol.iterator in Object(i))return Array.from(i)}function li(i,t){if(i){if(typeof i=="string")return be(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return be(i,t)}}function be(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=i[e];return n}function ai(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ui(i){var t;return typeof i=="function"?t={callback:i}:t=i,t}function ci(i,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,r,o,p=function(v){for(var b=arguments.length,E=new Array(b>1?b-1:0),w=1;w<b;w++)E[w-1]=arguments[w];if(o=E,!(n&&v===r)){var T=e.leading;typeof T=="function"&&(T=T(v,r)),(!n||v!==r)&&T&&i.apply(void 0,[v].concat(Je(o))),r=v,clearTimeout(n),n=setTimeout(function(){i.apply(void 0,[v].concat(Je(o))),n=0},t)}};return p._clear=function(){clearTimeout(n),n=null},p}function dt(i,t){if(i===t)return!0;if(ie(i)==="object"){for(var e in i)if(!dt(i[e],t[e]))return!1;return!0}return!1}var di=function(){function i(t,e,n){ii(this,i),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(e,n)}return ri(i,[{key:"createObserver",value:function(e,n){var r=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=ui(e),this.callback=function(d,v){r.options.callback(d,v),d&&r.options.once&&(r.frozen=!0,r.destroyObserver())},this.callback&&this.options.throttle){var o=this.options.throttleOptions||{},p=o.leading;this.callback=ci(this.callback,this.options.throttle,{leading:function(v){return p==="both"||p==="visible"&&v||p==="hidden"&&!v}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(d){var v=d[0];if(d.length>1){var b=d.find(function(w){return w.isIntersecting});b&&(v=b)}if(r.callback){var E=v.isIntersecting&&v.intersectionRatio>=r.threshold;if(E===r.oldResult)return;r.oldResult=E,r.callback(E,v)}},this.options.intersection),it(function(){r.observer&&r.observer.observe(r.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),i}();function ft(i,t,e){var n=t.value;if(n)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var r=new di(i,n,e);i._vue_visibilityState=r}}function fi(i,t,e){var n=t.value,r=t.oldValue;if(!dt(n,r)){var o=i._vue_visibilityState;if(!n){ht(i);return}o?o.createObserver(n,e):ft(i,{value:n},e)}}function ht(i){var t=i._vue_visibilityState;t&&(t.destroyObserver(),delete i._vue_visibilityState)}var hi={beforeMount:ft,updated:fi,unmounted:ht},gi={itemsLimit:1e3},pi=/(auto|scroll)/;function gt(i,t){return i.parentNode===null?t:gt(i.parentNode,t.concat([i]))}var fe=function(t,e){return getComputedStyle(t,null).getPropertyValue(e)},vi=function(t){return fe(t,"overflow")+fe(t,"overflow-y")+fe(t,"overflow-x")},mi=function(t){return pi.test(vi(t))};function We(i){if(i instanceof HTMLElement||i instanceof SVGElement){for(var t=gt(i.parentNode,[]),e=0;e<t.length;e+=1)if(mi(t[e]))return t[e];return document.scrollingElement||document.documentElement}}function Ae(i){"@babel/helpers - typeof";return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(i)}var yi={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(t){return["vertical","horizontal"].includes(t)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function bi(){return this.items.length&&Ae(this.items[0])!=="object"}var Se=!1;if(typeof window<"u"){Se=!1;try{var Ai=Object.defineProperty({},"passive",{get:function(){Se=!0}});window.addEventListener("test",null,Ai)}catch{}}let Si=0;var pt={name:"RecycleScroller",components:{ResizeObserver:ae},directives:{ObserveVisibility:hi},props:{...yi,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const i={"-1":{accumulator:0}},t=this.items,e=this.sizeField,n=this.minItemSize;let r=1e4,o=0,p;for(let d=0,v=t.length;d<v;d++)p=t[d][e]||n,p<r&&(r=p),o+=p,i[d]={accumulator:o,size:p};return this.$_computedMinItemSize=r,i}return[]},simpleArray:bi,itemIndexByKey(){const{keyField:i,items:t}=this,e={};for(let n=0,r=t.length;n<r;n++)e[t[n][i]]=n;return e}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const i=this.$_lastUpdateScrollPosition;typeof i=="number"&&this.$nextTick(()=>{this.scrollToPosition(i)})},beforeUnmount(){this.removeListeners()},methods:{addView(i,t,e,n,r){const o=Vt({id:Si++,index:t,used:!0,key:n,type:r}),p=xt({item:e,position:0,nr:o});return i.push(p),p},unuseView(i,t=!1){const e=this.$_unusedViews,n=i.nr.type;let r=e.get(n);r||(r=[],e.set(n,r)),r.push(i),t||(i.nr.used=!1,i.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(i){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const t=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:e}=this.updateVisibleItems(!1,!0);e||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});t(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&t()},this.updateInterval))}},handleVisibilityChange(i,t){this.ready&&(i||t.boundingClientRect.width!==0||t.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(i,t=!1){const e=this.itemSize,n=this.gridItems||1,r=this.itemSecondarySize||e,o=this.$_computedMinItemSize,p=this.typeField,d=this.simpleArray?null:this.keyField,v=this.items,b=v.length,E=this.sizes,w=this.$_views,T=this.$_unusedViews,l=this.pool,s=this.itemIndexByKey;let c,m,N,O,z;if(!b)c=m=O=z=N=0;else if(this.$_prerender)c=O=0,m=z=Math.min(this.prerender,v.length),N=null;else{const k=this.getScroll();if(t){let $=k.start-this.$_lastUpdateScrollPosition;if($<0&&($=-$),e===null&&$<o||$<e)return{continuous:!0}}this.$_lastUpdateScrollPosition=k.start;const L=this.buffer;k.start-=L,k.end+=L;let P=0;if(this.$refs.before&&(P=this.$refs.before.scrollHeight,k.start-=P),this.$refs.after){const $=this.$refs.after.scrollHeight;k.end+=$}if(e===null){let $,x=0,De=b-1,U=~~(b/2),Ne;do Ne=U,$=E[U].accumulator,$<k.start?x=U:U<b-1&&E[U+1].accumulator>k.start&&(De=U),U=~~((x+De)/2);while(U!==Ne);for(U<0&&(U=0),c=U,N=E[b-1].accumulator,m=U;m<b&&E[m].accumulator<k.end;m++);for(m===-1?m=v.length-1:(m++,m>b&&(m=b)),O=c;O<b&&P+E[O].accumulator<k.start;O++);for(z=O;z<b&&P+E[z].accumulator<k.end;z++);}else{c=~~(k.start/e*n);const $=c%n;c-=$,m=Math.ceil(k.end/e*n),O=Math.max(0,Math.floor((k.start-P)/e*n)),z=Math.floor((k.end-P)/e*n),c<0&&(c=0),m>b&&(m=b),O<0&&(O=0),z>b&&(z=b),N=Math.ceil(b/n)*e}}m-c>gi.itemsLimit&&this.itemsLimitError(),this.totalSize=N;let g;const f=c<=this.$_endIndex&&m>=this.$_startIndex;if(f)for(let k=0,L=l.length;k<L;k++)g=l[k],g.nr.used&&(i&&(g.nr.index=s[g.item[d]]),(g.nr.index==null||g.nr.index<c||g.nr.index>=m)&&this.unuseView(g));const C=f?null:new Map;let Q,B,R;for(let k=c;k<m;k++){Q=v[k];const L=d?Q[d]:Q;if(L==null)throw new Error(`Key is ${L} on item (keyField is '${d}')`);if(g=w.get(L),!e&&!E[k].size){g&&this.unuseView(g);continue}B=Q[p];let P=T.get(B),$=!1;if(!g)f?P&&P.length?g=P.pop():g=this.addView(l,k,Q,L,B):(R=C.get(B)||0,(!P||R>=P.length)&&(g=this.addView(l,k,Q,L,B),this.unuseView(g,!0),P=T.get(B)),g=P[R],C.set(B,R+1)),w.delete(g.nr.key),g.nr.used=!0,g.nr.index=k,g.nr.key=L,g.nr.type=B,w.set(L,g),$=!0;else if(!g.nr.used&&(g.nr.used=!0,g.nr.index=k,$=!0,P)){const x=P.indexOf(g);x!==-1&&P.splice(x,1)}g.item=Q,$&&(k===v.length-1&&this.$emit("scroll-end"),k===0&&this.$emit("scroll-start")),e===null?(g.position=E[k-1].accumulator,g.offset=0):(g.position=Math.floor(k/n)*e,g.offset=k%n*r)}return this.$_startIndex=c,this.$_endIndex=m,this.emitUpdate&&this.$emit("update",c,m,O,z),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:f}},getListenerTarget(){let i=We(this.$el);return window.document&&(i===window.document.documentElement||i===window.document.body)&&(i=window),i},getScroll(){const{$el:i,direction:t}=this,e=t==="vertical";let n;if(this.pageMode){const r=i.getBoundingClientRect(),o=e?r.height:r.width;let p=-(e?r.top:r.left),d=e?window.innerHeight:window.innerWidth;p<0&&(d+=p,p=0),p+d>o&&(d=o-p),n={start:p,end:p+d}}else e?n={start:i.scrollTop,end:i.scrollTop+i.clientHeight}:n={start:i.scrollLeft,end:i.scrollLeft+i.clientWidth};return n},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,Se?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(i){let t;const e=this.gridItems||1;this.itemSize===null?t=i>0?this.sizes[i-1].accumulator:0:t=Math.floor(i/e)*this.itemSize,this.scrollToPosition(t)},scrollToPosition(i){const t=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let e,n,r;if(this.pageMode){const o=We(this.$el),p=o.tagName==="HTML"?0:o[t.scroll],d=o.getBoundingClientRect(),b=this.$el.getBoundingClientRect()[t.start]-d[t.start];e=o,n=t.scroll,r=i+p+b}else e=this.$el,n=t.scroll,r=i;e[n]=r},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((i,t)=>i.nr.index-t.nr.index)}}};const ki={key:0,ref:"before",class:"vue-recycle-scroller__slot"},_i={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function Ii(i,t,e,n,r,o){const p=Ut("ResizeObserver"),d=Jt("observe-visibility");return Wt((a(),h("div",{class:Y(["vue-recycle-scroller",{ready:r.ready,"page-mode":e.pageMode,[`direction-${i.direction}`]:!0}]),onScrollPassive:t[0]||(t[0]=(...v)=>o.handleScroll&&o.handleScroll(...v))},[i.$slots.before?(a(),h("div",ki,[ee(i.$slots,"before")],512)):A("v-if",!0),(a(),F($e(e.listTag),{ref:"wrapper",style:rt({[i.direction==="vertical"?"minHeight":"minWidth"]:r.totalSize+"px"}),class:Y(["vue-recycle-scroller__item-wrapper",e.listClass])},{default:_(()=>[(a(!0),h(H,null,J(r.pool,v=>(a(),F($e(e.itemTag),Kt({key:v.nr.id,style:r.ready?{transform:`translate${i.direction==="vertical"?"Y":"X"}(${v.position}px) translate${i.direction==="vertical"?"X":"Y"}(${v.offset}px)`,width:e.gridItems?`${i.direction==="vertical"&&e.itemSecondarySize||e.itemSize}px`:void 0,height:e.gridItems?`${i.direction==="horizontal"&&e.itemSecondarySize||e.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[e.itemClass,{hover:!e.skipHover&&r.hoverKey===v.nr.key}]]},Yt(e.skipHover?{}:{mouseenter:()=>{r.hoverKey=v.nr.key},mouseleave:()=>{r.hoverKey=null}})),{default:_(()=>[ee(i.$slots,"default",{item:v.item,index:v.nr.index,active:v.nr.used})]),_:2},1040,["style","class"]))),128)),ee(i.$slots,"empty")]),_:3},8,["style","class"])),i.$slots.after?(a(),h("div",_i,[ee(i.$slots,"after")],512)):A("v-if",!0),S(p,{onNotify:o.handleResize},null,8,["onNotify"])],34)),[[d,o.handleVisibilityChange]])}pt.render=Ii;pt.__file="src/components/RecycleScroller.vue";const Ke=X({__name:"ContextMenu",props:{file:{},idx:{},selectedTag:{},isSelectedMutilFiles:{type:Boolean}},emits:["contextMenuClick"],setup(i,{emit:t}){const e=i,n=_e(),r=V(()=>{var o;return(((o=n.conf)==null?void 0:o.all_custom_tags)??[]).reduce((p,d)=>[...p,{...d,selected:!!e.selectedTag.find(v=>v.id===d.id)}],[])});return(o,p)=>{const d=st,v=qt,b=Gt,E=ot;return a(),F(E,{onClick:p[0]||(p[0]=w=>t("contextMenuClick",w,o.file,o.idx))},{default:_(()=>{var w;return[S(d,{key:"deleteFiles"},{default:_(()=>[I(y(o.$t("deleteSelected")),1)]),_:1}),S(d,{key:"openWithDefaultApp"},{default:_(()=>[I(y(o.$t("openWithDefaultApp")),1)]),_:1}),S(d,{key:"saveSelectedAsJson"},{default:_(()=>[I(y(o.$t("saveSelectedAsJson")),1)]),_:1}),o.file.type==="dir"?(a(),h(H,{key:0},[S(d,{key:"openInNewTab"},{default:_(()=>[I(y(o.$t("openInNewTab")),1)]),_:1}),S(d,{key:"openOnTheRight"},{default:_(()=>[I(y(o.$t("openOnTheRight")),1)]),_:1}),S(d,{key:"openWithWalkMode"},{default:_(()=>[I(y(o.$t("openWithWalkMode")),1)]),_:1})],64)):A("",!0),o.file.type==="file"?(a(),h(H,{key:1},[M(le)(o.file.name)?(a(),h(H,{key:0},[S(d,{key:"viewGenInfo"},{default:_(()=>[I(y(o.$t("viewGenerationInfo")),1)]),_:1}),S(v),((w=M(n).conf)==null?void 0:w.launch_mode)!=="server"?(a(),h(H,{key:0},[S(d,{key:"send2txt2img"},{default:_(()=>[I(y(o.$t("sendToTxt2img")),1)]),_:1}),S(d,{key:"send2img2img"},{default:_(()=>[I(y(o.$t("sendToImg2img")),1)]),_:1}),S(d,{key:"send2inpaint"},{default:_(()=>[I(y(o.$t("sendToInpaint")),1)]),_:1}),S(d,{key:"send2extras"},{default:_(()=>[I(y(o.$t("sendToExtraFeatures")),1)]),_:1}),S(b,{key:"sendToThirdPartyExtension",title:o.$t("sendToThirdPartyExtension")},{default:_(()=>[S(d,{key:"send2controlnet-txt2img"},{default:_(()=>[I("ControlNet - "+y(o.$t("t2i")),1)]),_:1}),S(d,{key:"send2controlnet-img2img"},{default:_(()=>[I("ControlNet - "+y(o.$t("i2i")),1)]),_:1}),S(d,{key:"send2outpaint"},{default:_(()=>[I("openOutpaint")]),_:1})]),_:1},8,["title"])],64)):A("",!0),S(d,{key:"send2BatchDownload"},{default:_(()=>[I(y(o.$t("sendToBatchDownload")),1)]),_:1}),S(b,{key:"copy2target",title:o.$t("copyTo")},{default:_(()=>[(a(!0),h(H,null,J(M(n).quickMovePaths,T=>(a(),F(d,{key:`copy-to-${T.dir}`},{default:_(()=>[I(y(T.zh),1)]),_:2},1024))),128))]),_:1},8,["title"]),S(b,{key:"move2target",title:o.$t("moveTo")},{default:_(()=>[(a(!0),h(H,null,J(M(n).quickMovePaths,T=>(a(),F(d,{key:`move-to-${T.dir}`},{default:_(()=>[I(y(T.zh),1)]),_:2},1024))),128))]),_:1},8,["title"]),S(v),o.isSelectedMutilFiles?(a(),h(H,{key:1},[S(b,{key:"batch-add-tag",title:o.$t("batchAddTag")},{default:_(()=>[(a(!0),h(H,null,J(r.value,T=>(a(),F(d,{key:`batch-add-tag-${T.id}`},{default:_(()=>[I(y(T.name),1)]),_:2},1024))),128))]),_:1},8,["title"]),S(b,{key:"batch-remove-tag",title:o.$t("batchRemoveTag")},{default:_(()=>[(a(!0),h(H,null,J(r.value,T=>(a(),F(d,{key:`batch-remove-tag-${T.id}`},{default:_(()=>[I(y(T.name),1)]),_:2},1024))),128))]),_:1},8,["title"])],64)):(a(),F(b,{key:"toggle-tag",title:o.$t("toggleTag")},{default:_(()=>[(a(!0),h(H,null,J(r.value,T=>(a(),F(d,{key:`toggle-tag-${T.id}`},{default:_(()=>[I(y(T.name)+" ",1),T.selected?(a(),F(M(at),{key:0})):(a(),F(M(ut),{key:1}))]),_:2},1024))),128))]),_:1},8,["title"])),S(v),S(d,{key:"openFileLocationInNewTab"},{default:_(()=>[I(y(o.$t("openFileLocationInNewTab")),1)]),_:1}),S(d,{key:"openWithLocalFileBrowser"},{default:_(()=>[I(y(o.$t("openWithLocalFileBrowser")),1)]),_:1})],64)):A("",!0),S(v),S(d,{key:"rename"},{default:_(()=>[I(y(o.$t("rename")),1)]),_:1}),S(d,{key:"previewInNewWindow"},{default:_(()=>[I(y(o.$t("previewInNewWindow")),1)]),_:1}),S(d,{key:"download"},{default:_(()=>[I(y(o.$t("download")),1)]),_:1}),S(d,{key:"copyPreviewUrl"},{default:_(()=>[I(y(o.$t("copySourceFilePreviewLink")),1)]),_:1}),S(d,{key:"copyFilePath"},{default:_(()=>[I(y(o.$t("copyFilePath")),1)]),_:1})],64)):A("",!0)]}),_:1})}}}),D=i=>(tt("data-v-78cd67a3"),i=i(),nt(),i),Ci={class:"changeIndicatorWrapper"},wi={key:0,class:"changeIndicatorsLeft changeIndicators"},Ei={key:0,class:"promptChangeIndicator changeIndicator"},Ti={key:1,class:"negpromptChangeIndicator changeIndicator"},Pi={key:2,class:"seedChangeIndicator changeIndicator"},Oi={key:3,class:"stepsChangeIndicator changeIndicator"},Di={key:4,class:"cfgChangeIndicator changeIndicator"},Ni={key:5,class:"sizeChangeIndicator changeIndicator"},zi={key:6,class:"modelChangeIndicator changeIndicator"},$i={key:7,class:"samplerChangeIndicator changeIndicator"},Qi={key:8,class:"otherChangeIndicator changeIndicator"},Mi={class:"hoverOverlay"},Bi=D(()=>u("strong",null,"This file",-1)),Fi=D(()=>u("br",null,null,-1)),Ri=D(()=>u("br",null,null,-1)),Li={key:0},ji=D(()=>u("td",null,[u("span",{class:"promptChangeIndicator"},"+ Prompt")],-1)),Hi={key:1},Vi=D(()=>u("td",null,[u("span",{class:"negpromptChangeIndicator"},"- Prompt")],-1)),xi={key:2},Ui=D(()=>u("td",null,[u("span",{class:"seedChangeIndicator"},"Seed")],-1)),Ji={key:3},Wi=D(()=>u("td",null,[u("span",{class:"stepsChangeIndicator"},"Steps")],-1)),Ki={key:4},Yi=D(()=>u("td",null,[u("span",{class:"cfgChangeIndicator"},"Cfg Scale")],-1)),qi={key:5},Gi=D(()=>u("td",null,[u("span",{class:"sizeChangeIndicator"},"Size")],-1)),Zi={key:6},Xi=D(()=>u("td",null,[u("span",{class:"modelChangeIndicator"},"Model")],-1)),er=D(()=>u("br",null,null,-1)),tr={key:7},nr=D(()=>u("td",null,[u("span",{class:"samplerChangeIndicator"},"Sampler")],-1)),ir=D(()=>u("br",null,null,-1)),rr=D(()=>u("br",null,null,-1)),sr={key:0},or=D(()=>u("span",{class:"otherChangeIndicator"},"Other",-1)),lr=D(()=>u("br",null,null,-1)),ar=D(()=>u("br",null,null,-1)),ur={key:1,class:"changeIndicatorsRight changeIndicators"},cr={key:0,class:"promptChangeIndicator changeIndicator"},dr={key:1,class:"negpromptChangeIndicator changeIndicator"},fr={key:2,class:"seedChangeIndicator changeIndicator"},hr={key:3,class:"stepsChangeIndicator changeIndicator"},gr={key:4,class:"cfgChangeIndicator changeIndicator"},pr={key:5,class:"sizeChangeIndicator changeIndicator"},vr={key:6,class:"modelChangeIndicator changeIndicator"},mr={key:7,class:"samplerChangeIndicator changeIndicator"},yr={key:8,class:"otherChangeIndicator changeIndicator"},br={class:"hoverOverlay"},Ar=D(()=>u("strong",null,"This file",-1)),Sr=D(()=>u("br",null,null,-1)),kr=D(()=>u("br",null,null,-1)),_r={key:0},Ir=D(()=>u("td",null,[u("span",{class:"promptChangeIndicator"},"+ Prompt")],-1)),Cr={key:1},wr=D(()=>u("td",null,[u("span",{class:"negpromptChangeIndicator"},"- Prompt")],-1)),Er={key:2},Tr=D(()=>u("td",null,[u("span",{class:"seedChangeIndicator"},"Seed")],-1)),Pr={key:3},Or=D(()=>u("td",null,[u("span",{class:"stepsChangeIndicator"},"Steps")],-1)),Dr={key:4},Nr=D(()=>u("td",null,[u("span",{class:"cfgChangeIndicator"},"Cfg Scale")],-1)),zr={key:5},$r=D(()=>u("td",null,[u("span",{class:"sizeChangeIndicator"},"Size")],-1)),Qr={key:6},Mr=D(()=>u("td",null,[u("span",{class:"modelChangeIndicator"},"Model")],-1)),Br=D(()=>u("br",null,null,-1)),Fr={key:7},Rr=D(()=>u("td",null,[u("span",{class:"samplerChangeIndicator"},"Sampler")],-1)),Lr=D(()=>u("br",null,null,-1)),jr=D(()=>u("br",null,null,-1)),Hr={key:0},Vr=D(()=>u("span",{class:"otherChangeIndicator"},"Other",-1)),xr=D(()=>u("br",null,null,-1)),Ur=D(()=>u("br",null,null,-1)),Jr=X({__name:"ChangeIndicator",props:{genDiffToPrevious:{},genDiffToNext:{},genInfo:{}},setup(i){function t(n){const r=["prompt","negativePrompt","seed","steps","cfgScale","size","Model","others"],o=Object.keys(n).filter(p=>!r.includes(p));return Object.fromEntries(o.map(p=>[p,n[p]]))}function e(n){return Object.keys(t(n)).length>0}return(n,r)=>(a(),h("div",Ci,[n.genDiffToPrevious.empty?A("",!0):(a(),h("div",wi,["prompt"in n.genDiffToPrevious.diff?(a(),h("div",Ei,"P+")):A("",!0),"negativePrompt"in n.genDiffToPrevious.diff?(a(),h("div",Ti,"P-")):A("",!0),"seed"in n.genDiffToPrevious.diff?(a(),h("div",Pi,"Se")):A("",!0),"steps"in n.genDiffToPrevious.diff?(a(),h("div",Oi,"St")):A("",!0),"cfgScale"in n.genDiffToPrevious.diff?(a(),h("div",Di,"Cf")):A("",!0),"size"in n.genDiffToPrevious.diff?(a(),h("div",Ni,"Si")):A("",!0),"Model"in n.genDiffToPrevious.diff?(a(),h("div",zi,"Mo")):A("",!0),"Sampler"in n.genDiffToPrevious.diff?(a(),h("div",$i,"Sa")):A("",!0),e(n.genDiffToPrevious.diff)?(a(),h("div",Qi,"Ot")):A("",!0)])),u("div",Mi,[u("small",null,[S(M(je)),Bi,I(" vs "+y(n.genDiffToPrevious.otherFile)+" ",1),Fi,Ri,u("table",null,["prompt"in n.genDiffToPrevious.diff?(a(),h("tr",Li,[ji,u("td",null,y(n.genDiffToPrevious.diff.prompt)+" tokens changed",1)])):A("",!0),"negativePrompt"in n.genDiffToPrevious.diff?(a(),h("tr",Hi,[Vi,u("td",null,y(n.genDiffToPrevious.diff.negativePrompt)+" tokens changed",1)])):A("",!0),"seed"in n.genDiffToPrevious.diff?(a(),h("tr",xi,[Ui,u("td",null,[u("strong",null,y(n.genDiffToPrevious.diff.seed[0]),1),I(" vs "+y(n.genDiffToPrevious.diff.seed[1]),1)])])):A("",!0),"steps"in n.genDiffToPrevious.diff?(a(),h("tr",Ji,[Wi,u("td",null,[u("strong",null,y(n.genDiffToPrevious.diff.steps[0]),1),I(" vs "+y(n.genDiffToPrevious.diff.steps[1]),1)])])):A("",!0),"cfgScale"in n.genDiffToPrevious.diff?(a(),h("tr",Ki,[Yi,u("td",null,[u("strong",null,y(n.genDiffToPrevious.diff.cfgScale[0]),1),I(" vs "+y(n.genDiffToPrevious.diff.cfgScale[1]),1)])])):A("",!0),"size"in n.genDiffToPrevious.diff?(a(),h("tr",qi,[Gi,u("td",null,[u("strong",null,y(n.genDiffToPrevious.diff.size[0]),1),I(" vs "+y(n.genDiffToPrevious.diff.size[1]),1)])])):A("",!0),"Model"in n.genDiffToPrevious.diff?(a(),h("tr",Zi,[Xi,u("td",null,[u("strong",null,y(n.genDiffToPrevious.diff.Model[0]),1),er,I(" vs "+y(n.genDiffToPrevious.diff.Model[1]),1)])])):A("",!0),"Sampler"in n.genDiffToPrevious.diff?(a(),h("tr",tr,[nr,u("td",null,[u("strong",null,y(n.genDiffToPrevious.diff.Sampler[0]),1),ir,I(" vs "+y(n.genDiffToPrevious.diff.Sampler[1]),1)])])):A("",!0)]),rr,e(n.genDiffToPrevious.diff)?(a(),h("div",sr,[or,I(" props that changed:"),lr,ar,u("ul",null,[(a(!0),h(H,null,J(t(n.genDiffToPrevious.diff),(o,p)=>(a(),h("li",null,y(p),1))),256))])])):A("",!0)])]),n.genDiffToNext.empty?A("",!0):(a(),h("div",ur,["prompt"in n.genDiffToNext.diff?(a(),h("div",cr,"P+")):A("",!0),"negativePrompt"in n.genDiffToNext.diff?(a(),h("div",dr,"P-")):A("",!0),"seed"in n.genDiffToNext.diff?(a(),h("div",fr,"Se")):A("",!0),"steps"in n.genDiffToNext.diff?(a(),h("div",hr,"St")):A("",!0),"cfgScale"in n.genDiffToNext.diff?(a(),h("div",gr,"Cf")):A("",!0),"size"in n.genDiffToNext.diff?(a(),h("div",pr,"Si")):A("",!0),"Model"in n.genDiffToNext.diff?(a(),h("div",vr,"Mo")):A("",!0),"Sampler"in n.genDiffToNext.diff?(a(),h("div",mr,"Sa")):A("",!0),e(n.genDiffToNext.diff)?(a(),h("div",yr,"Ot")):A("",!0)])),u("div",br,[u("small",null,[S(M(je)),Ar,I(" vs "+y(n.genDiffToNext.otherFile)+" ",1),Sr,kr,u("table",null,["prompt"in n.genDiffToNext.diff?(a(),h("tr",_r,[Ir,u("td",null,y(n.genDiffToNext.diff.prompt)+" tokens changed",1)])):A("",!0),"negativePrompt"in n.genDiffToNext.diff?(a(),h("tr",Cr,[wr,u("td",null,y(n.genDiffToNext.diff.negativePrompt)+" tokens changed",1)])):A("",!0),"seed"in n.genDiffToNext.diff?(a(),h("tr",Er,[Tr,u("td",null,[u("strong",null,y(n.genDiffToNext.diff.seed[0]),1),I(" vs "+y(n.genDiffToNext.diff.seed[1]),1)])])):A("",!0),"steps"in n.genDiffToNext.diff?(a(),h("tr",Pr,[Or,u("td",null,[u("strong",null,y(n.genDiffToNext.diff.steps[0]),1),I(" vs "+y(n.genDiffToNext.diff.steps[1]),1)])])):A("",!0),"cfgScale"in n.genDiffToNext.diff?(a(),h("tr",Dr,[Nr,u("td",null,[u("strong",null,y(n.genDiffToNext.diff.cfgScale[0]),1),I(" vs "+y(n.genDiffToNext.diff.cfgScale[1]),1)])])):A("",!0),"size"in n.genDiffToNext.diff?(a(),h("tr",zr,[$r,u("td",null,[u("strong",null,y(n.genDiffToNext.diff.size[0]),1),I(" vs "+y(n.genDiffToNext.diff.size[1]),1)])])):A("",!0),"Model"in n.genDiffToNext.diff?(a(),h("tr",Qr,[Mr,u("td",null,[u("strong",null,y(n.genDiffToNext.diff.Model[0]),1),Br,I(" vs "+y(n.genDiffToNext.diff.Model[1]),1)])])):A("",!0),"Sampler"in n.genDiffToNext.diff?(a(),h("tr",Fr,[Rr,u("td",null,[u("strong",null,y(n.genDiffToNext.diff.Sampler[0]),1),Lr,I(" vs "+y(n.genDiffToNext.diff.Sampler[1]),1)])])):A("",!0)]),jr,e(n.genDiffToNext.diff)?(a(),h("div",Hr,[Vr,I(" props that changed:"),xr,Ur,u("ul",null,[(a(!0),h(H,null,J(t(n.genDiffToNext.diff),(o,p)=>(a(),h("li",null,y(p),1))),256))])])):A("",!0)])])]))}});const Wr=lt(Jr,[["__scopeId","data-v-78cd67a3"]]),Kr=["data-idx"],Yr={key:1,class:"more"},qr={class:"float-btn-wrap"},Gr={key:1,class:"tags-container"},Zr=["urld"],Xr={class:"play-icon"},es=["src"],ts={key:0,class:"tags-container"},ns={key:4,class:"preview-icon-wrap"},is={key:1,class:"dir-cover-container"},rs=["src"],ss={key:5,class:"profile"},os=["title"],ls={class:"basic-info"},as={style:{"margin-right":"4px"}},he=160,us=X({__name:"FileItem",props:{file:{},idx:{},selected:{type:Boolean,default:!1},showMenuIdx:{},cellWidth:{},fullScreenPreviewImageUrl:{},enableRightClickMenu:{type:Boolean,default:!0},enableCloseIcon:{type:Boolean,default:!1},isSelectedMutilFiles:{type:Boolean},genInfo:{},enableChangeIndicator:{type:Boolean},extraTags:{},coverFiles:{},getGenDiff:{},getGenDiffWatchDep:{}},emits:["update:showMenuIdx","fileItemClick","dragstart","dragend","previewVisibleChange","contextMenuClick","close-icon-click"],setup(i,{emit:t}){const e=i;Zt(l=>({"1822a296":l.$props.cellWidth+"px"}));const n=_e(),r=Xe(),o=j(),p=j(),d=pe(()=>{const{getGenDiff:l,file:s,idx:c}=e;l&&(p.value=l(s.gen_info_obj,c,1,s),o.value=l(s.gen_info_obj,c,-1,s))},200+100*Math.random());re(()=>{var l;return(l=e.getGenDiffWatchDep)==null?void 0:l.call(e,e.idx)},()=>{d()},{immediate:!0,deep:!0});const v=V(()=>r.tagMap.get(e.file.fullpath)??[]),b=V(()=>{const l=n.gridThumbnailResolution;return n.enableThumbnail?Qe(e.file,[l,l].join("x")):Xt(e.file)}),E=V(()=>{var l;return(((l=n.conf)==null?void 0:l.all_custom_tags)??[]).reduce((s,c)=>[...s,{...c,selected:!!v.value.find(m=>m.id===c.id)}],[])}),w=V(()=>E.value.find(l=>l.type==="custom"&&l.name==="like")),T=()=>{ge(w.value),t("contextMenuClick",{key:`toggle-tag-${w.value.id}`},e.file,e.idx)};return(l,s)=>{const c=G,m=st,N=ot,O=sn,z=hn;return a(),F(c,{trigger:["contextmenu"],visible:M(n).longPressOpenContextMenu?typeof l.idx=="number"&&l.showMenuIdx===l.idx:void 0,"onUpdate:visible":s[8]||(s[8]=g=>typeof l.idx=="number"&&t("update:showMenuIdx",g?l.idx:-1))},{overlay:_(()=>[l.enableRightClickMenu?(a(),F(Ke,{key:0,file:l.file,idx:l.idx,"selected-tag":v.value,onContextMenuClick:s[7]||(s[7]=(g,f,C)=>t("contextMenuClick",g,f,C)),"is-selected-mutil-files":l.isSelectedMutilFiles},null,8,["file","idx","selected-tag","is-selected-mutil-files"])):A("",!0)]),default:_(()=>{var g;return[(a(),h("li",{class:Y(["file file-item-trigger grid",{clickable:l.file.type==="dir",selected:l.selected}]),"data-idx":l.idx,key:l.file.name,draggable:"true",onDragstart:s[4]||(s[4]=f=>t("dragstart",f,l.idx)),onDragend:s[5]||(s[5]=f=>t("dragend",f,l.idx)),onClickCapture:s[6]||(s[6]=f=>t("fileItemClick",f,l.file,l.idx))},[u("div",null,[l.enableCloseIcon?(a(),h("div",{key:0,class:"close-icon",onClick:s[0]||(s[0]=f=>t("close-icon-click"))},[S(M(en))])):A("",!0),l.enableRightClickMenu?(a(),h("div",Yr,[S(c,null,{overlay:_(()=>[S(Ke,{file:l.file,idx:l.idx,"selected-tag":v.value,onContextMenuClick:s[1]||(s[1]=(f,C,Q)=>t("contextMenuClick",f,C,Q)),"is-selected-mutil-files":l.isSelectedMutilFiles},null,8,["file","idx","selected-tag","is-selected-mutil-files"])]),default:_(()=>[u("div",qr,[S(M(tn))])]),_:1}),l.file.type==="file"?(a(),F(c,{key:0},{overlay:_(()=>[E.value.length>1?(a(),F(N,{key:0,onClick:s[2]||(s[2]=f=>t("contextMenuClick",f,l.file,l.idx))},{default:_(()=>[(a(!0),h(H,null,J(E.value,f=>(a(),F(m,{key:`toggle-tag-${f.id}`},{default:_(()=>[I(y(f.name)+" ",1),f.selected?(a(),F(M(at),{key:0})):(a(),F(M(ut),{key:1}))]),_:2},1024))),128))]),_:1})):A("",!0)]),default:_(()=>{var f,C;return[u("div",{class:Y(["float-btn-wrap",{"like-selected":(f=w.value)==null?void 0:f.selected}]),onClick:T},[(C=w.value)!=null&&C.selected?(a(),F(M(jn),{key:0})):(a(),F(M(Un),{key:1}))],2)]}),_:1})):A("",!0)])):A("",!0),M(nn)(l.file.name)?(a(),h("div",{key:l.file.fullpath,class:Y(`idx-${l.idx} item-content`)},[l.enableChangeIndicator&&p.value&&o.value?(a(),F(Wr,{key:0,"gen-diff-to-next":p.value,"gen-diff-to-previous":o.value},null,8,["gen-diff-to-next","gen-diff-to-previous"])):A("",!0),S(O,{src:b.value,fallback:M(zn),preview:{src:l.fullScreenPreviewImageUrl,onVisibleChange:(f,C)=>t("previewVisibleChange",f,C)}},null,8,["src","fallback","preview"]),v.value&&l.cellWidth>he?(a(),h("div",Gr,[(a(!0),h(H,null,J(l.extraTags??v.value,f=>(a(),F(z,{key:f.id,color:M(r).getColor(f.name)},{default:_(()=>[I(y(f.name),1)]),_:2},1032,["color"]))),128))])):A("",!0)],2)):M(rn)(l.file.name)?(a(),h("div",{key:3,class:Y(`idx-${l.idx} item-content video`),urld:M(de)(l.file),style:rt({"background-image":`url('${M(de)(l.file)}')`}),onClick:s[3]||(s[3]=f=>M(ln)(l.file,C=>t("contextMenuClick",{key:`toggle-tag-${C}`},l.file,l.idx)))},[u("div",Xr,[u("img",{src:M(Yn),style:{width:"40px",height:"40px"}},null,8,es)]),v.value&&l.cellWidth>he?(a(),h("div",ts,[(a(!0),h(H,null,J(v.value,f=>(a(),F(z,{key:f.id,color:M(r).getColor(f.name)},{default:_(()=>[I(y(f.name),1)]),_:2},1032,["color"]))),128))])):A("",!0)],14,Zr)):(a(),h("div",ns,[l.file.type==="file"?(a(),F(M(An),{key:0,class:"icon center"})):(g=l.coverFiles)!=null&&g.length&&l.cellWidth>160?(a(),h("div",is,[(a(!0),h(H,null,J(l.coverFiles,f=>(a(),h("img",{class:"dir-cover-item",src:f.media_type==="image"?M(Qe)(f):M(de)(f),key:f.fullpath},null,8,rs))),128))])):(a(),F(M(In),{key:2,class:"icon center"}))])),l.cellWidth>he?(a(),h("div",ss,[u("div",{class:"name line-clamp-1",title:l.file.name},y(l.file.name),9,os),u("div",ls,[u("div",as,y(l.file.type)+" "+y(l.file.size),1),u("div",null,y(l.file.date),1)])])):A("",!0)])],42,Kr))]}),_:1},8,["visible"])}}});const Cs=lt(us,[["__scopeId","data-v-52eb0555"]]);export{Cs as F,ps as N,Ke as _,vs as a,Is as b,_s as c,pt as d,ks as e,bs as f,q as g,Ss as h,ys as i,As as j,qn as k,Nn as r,ms as s,Zn as t,oe as u};
