var ut=Object.defineProperty;var dt=(i,n,e)=>n in i?ut(i,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[n]=e;var q=(i,n,e)=>(dt(i,typeof n!="symbol"?n+"":n,e),e);import{c as I,A as Y,dx as le,O as de,am as ye,bk as ct,dh as ft,c0 as ht,dy as gt,r as L,cR as pt,bF as De,dz as mt,p as vt,dA as xe,bB as yt,dB as be,dC as bt,aH as At,G as H,dD as St,C as kt,dE as _t,n as ce,m as ne,aU as It,t as Ue,a1 as Ae,c9 as Je,aJ as wt,dF as We,dG as Ct,Q as Et,x as Tt,ct as fe,d0 as Ke,d1 as Ge,aP as Se,aQ as ke,az as Ye,U as l,a2 as F,dH as Pt,dI as Ot,dJ as Dt,c5 as zt,dK as Nt,at as Qt,V as c,aG as Z,$ as y,a3 as A,Z as V,a8 as x,c6 as ze,c7 as Mt,dL as $t,a7 as qe,ag as W,d as _e,X as S,Y as h,a4 as $,al as Ze,dq as Bt,dp as Ft,M as Xe,W as a,a0 as et,di as Rt,dM as Ne,af as Lt,dN as Vt,dl as jt,dO as Ht,dP as xt,dQ as ae,cW as Ut,dR as Jt,dS as Wt,dT as Kt}from"./index-8b1d4076.js";import"./numInput.vue_vue_type_style_index_0_scoped_55978858_lang-26786c56.js";import{i as Gt}from"./_isIterateeCall-4f946453.js";import{_ as Yt}from"./index-404f2353.js";import{D as G,a as he}from"./index-133a27d3.js";/* empty css              */G.Button=he;G.install=function(i){return i.component(G.name,G),i.component(he.name,he),i};var qt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"};const Zt=qt;function Qe(i){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?Object(arguments[n]):{},t=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.forEach(function(r){Xt(i,r,e[r])})}return i}function Xt(i,n,e){return n in i?Object.defineProperty(i,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[n]=e,i}var Ie=function(n,e){var t=Qe({},n,e.attrs);return I(Y,Qe({},t,{icon:Zt}),null)};Ie.displayName="StarFilled";Ie.inheritAttrs=!1;const tt=Ie;var ei={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"};const ti=ei;function Me(i){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?Object(arguments[n]):{},t=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.forEach(function(r){ii(i,r,e[r])})}return i}function ii(i,n,e){return n in i?Object.defineProperty(i,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[n]=e,i}var we=function(n,e){var t=Me({},n,e.attrs);return I(Y,Me({},t,{icon:ti}),null)};we.displayName="FileOutlined";we.inheritAttrs=!1;const ni=we;var si={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};const ri=si;function $e(i){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?Object(arguments[n]):{},t=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.forEach(function(r){oi(i,r,e[r])})}return i}function oi(i,n,e){return n in i?Object.defineProperty(i,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[n]=e,i}var Ce=function(n,e){var t=$e({},n,e.attrs);return I(Y,$e({},t,{icon:ri}),null)};Ce.displayName="FolderOpenOutlined";Ce.inheritAttrs=!1;const li=Ce;function ai(i){return i&&i.length?i[0]:void 0}var ui=Math.ceil,di=Math.max;function ci(i,n,e,t){for(var r=-1,o=di(ui((n-i)/(e||1)),0),v=Array(o);o--;)v[t?o:++r]=i,i+=e;return v}function fi(i){return function(n,e,t){return t&&typeof t!="number"&&Gt(n,e,t)&&(e=t=void 0),n=le(n),e===void 0?(e=n,n=0):e=le(e),t=t===void 0?n<e?1:-1:le(t),ci(n,e,t,i)}}var hi=fi();const gi=hi,pi="data:image/png;base64,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",X=new WeakMap;function mi(i,n){return{useHookShareState:t=>{const r=ht();de(r),X.has(r)||(X.set(r,ye(i(r,t??(n==null?void 0:n())))),ct(()=>{X.delete(r)}));const o=X.get(r);return de(o),{state:o,toRefs(){return ft(o)}}}}}var vi={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"};const yi=vi;function Be(i){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?Object(arguments[n]):{},t=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.forEach(function(r){bi(i,r,e[r])})}return i}function bi(i,n,e){return n in i?Object.defineProperty(i,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[n]=e,i}var Ee=function(n,e){var t=Be({},n,e.attrs);return I(Y,Be({},t,{icon:yi}),null)};Ee.displayName="CaretRightOutlined";Ee.inheritAttrs=!1;const Fe=Ee;var Ai={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"};const Si=Ai;function Re(i){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?Object(arguments[n]):{},t=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.forEach(function(r){ki(i,r,e[r])})}return i}function ki(i,n,e){return n in i?Object.defineProperty(i,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[n]=e,i}var Te=function(n,e){var t=Re({},n,e.attrs);return I(Y,Re({},t,{icon:Si}),null)};Te.displayName="StarOutlined";Te.inheritAttrs=!1;const it=Te,_i="/infinite_image_browsing/fe-static/assets/play-68f5544d.svg",Ii=gt("useBatchDownloadStore",()=>{const i=L([]);return{selectdFiles:i,addFiles:e=>{i.value=pt([...i.value,...e])}}});class se{constructor(n,e=mt.CREATED_TIME_DESC){q(this,"root");q(this,"execQueue",[]);q(this,"walkerInitPromsie");this.entryPath=n,this.sortMethod=e,this.root={children:[],info:{name:this.entryPath,size:"-",bytes:0,created_time:"",is_under_scanned_path:!0,date:"",type:"dir",fullpath:this.entryPath}},this.walkerInitPromsie=new Promise(t=>{De([this.entryPath]).then(async r=>{this.root.info=r[this.entryPath],await this.fetchChildren(this.root),t()})})}reset(){return this.root.children=[],this.fetchChildren(this.root)}get images(){const n=e=>e.children.map(t=>{if(t.info.type==="dir")return n(t);if(be(t.info.name))return t.info}).filter(t=>t).flat(1);return n(this.root)}get isCompleted(){return this.execQueue.length===0}async fetchChildren(n){const{files:e}=await vt(n.info.fullpath);return n.children=xe(e,this.sortMethod).map(t=>({info:t,children:[]})),this.execQueue.shift(),this.execQueue.unshift(...n.children.filter(t=>t.info.type==="dir").map(t=>({fn:()=>this.fetchChildren(t),...t}))),n}async next(){await this.walkerInitPromsie;const n=ai(this.execQueue);if(!n)return null;const e=await n.fn();return this.execQueue=this.execQueue.slice(),this.root={...this.root},e}async isExpired(){const n=[this.root.info],e=r=>{for(const o of r.children)o.info.type==="dir"&&(n.push(o.info),e(o))};e(this.root);const t=await De(n.map(r=>r.fullpath));for(const r of n)if(!yt(r,t[r.fullpath]))return!0;return!1}async seamlessRefresh(n,e=L(!1)){const t=performance.now(),r=new se(this.entryPath,this.sortMethod);for(await r.walkerInitPromsie;!r.isCompleted&&r.images.length<n;){if(e.value)throw new Error("canceled");await r.next()}const o=performance.now();return console.log("seamlessRefresh currPos:",n,"Time taken:",(o-t).toFixed(0),"ms"),r}}var nt={exports:{}};/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */(function(i,n){(function(e,t){i.exports=t})(bt,function(){var e={};e.version="0.3.5";var t=e.settings={minimum:.08,easing:"linear",positionUsing:"",speed:200,trickle:!0,trickleSpeed:200,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};e.configure=function(u){var d,s;for(d in u)s=u[d],s!==void 0&&u.hasOwnProperty(d)&&(t[d]=s);return this},e.status=null,e.set=function(u){var d=e.isStarted();u=r(u,t.minimum,1),e.status=u===1?null:u;var s=e.render(!d),b=s.querySelector(t.barSelector),w=t.speed,M=t.easing;return s.offsetWidth,f(function(p){t.positionUsing===""&&(t.positionUsing=e.getPositioningCSS()),g(b,v(u,w,M)),u===1?(g(s,{transition:"none",opacity:1}),s.offsetWidth,setTimeout(function(){g(s,{transition:"all "+w+"ms linear",opacity:0}),setTimeout(function(){e.remove(),p()},w)},w)):setTimeout(p,w)}),this},e.isStarted=function(){return typeof e.status=="number"},e.start=function(){e.status||e.set(0);var u=function(){setTimeout(function(){e.status&&(e.trickle(),u())},t.trickleSpeed)};return t.trickle&&u(),this},e.done=function(u){return!u&&!e.status?this:e.inc(.3+.5*Math.random()).set(1)},e.inc=function(u){var d=e.status;return d?d>1?void 0:(typeof u!="number"&&(d>=0&&d<.2?u=.1:d>=.2&&d<.5?u=.04:d>=.5&&d<.8?u=.02:d>=.8&&d<.99?u=.005:u=0),d=r(d+u,0,.994),e.set(d)):e.start()},e.trickle=function(){return e.inc()},function(){var u=0,d=0;e.promise=function(s){return!s||s.state()==="resolved"?this:(d===0&&e.start(),u++,d++,s.always(function(){d--,d===0?(u=0,e.done()):e.set((u-d)/u)}),this)}}(),e.getElement=function(){var u=e.getParent();if(u){var d=Array.prototype.slice.call(u.querySelectorAll(".nprogress")).filter(function(s){return s.parentElement===u});if(d.length>0)return d[0]}return null},e.getParent=function(){if(t.parent instanceof HTMLElement)return t.parent;if(typeof t.parent=="string")return document.querySelector(t.parent)},e.render=function(u){if(e.isRendered())return e.getElement();N(document.documentElement,"nprogress-busy");var d=document.createElement("div");d.id="nprogress",d.className="nprogress",d.innerHTML=t.template;var s=d.querySelector(t.barSelector),b=u?"-100":o(e.status||0),w=e.getParent(),M;return g(s,{transition:"all 0 linear",transform:"translate3d("+b+"%,0,0)"}),t.showSpinner||(M=d.querySelector(t.spinnerSelector),M&&j(M)),w!=document.body&&N(w,"nprogress-custom-parent"),w.appendChild(d),d},e.remove=function(){e.status=null,T(document.documentElement,"nprogress-busy"),T(e.getParent(),"nprogress-custom-parent");var u=e.getElement();u&&j(u)},e.isRendered=function(){return!!e.getElement()},e.getPositioningCSS=function(){var u=document.body.style,d="WebkitTransform"in u?"Webkit":"MozTransform"in u?"Moz":"msTransform"in u?"ms":"OTransform"in u?"O":"";return d+"Perspective"in u?"translate3d":d+"Transform"in u?"translate":"margin"};function r(u,d,s){return u<d?d:u>s?s:u}function o(u){return(-1+u)*100}function v(u,d,s){var b;return t.positionUsing==="translate3d"?b={transform:"translate3d("+o(u)+"%,0,0)"}:t.positionUsing==="translate"?b={transform:"translate("+o(u)+"%,0)"}:b={"margin-left":o(u)+"%"},b.transition="all "+d+"ms "+s,b}var f=function(){var u=[];function d(){var s=u.shift();s&&s(d)}return function(s){u.push(s),u.length==1&&d()}}(),g=function(){var u=["Webkit","O","Moz","ms"],d={};function s(p){return p.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(C,E){return E.toUpperCase()})}function b(p){var C=document.body.style;if(p in C)return p;for(var E=u.length,Q=p.charAt(0).toUpperCase()+p.slice(1),m;E--;)if(m=u[E]+Q,m in C)return m;return p}function w(p){return p=s(p),d[p]||(d[p]=b(p))}function M(p,C,E){C=w(C),p.style[C]=E}return function(p,C){var E=arguments,Q,m;if(E.length==2)for(Q in C)m=C[Q],m!==void 0&&C.hasOwnProperty(Q)&&M(p,Q,m);else M(p,E[1],E[2])}}();function _(u,d){var s=typeof u=="string"?u:P(u);return s.indexOf(" "+d+" ")>=0}function N(u,d){var s=P(u),b=s+d;_(s,d)||(u.className=b.substring(1))}function T(u,d){var s=P(u),b;_(u,d)&&(b=s.replace(" "+d+" "," "),u.className=b.substring(1,b.length-1))}function P(u){return(" "+(u&&u.className||"")+" ").replace(/\s+/gi," ")}function j(u){u&&u.parentNode&&u.parentNode.removeChild(u)}return e})})(nt);var wi=nt.exports;const Gs=At(wi);function Ys({fetchNext:i}={}){const{scroller:n,sortedFiles:e,sortMethod:t,currLocation:r,stackViewEl:o,canLoadNext:v,previewIdx:f,props:g,walker:_,getViewableAreaFiles:N}=re().toRefs(),{state:T}=re(),P=L(!1),j=L(K.defaultGridCellWidth),u=H(()=>j.value+16),d=44,{width:s}=St(o),b=H(()=>~~(s.value/u.value)),w=ye(new Map),M=H(()=>{const O=u.value;return{first:O+(j.value<=160?0:d),second:O}}),p=L(!1),C=async()=>{var O;if(!(p.value||g.value.mode!=="walk"||!v.value))try{p.value=!0,await((O=_.value)==null?void 0:O.next())}finally{p.value=!1}},E=async(O=!1)=>{const k=n.value,R=()=>O?f.value:(k==null?void 0:k.$_endIndex)??0,D=()=>{const B=e.value.length,J=50;return B?i?R()>B-J:R()>B-J&&v.value:!0};for(;D();){await Ue(30);const B=await(i??C)();if(typeof B=="boolean"&&!B)return}};T.useEventListen("loadNextDir",kt(async(O=!1)=>{await E(O),g.value.mode==="walk"&&Q()})),T.useEventListen("viewableAreaFilesChange",()=>{const O=N.value(),k=O.filter(D=>D.is_under_scanned_path&&be(D.name)).map(D=>D.fullpath);Ci.fetchImageTags(k);const R=O.filter(D=>D.is_under_scanned_path&&D.type==="dir"&&!w.has(D.fullpath)).map(D=>D.fullpath);R.length&&_t(R).then(D=>{for(const B in D)if(Object.prototype.hasOwnProperty.call(D,B)){const J=D[B];w.set(B,J)}})}),T.useEventListen("refresh",async()=>{T.eventEmitter.emit("viewableAreaFilesChange")});const Q=ce(()=>T.eventEmitter.emit("viewableAreaFilesChange"),300);ne(r,Q);const m=ce(async()=>{await E(),Q()},150);return{gridItems:b,sortedFiles:e,sortMethodConv:It,moreActionsDropdownShow:P,gridSize:u,sortMethod:t,onScroll:m,loadNextDir:C,loadNextDirLoading:p,canLoadNext:v,itemSize:M,cellWidth:j,dirCoverCache:w}}const qs=new Map,K=Ae(),Zs=Ii(),Ci=Je(),Xs=wt(),er=new BroadcastChannel("iib-image-transfer-bus"),{eventEmitter:tr,useEventListen:ir}=We(),{useHookShareState:re}=mi((i,{images:n})=>{const e=L({tabIdx:-1,paneIdx:-1}),t=H(()=>Et(r.value)),r=L([]),o=H(()=>{var C;return r.value.map(E=>E.curr).slice((C=K.conf)!=null&&C.is_win&&e.value.mode!=="scanned-fixed"?1:0)}),v=H(()=>Tt(...o.value)),f=H(()=>{var C,E;return e.value.mode==="scanned-fixed"?((E=(C=r.value)==null?void 0:C[0])==null?void 0:E.curr)??"":e.value.mode==="walk"?e.value.path??"":r.value.length===1?"/":v.value}),g=L(K.defaultSortingMethod),_=L(e.value.mode=="walk"?new se(e.value.path,g.value):void 0);ne([()=>e.value.mode,()=>e.value.path,g],async([C,E,Q])=>{var m;C==="walk"?(_.value=new se(E,Q),r.value=[{files:[],curr:E}],await Ue(),await((m=_.value)==null?void 0:m.reset()),M.eventEmitter.emit("loadNextDir")):_.value=void 0});const N=ye(new Set);ne(t,()=>N.clear());const T=H(()=>{var m;if(n.value)return n.value;if(_.value)return _.value.images.filter(O=>!N.has(O.fullpath));if(!t.value)return[];const C=((m=t.value)==null?void 0:m.files)??[],E=g.value;return xe((O=>{const k=K.fileTypeFilter;return k.includes("all")||k.length===0?O:O.filter(R=>!!(R.type==="dir"||k.includes("image")&&fe(R.name)||k.includes("video")&&Ke(R.name)||k.includes("audio")&&Ge(R.name)))})(C),E).filter(O=>!N.has(O.fullpath))}),P=L([]),j=L(-1),u=H(()=>_.value?!_.value.isCompleted:!1),d=L(!1),s=L(!1),b=L(),w=()=>{var C,E,Q;return(Q=(E=(C=K.tabList)==null?void 0:C[e.value.tabIdx])==null?void 0:E.panes)==null?void 0:Q[e.value.paneIdx]},M=We();M.useEventListen("selectAll",()=>{console.log(`select all 0 -> ${T.value.length}`),P.value=gi(0,T.value.length)});const p=()=>{const C=b.value;if(C){const E=Math.max(C.$_startIndex-10,0);return T.value.slice(E,C.$_endIndex+10)}return[]};return{previewing:s,spinning:d,canLoadNext:u,multiSelectedIdxs:P,previewIdx:j,basePath:o,currLocation:f,currPage:t,stack:r,sortMethod:g,sortedFiles:T,scroller:b,stackViewEl:L(),props:e,getPane:w,walker:_,deletedFiles:N,getViewableAreaFiles:p,...M}},()=>({images:L()}));function nr(){const{eventEmitter:i,multiSelectedIdxs:n,sortedFiles:e}=re().toRefs();return{onSelectAll:()=>i.value.emit("selectAll"),onReverseSelect:()=>{n.value=e.value.map((v,f)=>f).filter(v=>!n.value.includes(v))},onClearAllSelected:()=>{n.value=[]}}}const sr=()=>{const{stackViewEl:i}=re().toRefs(),n=L(-1);return Ct(i,e=>{var r;let t=e.target;for(;t.parentElement;)if(t=t.parentElement,t.tagName.toLowerCase()==="li"&&t.classList.contains("file-item-trigger")){const o=(r=t.dataset)==null?void 0:r.idx;o&&Number.isSafeInteger(+o)&&(n.value=+o);return}}),{showMenuIdx:n}};function Ei(){var i=window.navigator.userAgent,n=i.indexOf("MSIE ");if(n>0)return parseInt(i.substring(n+5,i.indexOf(".",n)),10);var e=i.indexOf("Trident/");if(e>0){var t=i.indexOf("rv:");return parseInt(i.substring(t+3,i.indexOf(".",t)),10)}var r=i.indexOf("Edge/");return r>0?parseInt(i.substring(r+5,i.indexOf(".",r)),10):-1}let te;function ge(){ge.init||(ge.init=!0,te=Ei()!==-1)}var oe={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){ge(),Ye(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const i=document.createElement("object");this._resizeObject=i,i.setAttribute("aria-hidden","true"),i.setAttribute("tabindex",-1),i.onload=this.addResizeHandlers,i.type="text/html",te&&this.$el.appendChild(i),i.data="about:blank",te||this.$el.appendChild(i)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!te&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const Ti=Pt();Se("data-v-b329ee4c");const Pi={class:"resize-observer",tabindex:"-1"};ke();const Oi=Ti((i,n,e,t,r,o)=>(l(),F("div",Pi)));oe.render=Oi;oe.__scopeId="data-v-b329ee4c";oe.__file="src/components/ResizeObserver.vue";function ie(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ie=function(n){return typeof n}:ie=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ie(i)}function Di(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")}function Le(i,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(i,t.key,t)}}function zi(i,n,e){return n&&Le(i.prototype,n),e&&Le(i,e),i}function Ve(i){return Ni(i)||Qi(i)||Mi(i)||$i()}function Ni(i){if(Array.isArray(i))return pe(i)}function Qi(i){if(typeof Symbol<"u"&&Symbol.iterator in Object(i))return Array.from(i)}function Mi(i,n){if(i){if(typeof i=="string")return pe(i,n);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return pe(i,n)}}function pe(i,n){(n==null||n>i.length)&&(n=i.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=i[e];return t}function $i(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bi(i){var n;return typeof i=="function"?n={callback:i}:n=i,n}function Fi(i,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t,r,o,v=function(g){for(var _=arguments.length,N=new Array(_>1?_-1:0),T=1;T<_;T++)N[T-1]=arguments[T];if(o=N,!(t&&g===r)){var P=e.leading;typeof P=="function"&&(P=P(g,r)),(!t||g!==r)&&P&&i.apply(void 0,[g].concat(Ve(o))),r=g,clearTimeout(t),t=setTimeout(function(){i.apply(void 0,[g].concat(Ve(o))),t=0},n)}};return v._clear=function(){clearTimeout(t),t=null},v}function st(i,n){if(i===n)return!0;if(ie(i)==="object"){for(var e in i)if(!st(i[e],n[e]))return!1;return!0}return!1}var Ri=function(){function i(n,e,t){Di(this,i),this.el=n,this.observer=null,this.frozen=!1,this.createObserver(e,t)}return zi(i,[{key:"createObserver",value:function(e,t){var r=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=Bi(e),this.callback=function(f,g){r.options.callback(f,g),f&&r.options.once&&(r.frozen=!0,r.destroyObserver())},this.callback&&this.options.throttle){var o=this.options.throttleOptions||{},v=o.leading;this.callback=Fi(this.callback,this.options.throttle,{leading:function(g){return v==="both"||v==="visible"&&g||v==="hidden"&&!g}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(f){var g=f[0];if(f.length>1){var _=f.find(function(T){return T.isIntersecting});_&&(g=_)}if(r.callback){var N=g.isIntersecting&&g.intersectionRatio>=r.threshold;if(N===r.oldResult)return;r.oldResult=N,r.callback(N,g)}},this.options.intersection),Ye(function(){r.observer&&r.observer.observe(r.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),i}();function rt(i,n,e){var t=n.value;if(t)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var r=new Ri(i,t,e);i._vue_visibilityState=r}}function Li(i,n,e){var t=n.value,r=n.oldValue;if(!st(t,r)){var o=i._vue_visibilityState;if(!t){ot(i);return}o?o.createObserver(t,e):rt(i,{value:t},e)}}function ot(i){var n=i._vue_visibilityState;n&&(n.destroyObserver(),delete i._vue_visibilityState)}var Vi={beforeMount:rt,updated:Li,unmounted:ot},ji={itemsLimit:1e3},Hi=/(auto|scroll)/;function lt(i,n){return i.parentNode===null?n:lt(i.parentNode,n.concat([i]))}var ue=function(n,e){return getComputedStyle(n,null).getPropertyValue(e)},xi=function(n){return ue(n,"overflow")+ue(n,"overflow-y")+ue(n,"overflow-x")},Ui=function(n){return Hi.test(xi(n))};function je(i){if(i instanceof HTMLElement||i instanceof SVGElement){for(var n=lt(i.parentNode,[]),e=0;e<n.length;e+=1)if(Ui(n[e]))return n[e];return document.scrollingElement||document.documentElement}}function me(i){"@babel/helpers - typeof";return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},me(i)}var Ji={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(n){return["vertical","horizontal"].includes(n)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function Wi(){return this.items.length&&me(this.items[0])!=="object"}var ve=!1;if(typeof window<"u"){ve=!1;try{var Ki=Object.defineProperty({},"passive",{get:function(){ve=!0}});window.addEventListener("test",null,Ki)}catch{}}let Gi=0;var at={name:"RecycleScroller",components:{ResizeObserver:oe},directives:{ObserveVisibility:Vi},props:{...Ji,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const i={"-1":{accumulator:0}},n=this.items,e=this.sizeField,t=this.minItemSize;let r=1e4,o=0,v;for(let f=0,g=n.length;f<g;f++)v=n[f][e]||t,v<r&&(r=v),o+=v,i[f]={accumulator:o,size:v};return this.$_computedMinItemSize=r,i}return[]},simpleArray:Wi,itemIndexByKey(){const{keyField:i,items:n}=this,e={};for(let t=0,r=n.length;t<r;t++)e[n[t][i]]=t;return e}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const i=this.$_lastUpdateScrollPosition;typeof i=="number"&&this.$nextTick(()=>{this.scrollToPosition(i)})},beforeUnmount(){this.removeListeners()},methods:{addView(i,n,e,t,r){const o=Ot({id:Gi++,index:n,used:!0,key:t,type:r}),v=Dt({item:e,position:0,nr:o});return i.push(v),v},unuseView(i,n=!1){const e=this.$_unusedViews,t=i.nr.type;let r=e.get(t);r||(r=[],e.set(t,r)),r.push(i),n||(i.nr.used=!1,i.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(i){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const n=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:e}=this.updateVisibleItems(!1,!0);e||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});n(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&n()},this.updateInterval))}},handleVisibilityChange(i,n){this.ready&&(i||n.boundingClientRect.width!==0||n.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(i,n=!1){const e=this.itemSize,t=this.gridItems||1,r=this.itemSecondarySize||e,o=this.$_computedMinItemSize,v=this.typeField,f=this.simpleArray?null:this.keyField,g=this.items,_=g.length,N=this.sizes,T=this.$_views,P=this.$_unusedViews,j=this.pool,u=this.itemIndexByKey;let d,s,b,w,M;if(!_)d=s=w=M=b=0;else if(this.$_prerender)d=w=0,s=M=Math.min(this.prerender,g.length),b=null;else{const k=this.getScroll();if(n){let B=k.start-this.$_lastUpdateScrollPosition;if(B<0&&(B=-B),e===null&&B<o||B<e)return{continuous:!0}}this.$_lastUpdateScrollPosition=k.start;const R=this.buffer;k.start-=R,k.end+=R;let D=0;if(this.$refs.before&&(D=this.$refs.before.scrollHeight,k.start-=D),this.$refs.after){const B=this.$refs.after.scrollHeight;k.end+=B}if(e===null){let B,J=0,Pe=_-1,U=~~(_/2),Oe;do Oe=U,B=N[U].accumulator,B<k.start?J=U:U<_-1&&N[U+1].accumulator>k.start&&(Pe=U),U=~~((J+Pe)/2);while(U!==Oe);for(U<0&&(U=0),d=U,b=N[_-1].accumulator,s=U;s<_&&N[s].accumulator<k.end;s++);for(s===-1?s=g.length-1:(s++,s>_&&(s=_)),w=d;w<_&&D+N[w].accumulator<k.start;w++);for(M=w;M<_&&D+N[M].accumulator<k.end;M++);}else{d=~~(k.start/e*t);const B=d%t;d-=B,s=Math.ceil(k.end/e*t),w=Math.max(0,Math.floor((k.start-D)/e*t)),M=Math.floor((k.end-D)/e*t),d<0&&(d=0),s>_&&(s=_),w<0&&(w=0),M>_&&(M=_),b=Math.ceil(_/t)*e}}s-d>ji.itemsLimit&&this.itemsLimitError(),this.totalSize=b;let p;const C=d<=this.$_endIndex&&s>=this.$_startIndex;if(C)for(let k=0,R=j.length;k<R;k++)p=j[k],p.nr.used&&(i&&(p.nr.index=u[p.item[f]]),(p.nr.index==null||p.nr.index<d||p.nr.index>=s)&&this.unuseView(p));const E=C?null:new Map;let Q,m,O;for(let k=d;k<s;k++){Q=g[k];const R=f?Q[f]:Q;if(R==null)throw new Error(`Key is ${R} on item (keyField is '${f}')`);if(p=T.get(R),!e&&!N[k].size){p&&this.unuseView(p);continue}m=Q[v];let D=P.get(m),B=!1;if(!p)C?D&&D.length?p=D.pop():p=this.addView(j,k,Q,R,m):(O=E.get(m)||0,(!D||O>=D.length)&&(p=this.addView(j,k,Q,R,m),this.unuseView(p,!0),D=P.get(m)),p=D[O],E.set(m,O+1)),T.delete(p.nr.key),p.nr.used=!0,p.nr.index=k,p.nr.key=R,p.nr.type=m,T.set(R,p),B=!0;else if(!p.nr.used&&(p.nr.used=!0,p.nr.index=k,B=!0,D)){const J=D.indexOf(p);J!==-1&&D.splice(J,1)}p.item=Q,B&&(k===g.length-1&&this.$emit("scroll-end"),k===0&&this.$emit("scroll-start")),e===null?(p.position=N[k-1].accumulator,p.offset=0):(p.position=Math.floor(k/t)*e,p.offset=k%t*r)}return this.$_startIndex=d,this.$_endIndex=s,this.emitUpdate&&this.$emit("update",d,s,w,M),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:C}},getListenerTarget(){let i=je(this.$el);return window.document&&(i===window.document.documentElement||i===window.document.body)&&(i=window),i},getScroll(){const{$el:i,direction:n}=this,e=n==="vertical";let t;if(this.pageMode){const r=i.getBoundingClientRect(),o=e?r.height:r.width;let v=-(e?r.top:r.left),f=e?window.innerHeight:window.innerWidth;v<0&&(f+=v,v=0),v+f>o&&(f=o-v),t={start:v,end:v+f}}else e?t={start:i.scrollTop,end:i.scrollTop+i.clientHeight}:t={start:i.scrollLeft,end:i.scrollLeft+i.clientWidth};return t},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,ve?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(i){let n;const e=this.gridItems||1;this.itemSize===null?n=i>0?this.sizes[i-1].accumulator:0:n=Math.floor(i/e)*this.itemSize,this.scrollToPosition(n)},scrollToPosition(i){const n=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let e,t,r;if(this.pageMode){const o=je(this.$el),v=o.tagName==="HTML"?0:o[n.scroll],f=o.getBoundingClientRect(),_=this.$el.getBoundingClientRect()[n.start]-f[n.start];e=o,t=n.scroll,r=i+v+_}else e=this.$el,t=n.scroll,r=i;e[t]=r},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((i,n)=>i.nr.index-n.nr.index)}}};const Yi={key:0,ref:"before",class:"vue-recycle-scroller__slot"},qi={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function Zi(i,n,e,t,r,o){const v=zt("ResizeObserver"),f=Nt("observe-visibility");return Qt((l(),c("div",{class:W(["vue-recycle-scroller",{ready:r.ready,"page-mode":e.pageMode,[`direction-${i.direction}`]:!0}]),onScrollPassive:n[0]||(n[0]=(...g)=>o.handleScroll&&o.handleScroll(...g))},[i.$slots.before?(l(),c("div",Yi,[Z(i.$slots,"before")],512)):y("v-if",!0),(l(),F(ze(e.listTag),{ref:"wrapper",style:qe({[i.direction==="vertical"?"minHeight":"minWidth"]:r.totalSize+"px"}),class:W(["vue-recycle-scroller__item-wrapper",e.listClass])},{default:A(()=>[(l(!0),c(V,null,x(r.pool,g=>(l(),F(ze(e.itemTag),Mt({key:g.nr.id,style:r.ready?{transform:`translate${i.direction==="vertical"?"Y":"X"}(${g.position}px) translate${i.direction==="vertical"?"X":"Y"}(${g.offset}px)`,width:e.gridItems?`${i.direction==="vertical"&&e.itemSecondarySize||e.itemSize}px`:void 0,height:e.gridItems?`${i.direction==="horizontal"&&e.itemSecondarySize||e.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[e.itemClass,{hover:!e.skipHover&&r.hoverKey===g.nr.key}]]},$t(e.skipHover?{}:{mouseenter:()=>{r.hoverKey=g.nr.key},mouseleave:()=>{r.hoverKey=null}})),{default:A(()=>[Z(i.$slots,"default",{item:g.item,index:g.nr.index,active:g.nr.used})]),_:2},1040,["style","class"]))),128)),Z(i.$slots,"empty")]),_:3},8,["style","class"])),i.$slots.after?(l(),c("div",qi,[Z(i.$slots,"after")],512)):y("v-if",!0),I(v,{onNotify:o.handleResize},null,8,["onNotify"])],34)),[[f,o.handleVisibilityChange]])}at.render=Zi;at.__file="src/components/RecycleScroller.vue";const He=_e({__name:"ContextMenu",props:{file:{},idx:{},selectedTag:{},isSelectedMutilFiles:{type:Boolean}},emits:["contextMenuClick"],setup(i,{emit:n}){const e=i,t=Ae(),r=H(()=>{var o;return(((o=t.conf)==null?void 0:o.all_custom_tags)??[]).reduce((v,f)=>[...v,{...f,selected:!!e.selectedTag.find(g=>g.id===f.id)}],[])});return(o,v)=>{const f=Ze,g=Bt,_=Ft,N=Xe;return l(),F(N,{onClick:v[0]||(v[0]=T=>n("contextMenuClick",T,o.file,o.idx))},{default:A(()=>{var T;return[I(f,{key:"deleteFiles"},{default:A(()=>[S(h(o.$t("deleteSelected")),1)]),_:1}),I(f,{key:"openWithDefaultApp"},{default:A(()=>[S(h(o.$t("openWithDefaultApp")),1)]),_:1}),I(f,{key:"saveSelectedAsJson"},{default:A(()=>[S(h(o.$t("saveSelectedAsJson")),1)]),_:1}),o.file.type==="dir"?(l(),c(V,{key:0},[I(f,{key:"openInNewTab"},{default:A(()=>[S(h(o.$t("openInNewTab")),1)]),_:1}),I(f,{key:"openOnTheRight"},{default:A(()=>[S(h(o.$t("openOnTheRight")),1)]),_:1}),I(f,{key:"openWithWalkMode"},{default:A(()=>[S(h(o.$t("openWithWalkMode")),1)]),_:1})],64)):y("",!0),o.file.type==="file"?(l(),c(V,{key:1},[$(be)(o.file.name)?(l(),c(V,{key:0},[I(f,{key:"viewGenInfo"},{default:A(()=>[S(h(o.$t("viewGenerationInfo")),1)]),_:1}),I(f,{key:"tiktokView"},{default:A(()=>[S(h(o.$t("tiktokView")),1)]),_:1}),I(g),((T=$(t).conf)==null?void 0:T.launch_mode)!=="server"?(l(),c(V,{key:0},[I(f,{key:"send2txt2img"},{default:A(()=>[S(h(o.$t("sendToTxt2img")),1)]),_:1}),I(f,{key:"send2img2img"},{default:A(()=>[S(h(o.$t("sendToImg2img")),1)]),_:1}),I(f,{key:"send2inpaint"},{default:A(()=>[S(h(o.$t("sendToInpaint")),1)]),_:1}),I(f,{key:"send2extras"},{default:A(()=>[S(h(o.$t("sendToExtraFeatures")),1)]),_:1}),I(_,{key:"sendToThirdPartyExtension",title:o.$t("sendToThirdPartyExtension")},{default:A(()=>[I(f,{key:"send2controlnet-txt2img"},{default:A(()=>[S("ControlNet - "+h(o.$t("t2i")),1)]),_:1}),I(f,{key:"send2controlnet-img2img"},{default:A(()=>[S("ControlNet - "+h(o.$t("i2i")),1)]),_:1}),I(f,{key:"send2outpaint"},{default:A(()=>[S("openOutpaint")]),_:1})]),_:1},8,["title"])],64)):y("",!0),I(f,{key:"send2BatchDownload"},{default:A(()=>[S(h(o.$t("sendToBatchDownload")),1)]),_:1}),I(_,{key:"copy2target",title:o.$t("copyTo")},{default:A(()=>[(l(!0),c(V,null,x($(t).quickMovePaths,P=>(l(),F(f,{key:`copy-to-${P.dir}`},{default:A(()=>[S(h(P.zh),1)]),_:2},1024))),128))]),_:1},8,["title"]),I(_,{key:"move2target",title:o.$t("moveTo")},{default:A(()=>[(l(!0),c(V,null,x($(t).quickMovePaths,P=>(l(),F(f,{key:`move-to-${P.dir}`},{default:A(()=>[S(h(P.zh),1)]),_:2},1024))),128))]),_:1},8,["title"]),I(g),o.isSelectedMutilFiles?(l(),c(V,{key:1},[I(_,{key:"batch-add-tag",title:o.$t("batchAddTag")},{default:A(()=>[I(f,{key:"add-custom-tag"},{default:A(()=>[S("+ "+h(o.$t("addNewCustomTag")),1)]),_:1}),(l(!0),c(V,null,x(r.value,P=>(l(),F(f,{key:`batch-add-tag-${P.id}`},{default:A(()=>[S(h(P.name),1)]),_:2},1024))),128))]),_:1},8,["title"]),I(_,{key:"batch-remove-tag",title:o.$t("batchRemoveTag")},{default:A(()=>[(l(!0),c(V,null,x(r.value,P=>(l(),F(f,{key:`batch-remove-tag-${P.id}`},{default:A(()=>[S(h(P.name),1)]),_:2},1024))),128))]),_:1},8,["title"])],64)):(l(),F(_,{key:"toggle-tag",title:o.$t("toggleTag")},{default:A(()=>[I(f,{key:"add-custom-tag"},{default:A(()=>[S("+ "+h(o.$t("addNewCustomTag")),1)]),_:1}),(l(!0),c(V,null,x(r.value,P=>(l(),F(f,{key:`toggle-tag-${P.id}`},{default:A(()=>[S(h(P.name)+" ",1),P.selected?(l(),F($(tt),{key:0})):(l(),F($(it),{key:1}))]),_:2},1024))),128))]),_:1},8,["title"])),I(g),I(f,{key:"openFileLocationInNewTab"},{default:A(()=>[S(h(o.$t("openFileLocationInNewTab")),1)]),_:1}),I(f,{key:"openWithLocalFileBrowser"},{default:A(()=>[S(h(o.$t("openWithLocalFileBrowser")),1)]),_:1})],64)):y("",!0),I(g),I(f,{key:"rename"},{default:A(()=>[S(h(o.$t("rename")),1)]),_:1}),I(f,{key:"previewInNewWindow"},{default:A(()=>[S(h(o.$t("previewInNewWindow")),1)]),_:1}),I(f,{key:"download"},{default:A(()=>[S(h(o.$t("download")),1)]),_:1}),I(f,{key:"copyPreviewUrl"},{default:A(()=>[S(h(o.$t("copySourceFilePreviewLink")),1)]),_:1}),I(f,{key:"copyFilePath"},{default:A(()=>[S(h(o.$t("copyFilePath")),1)]),_:1})],64)):y("",!0)]}),_:1})}}}),z=i=>(Se("data-v-78cd67a3"),i=i(),ke(),i),Xi={class:"changeIndicatorWrapper"},en={key:0,class:"changeIndicatorsLeft changeIndicators"},tn={key:0,class:"promptChangeIndicator changeIndicator"},nn={key:1,class:"negpromptChangeIndicator changeIndicator"},sn={key:2,class:"seedChangeIndicator changeIndicator"},rn={key:3,class:"stepsChangeIndicator changeIndicator"},on={key:4,class:"cfgChangeIndicator changeIndicator"},ln={key:5,class:"sizeChangeIndicator changeIndicator"},an={key:6,class:"modelChangeIndicator changeIndicator"},un={key:7,class:"samplerChangeIndicator changeIndicator"},dn={key:8,class:"otherChangeIndicator changeIndicator"},cn={class:"hoverOverlay"},fn=z(()=>a("strong",null,"This file",-1)),hn=z(()=>a("br",null,null,-1)),gn=z(()=>a("br",null,null,-1)),pn={key:0},mn=z(()=>a("td",null,[a("span",{class:"promptChangeIndicator"},"+ Prompt")],-1)),vn={key:1},yn=z(()=>a("td",null,[a("span",{class:"negpromptChangeIndicator"},"- Prompt")],-1)),bn={key:2},An=z(()=>a("td",null,[a("span",{class:"seedChangeIndicator"},"Seed")],-1)),Sn={key:3},kn=z(()=>a("td",null,[a("span",{class:"stepsChangeIndicator"},"Steps")],-1)),_n={key:4},In=z(()=>a("td",null,[a("span",{class:"cfgChangeIndicator"},"Cfg Scale")],-1)),wn={key:5},Cn=z(()=>a("td",null,[a("span",{class:"sizeChangeIndicator"},"Size")],-1)),En={key:6},Tn=z(()=>a("td",null,[a("span",{class:"modelChangeIndicator"},"Model")],-1)),Pn=z(()=>a("br",null,null,-1)),On={key:7},Dn=z(()=>a("td",null,[a("span",{class:"samplerChangeIndicator"},"Sampler")],-1)),zn=z(()=>a("br",null,null,-1)),Nn=z(()=>a("br",null,null,-1)),Qn={key:0},Mn=z(()=>a("span",{class:"otherChangeIndicator"},"Other",-1)),$n=z(()=>a("br",null,null,-1)),Bn=z(()=>a("br",null,null,-1)),Fn={key:1,class:"changeIndicatorsRight changeIndicators"},Rn={key:0,class:"promptChangeIndicator changeIndicator"},Ln={key:1,class:"negpromptChangeIndicator changeIndicator"},Vn={key:2,class:"seedChangeIndicator changeIndicator"},jn={key:3,class:"stepsChangeIndicator changeIndicator"},Hn={key:4,class:"cfgChangeIndicator changeIndicator"},xn={key:5,class:"sizeChangeIndicator changeIndicator"},Un={key:6,class:"modelChangeIndicator changeIndicator"},Jn={key:7,class:"samplerChangeIndicator changeIndicator"},Wn={key:8,class:"otherChangeIndicator changeIndicator"},Kn={class:"hoverOverlay"},Gn=z(()=>a("strong",null,"This file",-1)),Yn=z(()=>a("br",null,null,-1)),qn=z(()=>a("br",null,null,-1)),Zn={key:0},Xn=z(()=>a("td",null,[a("span",{class:"promptChangeIndicator"},"+ Prompt")],-1)),es={key:1},ts=z(()=>a("td",null,[a("span",{class:"negpromptChangeIndicator"},"- Prompt")],-1)),is={key:2},ns=z(()=>a("td",null,[a("span",{class:"seedChangeIndicator"},"Seed")],-1)),ss={key:3},rs=z(()=>a("td",null,[a("span",{class:"stepsChangeIndicator"},"Steps")],-1)),os={key:4},ls=z(()=>a("td",null,[a("span",{class:"cfgChangeIndicator"},"Cfg Scale")],-1)),as={key:5},us=z(()=>a("td",null,[a("span",{class:"sizeChangeIndicator"},"Size")],-1)),ds={key:6},cs=z(()=>a("td",null,[a("span",{class:"modelChangeIndicator"},"Model")],-1)),fs=z(()=>a("br",null,null,-1)),hs={key:7},gs=z(()=>a("td",null,[a("span",{class:"samplerChangeIndicator"},"Sampler")],-1)),ps=z(()=>a("br",null,null,-1)),ms=z(()=>a("br",null,null,-1)),vs={key:0},ys=z(()=>a("span",{class:"otherChangeIndicator"},"Other",-1)),bs=z(()=>a("br",null,null,-1)),As=z(()=>a("br",null,null,-1)),Ss=_e({__name:"ChangeIndicator",props:{genDiffToPrevious:{},genDiffToNext:{},genInfo:{}},setup(i){function n(t){const r=["prompt","negativePrompt","seed","steps","cfgScale","size","Model","others"],o=Object.keys(t).filter(v=>!r.includes(v));return Object.fromEntries(o.map(v=>[v,t[v]]))}function e(t){return Object.keys(n(t)).length>0}return(t,r)=>(l(),c("div",Xi,[t.genDiffToPrevious.empty?y("",!0):(l(),c("div",en,["prompt"in t.genDiffToPrevious.diff?(l(),c("div",tn,"P+")):y("",!0),"negativePrompt"in t.genDiffToPrevious.diff?(l(),c("div",nn,"P-")):y("",!0),"seed"in t.genDiffToPrevious.diff?(l(),c("div",sn,"Se")):y("",!0),"steps"in t.genDiffToPrevious.diff?(l(),c("div",rn,"St")):y("",!0),"cfgScale"in t.genDiffToPrevious.diff?(l(),c("div",on,"Cf")):y("",!0),"size"in t.genDiffToPrevious.diff?(l(),c("div",ln,"Si")):y("",!0),"Model"in t.genDiffToPrevious.diff?(l(),c("div",an,"Mo")):y("",!0),"Sampler"in t.genDiffToPrevious.diff?(l(),c("div",un,"Sa")):y("",!0),e(t.genDiffToPrevious.diff)?(l(),c("div",dn,"Ot")):y("",!0)])),a("div",cn,[a("small",null,[I($(Fe)),fn,S(" vs "+h(t.genDiffToPrevious.otherFile)+" ",1),hn,gn,a("table",null,["prompt"in t.genDiffToPrevious.diff?(l(),c("tr",pn,[mn,a("td",null,h(t.genDiffToPrevious.diff.prompt)+" tokens changed",1)])):y("",!0),"negativePrompt"in t.genDiffToPrevious.diff?(l(),c("tr",vn,[yn,a("td",null,h(t.genDiffToPrevious.diff.negativePrompt)+" tokens changed",1)])):y("",!0),"seed"in t.genDiffToPrevious.diff?(l(),c("tr",bn,[An,a("td",null,[a("strong",null,h(t.genDiffToPrevious.diff.seed[0]),1),S(" vs "+h(t.genDiffToPrevious.diff.seed[1]),1)])])):y("",!0),"steps"in t.genDiffToPrevious.diff?(l(),c("tr",Sn,[kn,a("td",null,[a("strong",null,h(t.genDiffToPrevious.diff.steps[0]),1),S(" vs "+h(t.genDiffToPrevious.diff.steps[1]),1)])])):y("",!0),"cfgScale"in t.genDiffToPrevious.diff?(l(),c("tr",_n,[In,a("td",null,[a("strong",null,h(t.genDiffToPrevious.diff.cfgScale[0]),1),S(" vs "+h(t.genDiffToPrevious.diff.cfgScale[1]),1)])])):y("",!0),"size"in t.genDiffToPrevious.diff?(l(),c("tr",wn,[Cn,a("td",null,[a("strong",null,h(t.genDiffToPrevious.diff.size[0]),1),S(" vs "+h(t.genDiffToPrevious.diff.size[1]),1)])])):y("",!0),"Model"in t.genDiffToPrevious.diff?(l(),c("tr",En,[Tn,a("td",null,[a("strong",null,h(t.genDiffToPrevious.diff.Model[0]),1),Pn,S(" vs "+h(t.genDiffToPrevious.diff.Model[1]),1)])])):y("",!0),"Sampler"in t.genDiffToPrevious.diff?(l(),c("tr",On,[Dn,a("td",null,[a("strong",null,h(t.genDiffToPrevious.diff.Sampler[0]),1),zn,S(" vs "+h(t.genDiffToPrevious.diff.Sampler[1]),1)])])):y("",!0)]),Nn,e(t.genDiffToPrevious.diff)?(l(),c("div",Qn,[Mn,S(" props that changed:"),$n,Bn,a("ul",null,[(l(!0),c(V,null,x(n(t.genDiffToPrevious.diff),(o,v)=>(l(),c("li",null,h(v),1))),256))])])):y("",!0)])]),t.genDiffToNext.empty?y("",!0):(l(),c("div",Fn,["prompt"in t.genDiffToNext.diff?(l(),c("div",Rn,"P+")):y("",!0),"negativePrompt"in t.genDiffToNext.diff?(l(),c("div",Ln,"P-")):y("",!0),"seed"in t.genDiffToNext.diff?(l(),c("div",Vn,"Se")):y("",!0),"steps"in t.genDiffToNext.diff?(l(),c("div",jn,"St")):y("",!0),"cfgScale"in t.genDiffToNext.diff?(l(),c("div",Hn,"Cf")):y("",!0),"size"in t.genDiffToNext.diff?(l(),c("div",xn,"Si")):y("",!0),"Model"in t.genDiffToNext.diff?(l(),c("div",Un,"Mo")):y("",!0),"Sampler"in t.genDiffToNext.diff?(l(),c("div",Jn,"Sa")):y("",!0),e(t.genDiffToNext.diff)?(l(),c("div",Wn,"Ot")):y("",!0)])),a("div",Kn,[a("small",null,[I($(Fe)),Gn,S(" vs "+h(t.genDiffToNext.otherFile)+" ",1),Yn,qn,a("table",null,["prompt"in t.genDiffToNext.diff?(l(),c("tr",Zn,[Xn,a("td",null,h(t.genDiffToNext.diff.prompt)+" tokens changed",1)])):y("",!0),"negativePrompt"in t.genDiffToNext.diff?(l(),c("tr",es,[ts,a("td",null,h(t.genDiffToNext.diff.negativePrompt)+" tokens changed",1)])):y("",!0),"seed"in t.genDiffToNext.diff?(l(),c("tr",is,[ns,a("td",null,[a("strong",null,h(t.genDiffToNext.diff.seed[0]),1),S(" vs "+h(t.genDiffToNext.diff.seed[1]),1)])])):y("",!0),"steps"in t.genDiffToNext.diff?(l(),c("tr",ss,[rs,a("td",null,[a("strong",null,h(t.genDiffToNext.diff.steps[0]),1),S(" vs "+h(t.genDiffToNext.diff.steps[1]),1)])])):y("",!0),"cfgScale"in t.genDiffToNext.diff?(l(),c("tr",os,[ls,a("td",null,[a("strong",null,h(t.genDiffToNext.diff.cfgScale[0]),1),S(" vs "+h(t.genDiffToNext.diff.cfgScale[1]),1)])])):y("",!0),"size"in t.genDiffToNext.diff?(l(),c("tr",as,[us,a("td",null,[a("strong",null,h(t.genDiffToNext.diff.size[0]),1),S(" vs "+h(t.genDiffToNext.diff.size[1]),1)])])):y("",!0),"Model"in t.genDiffToNext.diff?(l(),c("tr",ds,[cs,a("td",null,[a("strong",null,h(t.genDiffToNext.diff.Model[0]),1),fs,S(" vs "+h(t.genDiffToNext.diff.Model[1]),1)])])):y("",!0),"Sampler"in t.genDiffToNext.diff?(l(),c("tr",hs,[gs,a("td",null,[a("strong",null,h(t.genDiffToNext.diff.Sampler[0]),1),ps,S(" vs "+h(t.genDiffToNext.diff.Sampler[1]),1)])])):y("",!0)]),ms,e(t.genDiffToNext.diff)?(l(),c("div",vs,[ys,S(" props that changed:"),bs,As,a("ul",null,[(l(!0),c(V,null,x(n(t.genDiffToNext.diff),(o,v)=>(l(),c("li",null,h(v),1))),256))])])):y("",!0)])])]))}});const ks=et(Ss,[["__scopeId","data-v-78cd67a3"]]),_s=i=>(Se("data-v-0f74bba6"),i=i(),ke(),i),Is=["data-idx"],ws={key:1,class:"more"},Cs={class:"float-btn-wrap"},Es={key:1,class:"tags-container"},Ts=["url"],Ps={class:"play-icon"},Os=["src"],Ds={key:0,class:"tags-container"},zs=_s(()=>a("div",{class:"audio-icon"},"",-1)),Ns={key:0,class:"tags-container"},Qs={key:5,class:"preview-icon-wrap"},Ms={key:1,class:"dir-cover-container"},$s=["src"],Bs={key:6,class:"profile"},Fs=["title"],Rs={class:"basic-info"},Ls={style:{"margin-right":"4px"}},ee=160,Vs=_e({__name:"FileItem",props:{file:{},idx:{},selected:{type:Boolean,default:!1},showMenuIdx:{},cellWidth:{},fullScreenPreviewImageUrl:{},enableRightClickMenu:{type:Boolean,default:!0},enableCloseIcon:{type:Boolean,default:!1},isSelectedMutilFiles:{type:Boolean},genInfo:{},enableChangeIndicator:{type:Boolean},extraTags:{},coverFiles:{},getGenDiff:{},getGenDiffWatchDep:{}},emits:["update:showMenuIdx","fileItemClick","dragstart","dragend","previewVisibleChange","contextMenuClick","close-icon-click","tiktokView"],setup(i,{emit:n}){const e=i;Rt(s=>({"5a16e08d":s.$props.cellWidth+"px"}));const t=Ae(),r=Je(),o=L(),v=L(),f=ce(()=>{const{getGenDiff:s,file:b,idx:w}=e;s&&(v.value=s(b.gen_info_obj,w,1,b),o.value=s(b.gen_info_obj,w,-1,b))},200+100*Math.random());ne(()=>{var s;return(s=e.getGenDiffWatchDep)==null?void 0:s.call(e,e.idx)},()=>{f()},{immediate:!0,deep:!0});const g=H(()=>r.tagMap.get(e.file.fullpath)??[]),_=H(()=>{const s=t.gridThumbnailResolution;return t.enableThumbnail?Ne(e.file,[s,s].join("x")):Lt(e.file)}),N=H(()=>{var s;return(((s=t.conf)==null?void 0:s.all_custom_tags)??[]).reduce((b,w)=>[...b,{...w,selected:!!g.value.find(M=>M.id===w.id)}],[])}),T=H(()=>N.value.find(s=>s.type==="custom"&&s.name==="like")),P=()=>{de(T.value),n("contextMenuClick",{key:`toggle-tag-${T.value.id}`},e.file,e.idx)},j=s=>{t.magicSwitchTiktokView&&e.file.type==="file"&&fe(e.file.name)?(s.stopPropagation(),s.preventDefault(),n("tiktokView",e.file,e.idx),setTimeout(()=>{Ut()},500)):n("fileItemClick",s,e.file,e.idx)},u=()=>{t.magicSwitchTiktokView?n("tiktokView",e.file,e.idx):Jt(e.file,s=>n("contextMenuClick",{key:`toggle-tag-${s}`},e.file,e.idx),()=>n("tiktokView",e.file,e.idx))},d=()=>{t.magicSwitchTiktokView?n("tiktokView",e.file,e.idx):Wt(e.file,s=>n("contextMenuClick",{key:`toggle-tag-${s}`},e.file,e.idx),()=>n("tiktokView",e.file,e.idx))};return(s,b)=>{const w=G,M=Ze,p=Xe,C=Kt,E=Yt;return l(),F(w,{trigger:["contextmenu"],visible:$(t).longPressOpenContextMenu?typeof s.idx=="number"&&s.showMenuIdx===s.idx:void 0,"onUpdate:visible":b[7]||(b[7]=Q=>typeof s.idx=="number"&&n("update:showMenuIdx",Q?s.idx:-1))},{overlay:A(()=>[s.enableRightClickMenu?(l(),F(He,{key:0,file:s.file,idx:s.idx,"selected-tag":g.value,onContextMenuClick:b[6]||(b[6]=(Q,m,O)=>n("contextMenuClick",Q,m,O)),"is-selected-mutil-files":s.isSelectedMutilFiles},null,8,["file","idx","selected-tag","is-selected-mutil-files"])):y("",!0)]),default:A(()=>{var Q;return[(l(),c("li",{class:W(["file file-item-trigger grid",{clickable:s.file.type==="dir",selected:s.selected}]),"data-idx":s.idx,key:s.file.name,draggable:"true",onDragstart:b[3]||(b[3]=m=>n("dragstart",m,s.idx)),onDragend:b[4]||(b[4]=m=>n("dragend",m,s.idx)),onClickCapture:b[5]||(b[5]=m=>j(m))},[a("div",null,[s.enableCloseIcon?(l(),c("div",{key:0,class:"close-icon",onClick:b[0]||(b[0]=m=>n("close-icon-click"))},[I($(Vt))])):y("",!0),s.enableRightClickMenu?(l(),c("div",ws,[I(w,null,{overlay:A(()=>[I(He,{file:s.file,idx:s.idx,"selected-tag":g.value,onContextMenuClick:b[1]||(b[1]=(m,O,k)=>n("contextMenuClick",m,O,k)),"is-selected-mutil-files":s.isSelectedMutilFiles},null,8,["file","idx","selected-tag","is-selected-mutil-files"])]),default:A(()=>[a("div",Cs,[I($(jt))])]),_:1}),s.file.type==="file"?(l(),F(w,{key:0},{overlay:A(()=>[N.value.length>1?(l(),F(p,{key:0,onClick:b[2]||(b[2]=m=>n("contextMenuClick",m,s.file,s.idx))},{default:A(()=>[(l(!0),c(V,null,x(N.value,m=>(l(),F(M,{key:`toggle-tag-${m.id}`},{default:A(()=>[S(h(m.name)+" ",1),m.selected?(l(),F($(tt),{key:0})):(l(),F($(it),{key:1}))]),_:2},1024))),128))]),_:1})):y("",!0)]),default:A(()=>{var m,O;return[a("div",{class:W(["float-btn-wrap",{"like-selected":(m=T.value)==null?void 0:m.selected}]),onClick:P},[(O=T.value)!=null&&O.selected?(l(),F($(Ht),{key:0})):(l(),F($(xt),{key:1}))],2)]}),_:1})):y("",!0)])):y("",!0),$(fe)(s.file.name)?(l(),c("div",{key:s.file.fullpath,class:W(`idx-${s.idx} item-content`)},[s.enableChangeIndicator&&v.value&&o.value?(l(),F(ks,{key:0,"gen-diff-to-next":v.value,"gen-diff-to-previous":o.value},null,8,["gen-diff-to-next","gen-diff-to-previous"])):y("",!0),I(C,{src:_.value,fallback:$(pi),preview:{src:s.fullScreenPreviewImageUrl,onVisibleChange:(m,O)=>n("previewVisibleChange",m,O)}},null,8,["src","fallback","preview"]),g.value&&s.cellWidth>ee?(l(),c("div",Es,[(l(!0),c(V,null,x(s.extraTags??g.value,m=>(l(),F(E,{key:m.id,color:$(r).getColor(m)},{default:A(()=>[S(h(m.name),1)]),_:2},1032,["color"]))),128))])):y("",!0)],2)):$(Ke)(s.file.name)?(l(),c("div",{key:3,class:W(`idx-${s.idx} item-content video`),url:$(ae)(s.file),style:qe({"background-image":`url('${s.file.cover_url??$(ae)(s.file)}')`}),onClick:u},[a("div",Ps,[a("img",{src:$(_i),style:{width:"40px",height:"40px"}},null,8,Os)]),g.value&&s.cellWidth>ee?(l(),c("div",Ds,[(l(!0),c(V,null,x(g.value,m=>(l(),F(E,{key:m.id,color:$(r).getColor(m)},{default:A(()=>[S(h(m.name),1)]),_:2},1032,["color"]))),128))])):y("",!0)],14,Ts)):$(Ge)(s.file.name)?(l(),c("div",{key:4,class:W(`idx-${s.idx} item-content audio`),onClick:d},[zs,g.value&&s.cellWidth>ee?(l(),c("div",Ns,[(l(!0),c(V,null,x(g.value,m=>(l(),F(E,{key:m.id,color:$(r).getColor(m)},{default:A(()=>[S(h(m.name),1)]),_:2},1032,["color"]))),128))])):y("",!0)],2)):(l(),c("div",Qs,[s.file.type==="file"?(l(),F($(ni),{key:0,class:"icon center"})):(Q=s.coverFiles)!=null&&Q.length&&s.cellWidth>160?(l(),c("div",Ms,[(l(!0),c(V,null,x(s.coverFiles,m=>(l(),c("img",{class:"dir-cover-item",src:m.media_type==="image"?$(Ne)(m):$(ae)(m),key:m.fullpath},null,8,$s))),128))])):(l(),F($(li),{key:2,class:"icon center"}))])),s.cellWidth>ee?(l(),c("div",Bs,[a("div",{class:"name line-clamp-1",title:s.file.name},h(s.file.name),9,Fs),a("div",Rs,[a("div",Ls,h(s.file.type)+" "+h(s.file.size),1),a("div",null,h(s.file.date),1)])])):y("",!0)])],42,Is))]}),_:1},8,["visible"])}}});const rr=et(Vs,[["__scopeId","data-v-0f74bba6"]]);export{rr as F,Gs as N,He as _,Ys as a,sr as b,nr as c,at as d,ir as e,Ii as f,K as g,Xs as h,tr as i,Zs as j,er as k,gi as r,qs as s,Ci as t,re as u};
