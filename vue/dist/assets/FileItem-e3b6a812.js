var pt=Object.defineProperty;var vt=(i,t,e)=>t in i?pt(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var ee=(i,t,e)=>(vt(i,typeof t!="symbol"?t+"":t,e),e);import{d as X,u as Ge,C as x,aj as qe,h as Y,c as b,am as mt,cj as yt,r as L,a$ as bt,V as H,ck as At,P as $e,by as St,A as K,cl as fe,J as oe,ai as _e,bM as kt,c0 as _t,bn as It,cm as Ct,ci as wt,cn as Et,co as Ze,cp as Tt,cq as ce,cr as Pt,aE as Ot,cs as Dt,z as Nt,ct as zt,m as ve,l as le,aO as $t,p as Xe,Y as Ie,bw as et,aG as Mt,cu as tt,cv as Qt,K as Bt,t as Ft,aM as nt,aN as it,aw as st,Q as l,Z as F,cw as Rt,cx as jt,cy as Lt,bs as ie,cz as Ht,ap as xt,R as h,aD as te,W as A,$ as k,a4 as J,bt as Me,bu as Vt,cA as Ut,a3 as rt,ac as W,T as _,U as v,a0 as R,ah as ot,c6 as Jt,c5 as Wt,M as lt,S as u,X as at,c2 as Kt,cB as Qe,ab as Yt,c3 as Gt,cC as qt,cD as Zt,bN as Xt,cE as en,cF as he,cG as tn}from"./index-ac57907e.js";import{i as Be,g as nn,j as sn}from"./functionalCallableComp-bacd8211.js";import{i as rn}from"./_isIterateeCall-a8bdd540.js";import{D as q,a as me}from"./index-e1e78154.js";import"./index-9d56980e.js";var on=function(){return{prefixCls:String,checked:{type:Boolean,default:void 0},onChange:{type:Function},onClick:{type:Function},"onUpdate:checked":Function}},ln=X({compatConfig:{MODE:3},name:"ACheckableTag",props:on(),setup:function(t,e){var n=e.slots,r=e.emit,o=Ge("tag",t),p=o.prefixCls,d=function(O){var I=t.checked;r("update:checked",!I),r("change",!I),r("click",O)},g=x(function(){var y;return qe(p.value,(y={},Y(y,"".concat(p.value,"-checkable"),!0),Y(y,"".concat(p.value,"-checkable-checked"),t.checked),y))});return function(){var y;return b("span",{class:g.value,onClick:d},[(y=n.default)===null||y===void 0?void 0:y.call(n)])}}});const ye=ln;var an=new RegExp("^(".concat(mt.join("|"),")(-inverse)?$")),un=new RegExp("^(".concat(yt.join("|"),")$")),cn=function(){return{prefixCls:String,color:{type:String},closable:{type:Boolean,default:!1},closeIcon:$e.any,visible:{type:Boolean,default:void 0},onClose:{type:Function},"onUpdate:visible":Function,icon:$e.any}},Z=X({compatConfig:{MODE:3},name:"ATag",props:cn(),slots:["closeIcon","icon"],setup:function(t,e){var n=e.slots,r=e.emit,o=e.attrs,p=Ge("tag",t),d=p.prefixCls,g=p.direction,y=L(!0);bt(function(){t.visible!==void 0&&(y.value=t.visible)});var O=function(a){a.stopPropagation(),r("update:visible",!1),r("close",a),!a.defaultPrevented&&t.visible===void 0&&(y.value=!1)},I=x(function(){var $=t.color;return $?an.test($)||un.test($):!1}),w=x(function(){var $;return qe(d.value,($={},Y($,"".concat(d.value,"-").concat(t.color),I.value),Y($,"".concat(d.value,"-has-color"),t.color&&!I.value),Y($,"".concat(d.value,"-hidden"),!y.value),Y($,"".concat(d.value,"-rtl"),g.value==="rtl"),$))});return function(){var $,a,s,c=t.icon,T=c===void 0?($=n.icon)===null||$===void 0?void 0:$.call(n):c,P=t.color,M=t.closeIcon,m=M===void 0?(a=n.closeIcon)===null||a===void 0?void 0:a.call(n):M,C=t.closable,D=C===void 0?!1:C,B=function(){return D?m?b("span",{class:"".concat(d.value,"-close-icon"),onClick:O},[m]):b(St,{class:"".concat(d.value,"-close-icon"),onClick:O},null):null},Q={backgroundColor:P&&!I.value?P:void 0},N=T||null,S=(s=n.default)===null||s===void 0?void 0:s.call(n),j=N?b(H,null,[N,b("span",null,[S])]):S,f="onClick"in o,E=b("span",{class:w.value,style:Q},[j,B()]);return f?b(At,null,{default:function(){return[E]}}):E}}});Z.CheckableTag=ye;Z.install=function(i){return i.component(Z.name,Z),i.component(ye.name,ye),i};const dn=Z;q.Button=me;q.install=function(i){return i.component(q.name,q),i.component(me.name,me),i};var fn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"};const hn=fn;function Fe(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){gn(i,r,e[r])})}return i}function gn(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var Ce=function(t,e){var n=Fe({},t,e.attrs);return b(K,Fe({},n,{icon:hn}),null)};Ce.displayName="StarFilled";Ce.inheritAttrs=!1;const pn=Ce;var vn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"};const mn=vn;function Re(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){yn(i,r,e[r])})}return i}function yn(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var we=function(t,e){var n=Re({},t,e.attrs);return b(K,Re({},n,{icon:mn}),null)};we.displayName="FileOutlined";we.inheritAttrs=!1;const bn=we;var An={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};const Sn=An;function je(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){kn(i,r,e[r])})}return i}function kn(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var Ee=function(t,e){var n=je({},t,e.attrs);return b(K,je({},n,{icon:Sn}),null)};Ee.displayName="FolderOpenOutlined";Ee.inheritAttrs=!1;const _n=Ee;function In(i){return i&&i.length?i[0]:void 0}var Cn=Math.ceil,wn=Math.max;function En(i,t,e,n){for(var r=-1,o=wn(Cn((t-i)/(e||1)),0),p=Array(o);o--;)p[n?o:++r]=i,i+=e;return p}function Tn(i){return function(t,e,n){return n&&typeof n!="number"&&rn(t,e,n)&&(e=n=void 0),t=fe(t),e===void 0?(e=t,t=0):e=fe(e),n=n===void 0?t<e?1:-1:fe(n),En(t,e,n,i)}}var Pn=Tn();const On=Pn,Dn="data:image/png;base64,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",ne=new WeakMap;function Nn(i,t){return{useHookShareState:n=>{const r=It();oe(r),ne.has(r)||(ne.set(r,_e(i(r,n??(t==null?void 0:t())))),kt(()=>{ne.delete(r)}));const o=ne.get(r);return oe(o),{state:o,toRefs(){return _t(o)}}}}}var zn={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"};const $n=zn;function Le(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){Mn(i,r,e[r])})}return i}function Mn(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var Te=function(t,e){var n=Le({},t,e.attrs);return b(K,Le({},n,{icon:$n}),null)};Te.displayName="CaretRightOutlined";Te.inheritAttrs=!1;const He=Te;var Qn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9z"}}]},name:"heart",theme:"filled"};const Bn=Qn;function xe(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){Fn(i,r,e[r])})}return i}function Fn(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var Pe=function(t,e){var n=xe({},t,e.attrs);return b(K,xe({},n,{icon:Bn}),null)};Pe.displayName="HeartFilled";Pe.inheritAttrs=!1;const Rn=Pe;var jn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]},name:"heart",theme:"outlined"};const Ln=jn;function Ve(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){Hn(i,r,e[r])})}return i}function Hn(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var Oe=function(t,e){var n=Ve({},t,e.attrs);return b(K,Ve({},n,{icon:Ln}),null)};Oe.displayName="HeartOutlined";Oe.inheritAttrs=!1;const xn=Oe;var Vn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"};const Un=Vn;function Ue(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){Jn(i,r,e[r])})}return i}function Jn(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var De=function(t,e){var n=Ue({},t,e.attrs);return b(K,Ue({},n,{icon:Un}),null)};De.displayName="StarOutlined";De.inheritAttrs=!1;const Wn=De,Kn="/infinite_image_browsing/fe-static/assets/play-ef9d181b.svg",Yn=Ct("useBatchDownloadStore",()=>{const i=L([]);return{selectdFiles:i,addFiles:e=>{i.value=wt([...i.value,...e])}}});class ae{constructor(t,e=Et.CREATED_TIME_DESC){ee(this,"root");ee(this,"execQueue",[]);ee(this,"walkerInitPromsie");this.entryPath=t,this.sortMethod=e,this.root={children:[],info:{name:this.entryPath,size:"-",bytes:0,created_time:"",is_under_scanned_path:!0,date:"",type:"dir",fullpath:this.entryPath}},this.walkerInitPromsie=new Promise(n=>{Be([this.entryPath]).then(async r=>{this.root.info=r[this.entryPath],await this.fetchChildren(this.root),n()})})}reset(){return this.root.children=[],this.fetchChildren(this.root)}get images(){const t=e=>e.children.map(n=>{if(n.info.type==="dir")return t(n);if(ce(n.info.name))return n.info}).filter(n=>n).flat(1);return t(this.root)}get isCompleted(){return this.execQueue.length===0}async fetchChildren(t){const{files:e}=await nn(t.info.fullpath);return t.children=Ze(e,this.sortMethod).map(n=>({info:n,children:[]})),this.execQueue.shift(),this.execQueue.unshift(...t.children.filter(n=>n.info.type==="dir").map(n=>({fn:()=>this.fetchChildren(n),...n}))),t}async next(){await this.walkerInitPromsie;const t=In(this.execQueue);if(!t)return null;const e=await t.fn();return this.execQueue=this.execQueue.slice(),this.root={...this.root},e}async isExpired(){const t=[this.root.info],e=r=>{for(const o of r.children)o.info.type==="dir"&&(t.push(o.info),e(o))};e(this.root);const n=await Be(t.map(r=>r.fullpath));for(const r of t)if(!Tt(r,n[r.fullpath]))return!0;return!1}async seamlessRefresh(t,e=L(!1)){const n=performance.now(),r=new ae(this.entryPath,this.sortMethod);for(await r.walkerInitPromsie;!r.isCompleted&&r.images.length<t;){if(e.value)throw new Error("canceled");await r.next()}const o=performance.now();return console.log("seamlessRefresh currPos:",t,"Time taken:",(o-n).toFixed(0),"ms"),r}}var ut={exports:{}};/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */(function(i,t){(function(e,n){i.exports=n})(Pt,function(){var e={};e.version="0.3.5";var n=e.settings={minimum:.08,easing:"linear",positionUsing:"",speed:200,trickle:!0,trickleSpeed:200,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};e.configure=function(a){var s,c;for(s in a)c=a[s],c!==void 0&&a.hasOwnProperty(s)&&(n[s]=c);return this},e.status=null,e.set=function(a){var s=e.isStarted();a=r(a,n.minimum,1),e.status=a===1?null:a;var c=e.render(!s),T=c.querySelector(n.barSelector),P=n.speed,M=n.easing;return c.offsetWidth,d(function(m){n.positionUsing===""&&(n.positionUsing=e.getPositioningCSS()),g(T,p(a,P,M)),a===1?(g(c,{transition:"none",opacity:1}),c.offsetWidth,setTimeout(function(){g(c,{transition:"all "+P+"ms linear",opacity:0}),setTimeout(function(){e.remove(),m()},P)},P)):setTimeout(m,P)}),this},e.isStarted=function(){return typeof e.status=="number"},e.start=function(){e.status||e.set(0);var a=function(){setTimeout(function(){e.status&&(e.trickle(),a())},n.trickleSpeed)};return n.trickle&&a(),this},e.done=function(a){return!a&&!e.status?this:e.inc(.3+.5*Math.random()).set(1)},e.inc=function(a){var s=e.status;return s?s>1?void 0:(typeof a!="number"&&(s>=0&&s<.2?a=.1:s>=.2&&s<.5?a=.04:s>=.5&&s<.8?a=.02:s>=.8&&s<.99?a=.005:a=0),s=r(s+a,0,.994),e.set(s)):e.start()},e.trickle=function(){return e.inc()},function(){var a=0,s=0;e.promise=function(c){return!c||c.state()==="resolved"?this:(s===0&&e.start(),a++,s++,c.always(function(){s--,s===0?(a=0,e.done()):e.set((a-s)/a)}),this)}}(),e.getElement=function(){var a=e.getParent();if(a){var s=Array.prototype.slice.call(a.querySelectorAll(".nprogress")).filter(function(c){return c.parentElement===a});if(s.length>0)return s[0]}return null},e.getParent=function(){if(n.parent instanceof HTMLElement)return n.parent;if(typeof n.parent=="string")return document.querySelector(n.parent)},e.render=function(a){if(e.isRendered())return e.getElement();O(document.documentElement,"nprogress-busy");var s=document.createElement("div");s.id="nprogress",s.className="nprogress",s.innerHTML=n.template;var c=s.querySelector(n.barSelector),T=a?"-100":o(e.status||0),P=e.getParent(),M;return g(c,{transition:"all 0 linear",transform:"translate3d("+T+"%,0,0)"}),n.showSpinner||(M=s.querySelector(n.spinnerSelector),M&&$(M)),P!=document.body&&O(P,"nprogress-custom-parent"),P.appendChild(s),s},e.remove=function(){e.status=null,I(document.documentElement,"nprogress-busy"),I(e.getParent(),"nprogress-custom-parent");var a=e.getElement();a&&$(a)},e.isRendered=function(){return!!e.getElement()},e.getPositioningCSS=function(){var a=document.body.style,s="WebkitTransform"in a?"Webkit":"MozTransform"in a?"Moz":"msTransform"in a?"ms":"OTransform"in a?"O":"";return s+"Perspective"in a?"translate3d":s+"Transform"in a?"translate":"margin"};function r(a,s,c){return a<s?s:a>c?c:a}function o(a){return(-1+a)*100}function p(a,s,c){var T;return n.positionUsing==="translate3d"?T={transform:"translate3d("+o(a)+"%,0,0)"}:n.positionUsing==="translate"?T={transform:"translate("+o(a)+"%,0)"}:T={"margin-left":o(a)+"%"},T.transition="all "+s+"ms "+c,T}var d=function(){var a=[];function s(){var c=a.shift();c&&c(s)}return function(c){a.push(c),a.length==1&&s()}}(),g=function(){var a=["Webkit","O","Moz","ms"],s={};function c(m){return m.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(C,D){return D.toUpperCase()})}function T(m){var C=document.body.style;if(m in C)return m;for(var D=a.length,B=m.charAt(0).toUpperCase()+m.slice(1),Q;D--;)if(Q=a[D]+B,Q in C)return Q;return m}function P(m){return m=c(m),s[m]||(s[m]=T(m))}function M(m,C,D){C=P(C),m.style[C]=D}return function(m,C){var D=arguments,B,Q;if(D.length==2)for(B in C)Q=C[B],Q!==void 0&&C.hasOwnProperty(B)&&M(m,B,Q);else M(m,D[1],D[2])}}();function y(a,s){var c=typeof a=="string"?a:w(a);return c.indexOf(" "+s+" ")>=0}function O(a,s){var c=w(a),T=c+s;y(c,s)||(a.className=T.substring(1))}function I(a,s){var c=w(a),T;y(a,s)&&(T=c.replace(" "+s+" "," "),a.className=T.substring(1,T.length-1))}function w(a){return(" "+(a&&a.className||"")+" ").replace(/\s+/gi," ")}function $(a){a&&a.parentNode&&a.parentNode.removeChild(a)}return e})})(ut);var Gn=ut.exports;const pr=Ot(Gn);function vr({fetchNext:i}={}){const{scroller:t,sortedFiles:e,sortMethod:n,currLocation:r,stackViewEl:o,canLoadNext:p,previewIdx:d,props:g,walker:y,getViewableAreaFiles:O}=ue().toRefs(),{state:I}=ue(),w=L(!1),$=L(G.defaultGridCellWidth),a=x(()=>$.value+16),s=44,{width:c}=Dt(o),T=x(()=>~~(c.value/a.value)),P=_e(new Map),M=x(()=>{const N=a.value;return{first:N+($.value<=160?0:s),second:N}}),m=L(!1),C=async()=>{var N;if(!(m.value||g.value.mode!=="walk"||!p.value))try{m.value=!0,await((N=y.value)==null?void 0:N.next())}finally{m.value=!1}},D=async(N=!1)=>{const S=t.value,j=()=>N?d.value:(S==null?void 0:S.$_endIndex)??0,f=()=>{const E=e.value.length,V=50;return E?i?j()>E-V:j()>E-V&&p.value:!0};for(;f();){await Xe(30);const E=await(i??C)();if(typeof E=="boolean"&&!E)return}};I.useEventListen("loadNextDir",Nt(async(N=!1)=>{await D(N),g.value.mode==="walk"&&B()})),I.useEventListen("viewableAreaFilesChange",()=>{const N=O.value(),S=N.filter(f=>f.is_under_scanned_path&&ce(f.name)).map(f=>f.fullpath);qn.fetchImageTags(S);const j=N.filter(f=>f.is_under_scanned_path&&f.type==="dir"&&!P.has(f.fullpath)).map(f=>f.fullpath);j.length&&zt(j).then(f=>{for(const E in f)if(Object.prototype.hasOwnProperty.call(f,E)){const V=f[E];P.set(E,V)}})}),I.useEventListen("refresh",async()=>{I.eventEmitter.emit("viewableAreaFilesChange")});const B=ve(()=>I.eventEmitter.emit("viewableAreaFilesChange"),300);le(r,B);const Q=ve(async()=>{await D(),B()},150);return{gridItems:T,sortedFiles:e,sortMethodConv:$t,moreActionsDropdownShow:w,gridSize:a,sortMethod:n,onScroll:Q,loadNextDir:C,loadNextDirLoading:m,canLoadNext:p,itemSize:M,cellWidth:$,dirCoverCache:P}}const mr=new Map,G=Ie(),yr=Yn(),qn=et(),br=Mt(),Ar=new BroadcastChannel("iib-image-transfer-bus"),{eventEmitter:Sr,useEventListen:kr}=tt(),{useHookShareState:ue}=Nn((i,{images:t})=>{const e=L({tabIdx:-1,paneIdx:-1}),n=x(()=>Bt(r.value)),r=L([]),o=x(()=>{var C;return r.value.map(D=>D.curr).slice((C=G.conf)!=null&&C.is_win&&e.value.mode!=="scanned-fixed"?1:0)}),p=x(()=>Ft(...o.value)),d=x(()=>{var C,D;return e.value.mode==="scanned-fixed"?((D=(C=r.value)==null?void 0:C[0])==null?void 0:D.curr)??"":e.value.mode==="walk"?e.value.path??"":r.value.length===1?"/":p.value}),g=L(G.defaultSortingMethod),y=L(e.value.mode=="walk"?new ae(e.value.path,g.value):void 0);le([()=>e.value.mode,()=>e.value.path,g],async([C,D,B])=>{var Q;C==="walk"?(y.value=new ae(D,B),r.value=[{files:[],curr:D}],await Xe(),await((Q=y.value)==null?void 0:Q.reset()),M.eventEmitter.emit("loadNextDir")):y.value=void 0});const O=_e(new Set);le(n,()=>O.clear());const I=x(()=>{var Q;if(t.value)return t.value;if(y.value)return y.value.images.filter(N=>!O.has(N.fullpath));if(!n.value)return[];const C=((Q=n.value)==null?void 0:Q.files)??[],D=g.value;return Ze((N=>G.onlyFoldersAndImages?N.filter(S=>S.type==="dir"||ce(S.name)):N)(C),D).filter(N=>!O.has(N.fullpath))}),w=L([]),$=L(-1),a=x(()=>y.value?!y.value.isCompleted:!1),s=L(!1),c=L(!1),T=L(),P=()=>{var C,D,B;return(B=(D=(C=G.tabList)==null?void 0:C[e.value.tabIdx])==null?void 0:D.panes)==null?void 0:B[e.value.paneIdx]},M=tt();M.useEventListen("selectAll",()=>{console.log(`select all 0 -> ${I.value.length}`),w.value=On(0,I.value.length)});const m=()=>{const C=T.value;if(C){const D=Math.max(C.$_startIndex-10,0);return I.value.slice(D,C.$_endIndex+10)}return[]};return{previewing:c,spinning:s,canLoadNext:a,multiSelectedIdxs:w,previewIdx:$,basePath:o,currLocation:d,currPage:n,stack:r,sortMethod:g,sortedFiles:I,scroller:T,stackViewEl:L(),props:e,getPane:P,walker:y,deletedFiles:O,getViewableAreaFiles:m,...M}},()=>({images:L()}));function _r(){const{eventEmitter:i,multiSelectedIdxs:t,sortedFiles:e}=ue().toRefs();return{onSelectAll:()=>i.value.emit("selectAll"),onReverseSelect:()=>{t.value=e.value.map((p,d)=>d).filter(p=>!t.value.includes(p))},onClearAllSelected:()=>{t.value=[]}}}const Ir=()=>{const{stackViewEl:i}=ue().toRefs(),t=L(-1);return Qt(i,e=>{var r;let n=e.target;for(;n.parentElement;)if(n=n.parentElement,n.tagName.toLowerCase()==="li"&&n.classList.contains("file-item-trigger")){const o=(r=n.dataset)==null?void 0:r.idx;o&&Number.isSafeInteger(+o)&&(t.value=+o);return}}),{showMenuIdx:t}};function Zn(){var i=window.navigator.userAgent,t=i.indexOf("MSIE ");if(t>0)return parseInt(i.substring(t+5,i.indexOf(".",t)),10);var e=i.indexOf("Trident/");if(e>0){var n=i.indexOf("rv:");return parseInt(i.substring(n+3,i.indexOf(".",n)),10)}var r=i.indexOf("Edge/");return r>0?parseInt(i.substring(r+5,i.indexOf(".",r)),10):-1}let se;function be(){be.init||(be.init=!0,se=Zn()!==-1)}var de={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){be(),st(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const i=document.createElement("object");this._resizeObject=i,i.setAttribute("aria-hidden","true"),i.setAttribute("tabindex",-1),i.onload=this.addResizeHandlers,i.type="text/html",se&&this.$el.appendChild(i),i.data="about:blank",se||this.$el.appendChild(i)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!se&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const Xn=Rt();nt("data-v-b329ee4c");const ei={class:"resize-observer",tabindex:"-1"};it();const ti=Xn((i,t,e,n,r,o)=>(l(),F("div",ei)));de.render=ti;de.__scopeId="data-v-b329ee4c";de.__file="src/components/ResizeObserver.vue";function re(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?re=function(t){return typeof t}:re=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},re(i)}function ni(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Je(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function ii(i,t,e){return t&&Je(i.prototype,t),e&&Je(i,e),i}function We(i){return si(i)||ri(i)||oi(i)||li()}function si(i){if(Array.isArray(i))return Ae(i)}function ri(i){if(typeof Symbol<"u"&&Symbol.iterator in Object(i))return Array.from(i)}function oi(i,t){if(i){if(typeof i=="string")return Ae(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ae(i,t)}}function Ae(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=i[e];return n}function li(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ai(i){var t;return typeof i=="function"?t={callback:i}:t=i,t}function ui(i,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,r,o,p=function(g){for(var y=arguments.length,O=new Array(y>1?y-1:0),I=1;I<y;I++)O[I-1]=arguments[I];if(o=O,!(n&&g===r)){var w=e.leading;typeof w=="function"&&(w=w(g,r)),(!n||g!==r)&&w&&i.apply(void 0,[g].concat(We(o))),r=g,clearTimeout(n),n=setTimeout(function(){i.apply(void 0,[g].concat(We(o))),n=0},t)}};return p._clear=function(){clearTimeout(n),n=null},p}function ct(i,t){if(i===t)return!0;if(re(i)==="object"){for(var e in i)if(!ct(i[e],t[e]))return!1;return!0}return!1}var ci=function(){function i(t,e,n){ni(this,i),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(e,n)}return ii(i,[{key:"createObserver",value:function(e,n){var r=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=ai(e),this.callback=function(d,g){r.options.callback(d,g),d&&r.options.once&&(r.frozen=!0,r.destroyObserver())},this.callback&&this.options.throttle){var o=this.options.throttleOptions||{},p=o.leading;this.callback=ui(this.callback,this.options.throttle,{leading:function(g){return p==="both"||p==="visible"&&g||p==="hidden"&&!g}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(d){var g=d[0];if(d.length>1){var y=d.find(function(I){return I.isIntersecting});y&&(g=y)}if(r.callback){var O=g.isIntersecting&&g.intersectionRatio>=r.threshold;if(O===r.oldResult)return;r.oldResult=O,r.callback(O,g)}},this.options.intersection),st(function(){r.observer&&r.observer.observe(r.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),i}();function dt(i,t,e){var n=t.value;if(n)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var r=new ci(i,n,e);i._vue_visibilityState=r}}function di(i,t,e){var n=t.value,r=t.oldValue;if(!ct(n,r)){var o=i._vue_visibilityState;if(!n){ft(i);return}o?o.createObserver(n,e):dt(i,{value:n},e)}}function ft(i){var t=i._vue_visibilityState;t&&(t.destroyObserver(),delete i._vue_visibilityState)}var fi={beforeMount:dt,updated:di,unmounted:ft},hi={itemsLimit:1e3},gi=/(auto|scroll)/;function ht(i,t){return i.parentNode===null?t:ht(i.parentNode,t.concat([i]))}var ge=function(t,e){return getComputedStyle(t,null).getPropertyValue(e)},pi=function(t){return ge(t,"overflow")+ge(t,"overflow-y")+ge(t,"overflow-x")},vi=function(t){return gi.test(pi(t))};function Ke(i){if(i instanceof HTMLElement||i instanceof SVGElement){for(var t=ht(i.parentNode,[]),e=0;e<t.length;e+=1)if(vi(t[e]))return t[e];return document.scrollingElement||document.documentElement}}function Se(i){"@babel/helpers - typeof";return Se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Se(i)}var mi={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(t){return["vertical","horizontal"].includes(t)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function yi(){return this.items.length&&Se(this.items[0])!=="object"}var ke=!1;if(typeof window<"u"){ke=!1;try{var bi=Object.defineProperty({},"passive",{get:function(){ke=!0}});window.addEventListener("test",null,bi)}catch{}}let Ai=0;var gt={name:"RecycleScroller",components:{ResizeObserver:de},directives:{ObserveVisibility:fi},props:{...mi,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const i={"-1":{accumulator:0}},t=this.items,e=this.sizeField,n=this.minItemSize;let r=1e4,o=0,p;for(let d=0,g=t.length;d<g;d++)p=t[d][e]||n,p<r&&(r=p),o+=p,i[d]={accumulator:o,size:p};return this.$_computedMinItemSize=r,i}return[]},simpleArray:yi,itemIndexByKey(){const{keyField:i,items:t}=this,e={};for(let n=0,r=t.length;n<r;n++)e[t[n][i]]=n;return e}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const i=this.$_lastUpdateScrollPosition;typeof i=="number"&&this.$nextTick(()=>{this.scrollToPosition(i)})},beforeUnmount(){this.removeListeners()},methods:{addView(i,t,e,n,r){const o=jt({id:Ai++,index:t,used:!0,key:n,type:r}),p=Lt({item:e,position:0,nr:o});return i.push(p),p},unuseView(i,t=!1){const e=this.$_unusedViews,n=i.nr.type;let r=e.get(n);r||(r=[],e.set(n,r)),r.push(i),t||(i.nr.used=!1,i.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(i){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const t=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:e}=this.updateVisibleItems(!1,!0);e||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});t(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&t()},this.updateInterval))}},handleVisibilityChange(i,t){this.ready&&(i||t.boundingClientRect.width!==0||t.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(i,t=!1){const e=this.itemSize,n=this.gridItems||1,r=this.itemSecondarySize||e,o=this.$_computedMinItemSize,p=this.typeField,d=this.simpleArray?null:this.keyField,g=this.items,y=g.length,O=this.sizes,I=this.$_views,w=this.$_unusedViews,$=this.pool,a=this.itemIndexByKey;let s,c,T,P,M;if(!y)s=c=P=M=T=0;else if(this.$_prerender)s=P=0,c=M=Math.min(this.prerender,g.length),T=null;else{const S=this.getScroll();if(t){let E=S.start-this.$_lastUpdateScrollPosition;if(E<0&&(E=-E),e===null&&E<o||E<e)return{continuous:!0}}this.$_lastUpdateScrollPosition=S.start;const j=this.buffer;S.start-=j,S.end+=j;let f=0;if(this.$refs.before&&(f=this.$refs.before.scrollHeight,S.start-=f),this.$refs.after){const E=this.$refs.after.scrollHeight;S.end+=E}if(e===null){let E,V=0,Ne=y-1,U=~~(y/2),ze;do ze=U,E=O[U].accumulator,E<S.start?V=U:U<y-1&&O[U+1].accumulator>S.start&&(Ne=U),U=~~((V+Ne)/2);while(U!==ze);for(U<0&&(U=0),s=U,T=O[y-1].accumulator,c=U;c<y&&O[c].accumulator<S.end;c++);for(c===-1?c=g.length-1:(c++,c>y&&(c=y)),P=s;P<y&&f+O[P].accumulator<S.start;P++);for(M=P;M<y&&f+O[M].accumulator<S.end;M++);}else{s=~~(S.start/e*n);const E=s%n;s-=E,c=Math.ceil(S.end/e*n),P=Math.max(0,Math.floor((S.start-f)/e*n)),M=Math.floor((S.end-f)/e*n),s<0&&(s=0),c>y&&(c=y),P<0&&(P=0),M>y&&(M=y),T=Math.ceil(y/n)*e}}c-s>hi.itemsLimit&&this.itemsLimitError(),this.totalSize=T;let m;const C=s<=this.$_endIndex&&c>=this.$_startIndex;if(C)for(let S=0,j=$.length;S<j;S++)m=$[S],m.nr.used&&(i&&(m.nr.index=a[m.item[d]]),(m.nr.index==null||m.nr.index<s||m.nr.index>=c)&&this.unuseView(m));const D=C?null:new Map;let B,Q,N;for(let S=s;S<c;S++){B=g[S];const j=d?B[d]:B;if(j==null)throw new Error(`Key is ${j} on item (keyField is '${d}')`);if(m=I.get(j),!e&&!O[S].size){m&&this.unuseView(m);continue}Q=B[p];let f=w.get(Q),E=!1;if(!m)C?f&&f.length?m=f.pop():m=this.addView($,S,B,j,Q):(N=D.get(Q)||0,(!f||N>=f.length)&&(m=this.addView($,S,B,j,Q),this.unuseView(m,!0),f=w.get(Q)),m=f[N],D.set(Q,N+1)),I.delete(m.nr.key),m.nr.used=!0,m.nr.index=S,m.nr.key=j,m.nr.type=Q,I.set(j,m),E=!0;else if(!m.nr.used&&(m.nr.used=!0,m.nr.index=S,E=!0,f)){const V=f.indexOf(m);V!==-1&&f.splice(V,1)}m.item=B,E&&(S===g.length-1&&this.$emit("scroll-end"),S===0&&this.$emit("scroll-start")),e===null?(m.position=O[S-1].accumulator,m.offset=0):(m.position=Math.floor(S/n)*e,m.offset=S%n*r)}return this.$_startIndex=s,this.$_endIndex=c,this.emitUpdate&&this.$emit("update",s,c,P,M),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:C}},getListenerTarget(){let i=Ke(this.$el);return window.document&&(i===window.document.documentElement||i===window.document.body)&&(i=window),i},getScroll(){const{$el:i,direction:t}=this,e=t==="vertical";let n;if(this.pageMode){const r=i.getBoundingClientRect(),o=e?r.height:r.width;let p=-(e?r.top:r.left),d=e?window.innerHeight:window.innerWidth;p<0&&(d+=p,p=0),p+d>o&&(d=o-p),n={start:p,end:p+d}}else e?n={start:i.scrollTop,end:i.scrollTop+i.clientHeight}:n={start:i.scrollLeft,end:i.scrollLeft+i.clientWidth};return n},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,ke?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(i){let t;const e=this.gridItems||1;this.itemSize===null?t=i>0?this.sizes[i-1].accumulator:0:t=Math.floor(i/e)*this.itemSize,this.scrollToPosition(t)},scrollToPosition(i){const t=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let e,n,r;if(this.pageMode){const o=Ke(this.$el),p=o.tagName==="HTML"?0:o[t.scroll],d=o.getBoundingClientRect(),y=this.$el.getBoundingClientRect()[t.start]-d[t.start];e=o,n=t.scroll,r=i+p+y}else e=this.$el,n=t.scroll,r=i;e[n]=r},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((i,t)=>i.nr.index-t.nr.index)}}};const Si={key:0,ref:"before",class:"vue-recycle-scroller__slot"},ki={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function _i(i,t,e,n,r,o){const p=ie("ResizeObserver"),d=Ht("observe-visibility");return xt((l(),h("div",{class:W(["vue-recycle-scroller",{ready:r.ready,"page-mode":e.pageMode,[`direction-${i.direction}`]:!0}]),onScrollPassive:t[0]||(t[0]=(...g)=>o.handleScroll&&o.handleScroll(...g))},[i.$slots.before?(l(),h("div",Si,[te(i.$slots,"before")],512)):A("v-if",!0),(l(),F(Me(e.listTag),{ref:"wrapper",style:rt({[i.direction==="vertical"?"minHeight":"minWidth"]:r.totalSize+"px"}),class:W(["vue-recycle-scroller__item-wrapper",e.listClass])},{default:k(()=>[(l(!0),h(H,null,J(r.pool,g=>(l(),F(Me(e.itemTag),Vt({key:g.nr.id,style:r.ready?{transform:`translate${i.direction==="vertical"?"Y":"X"}(${g.position}px) translate${i.direction==="vertical"?"X":"Y"}(${g.offset}px)`,width:e.gridItems?`${i.direction==="vertical"&&e.itemSecondarySize||e.itemSize}px`:void 0,height:e.gridItems?`${i.direction==="horizontal"&&e.itemSecondarySize||e.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[e.itemClass,{hover:!e.skipHover&&r.hoverKey===g.nr.key}]]},Ut(e.skipHover?{}:{mouseenter:()=>{r.hoverKey=g.nr.key},mouseleave:()=>{r.hoverKey=null}})),{default:k(()=>[te(i.$slots,"default",{item:g.item,index:g.nr.index,active:g.nr.used})]),_:2},1040,["style","class"]))),128)),te(i.$slots,"empty")]),_:3},8,["style","class"])),i.$slots.after?(l(),h("div",ki,[te(i.$slots,"after")],512)):A("v-if",!0),b(p,{onNotify:o.handleResize},null,8,["onNotify"])],34)),[[d,o.handleVisibilityChange]])}gt.render=_i;gt.__file="src/components/RecycleScroller.vue";const Ye=X({__name:"ContextMenu",props:{file:{},idx:{},selectedTag:{},isSelectedMutilFiles:{type:Boolean}},emits:["contextMenuClick"],setup(i,{emit:t}){const e=i,n=Ie(),r=x(()=>{var o;return(((o=n.conf)==null?void 0:o.all_custom_tags)??[]).reduce((p,d)=>[...p,{...d,selected:!!e.selectedTag.find(g=>g.id===d.id)}],[])});return(o,p)=>{const d=ot,g=Jt,y=Wt,O=lt;return l(),F(O,{onClick:p[0]||(p[0]=I=>t("contextMenuClick",I,o.file,o.idx))},{default:k(()=>{var I;return[b(d,{key:"deleteFiles"},{default:k(()=>[_(v(o.$t("deleteSelected")),1)]),_:1}),b(d,{key:"openWithDefaultApp"},{default:k(()=>[_(v(o.$t("openWithDefaultApp")),1)]),_:1}),b(d,{key:"saveSelectedAsJson"},{default:k(()=>[_(v(o.$t("saveSelectedAsJson")),1)]),_:1}),o.file.type==="dir"?(l(),h(H,{key:0},[b(d,{key:"openInNewTab"},{default:k(()=>[_(v(o.$t("openInNewTab")),1)]),_:1}),b(d,{key:"openOnTheRight"},{default:k(()=>[_(v(o.$t("openOnTheRight")),1)]),_:1}),b(d,{key:"openWithWalkMode"},{default:k(()=>[_(v(o.$t("openWithWalkMode")),1)]),_:1})],64)):A("",!0),o.file.type==="file"?(l(),h(H,{key:1},[R(ce)(o.file.name)?(l(),h(H,{key:0},[b(d,{key:"viewGenInfo"},{default:k(()=>[_(v(o.$t("viewGenerationInfo")),1)]),_:1}),b(g),((I=R(n).conf)==null?void 0:I.launch_mode)!=="server"?(l(),h(H,{key:0},[b(d,{key:"send2txt2img"},{default:k(()=>[_(v(o.$t("sendToTxt2img")),1)]),_:1}),b(d,{key:"send2img2img"},{default:k(()=>[_(v(o.$t("sendToImg2img")),1)]),_:1}),b(d,{key:"send2inpaint"},{default:k(()=>[_(v(o.$t("sendToInpaint")),1)]),_:1}),b(d,{key:"send2extras"},{default:k(()=>[_(v(o.$t("sendToExtraFeatures")),1)]),_:1}),b(y,{key:"sendToThirdPartyExtension",title:o.$t("sendToThirdPartyExtension")},{default:k(()=>[b(d,{key:"send2controlnet-txt2img"},{default:k(()=>[_("ControlNet - "+v(o.$t("t2i")),1)]),_:1}),b(d,{key:"send2controlnet-img2img"},{default:k(()=>[_("ControlNet - "+v(o.$t("i2i")),1)]),_:1}),b(d,{key:"send2outpaint"},{default:k(()=>[_("openOutpaint")]),_:1})]),_:1},8,["title"])],64)):A("",!0),b(d,{key:"send2BatchDownload"},{default:k(()=>[_(v(o.$t("sendToBatchDownload")),1)]),_:1}),b(y,{key:"copy2target",title:o.$t("copyTo")},{default:k(()=>[(l(!0),h(H,null,J(R(n).quickMovePaths,w=>(l(),F(d,{key:`copy-to-${w.dir}`},{default:k(()=>[_(v(w.zh),1)]),_:2},1024))),128))]),_:1},8,["title"]),b(y,{key:"move2target",title:o.$t("moveTo")},{default:k(()=>[(l(!0),h(H,null,J(R(n).quickMovePaths,w=>(l(),F(d,{key:`move-to-${w.dir}`},{default:k(()=>[_(v(w.zh),1)]),_:2},1024))),128))]),_:1},8,["title"]),b(g),o.isSelectedMutilFiles?(l(),h(H,{key:1},[b(y,{key:"batch-add-tag",title:o.$t("batchAddTag")},{default:k(()=>[b(d,{key:"add-custom-tag"},{default:k(()=>[_("+ "+v(o.$t("addNewCustomTag")),1)]),_:1}),(l(!0),h(H,null,J(r.value,w=>(l(),F(d,{key:`batch-add-tag-${w.id}`},{default:k(()=>[_(v(w.name),1)]),_:2},1024))),128))]),_:1},8,["title"]),b(y,{key:"batch-remove-tag",title:o.$t("batchRemoveTag")},{default:k(()=>[(l(!0),h(H,null,J(r.value,w=>(l(),F(d,{key:`batch-remove-tag-${w.id}`},{default:k(()=>[_(v(w.name),1)]),_:2},1024))),128))]),_:1},8,["title"])],64)):(l(),F(y,{key:"toggle-tag",title:o.$t("toggleTag")},{default:k(()=>[b(d,{key:"add-custom-tag"},{default:k(()=>[_("+ "+v(o.$t("addNewCustomTag")),1)]),_:1}),(l(!0),h(H,null,J(r.value,w=>(l(),F(d,{key:`toggle-tag-${w.id}`},{default:k(()=>[_(v(w.name)+" ",1),w.selected?(l(),F(R(pn),{key:0})):(l(),F(R(Wn),{key:1}))]),_:2},1024))),128))]),_:1},8,["title"])),b(g),b(d,{key:"openFileLocationInNewTab"},{default:k(()=>[_(v(o.$t("openFileLocationInNewTab")),1)]),_:1}),b(d,{key:"openWithLocalFileBrowser"},{default:k(()=>[_(v(o.$t("openWithLocalFileBrowser")),1)]),_:1})],64)):A("",!0),b(g),b(d,{key:"rename"},{default:k(()=>[_(v(o.$t("rename")),1)]),_:1}),b(d,{key:"previewInNewWindow"},{default:k(()=>[_(v(o.$t("previewInNewWindow")),1)]),_:1}),b(d,{key:"download"},{default:k(()=>[_(v(o.$t("download")),1)]),_:1}),b(d,{key:"copyPreviewUrl"},{default:k(()=>[_(v(o.$t("copySourceFilePreviewLink")),1)]),_:1}),b(d,{key:"copyFilePath"},{default:k(()=>[_(v(o.$t("copyFilePath")),1)]),_:1})],64)):A("",!0)]}),_:1})}}}),z=i=>(nt("data-v-4ea1ffe2"),i=i(),it(),i),Ii={class:"changeIndicatorWrapper"},Ci={key:0,class:"changeIndicatorsLeft changeIndicators"},wi={key:0,class:"promptChangeIndicator changeIndicator"},Ei={key:1,class:"negpromptChangeIndicator changeIndicator"},Ti={key:2,class:"seedChangeIndicator changeIndicator"},Pi={key:3,class:"stepsChangeIndicator changeIndicator"},Oi={key:4,class:"cfgChangeIndicator changeIndicator"},Di={key:5,class:"sizeChangeIndicator changeIndicator"},Ni={key:6,class:"modelChangeIndicator changeIndicator"},zi={key:7,class:"samplerChangeIndicator changeIndicator"},$i={key:8,class:"otherChangeIndicator changeIndicator"},Mi={class:"hoverOverlay"},Qi=z(()=>u("strong",null,"This file",-1)),Bi=z(()=>u("br",null,null,-1)),Fi=z(()=>u("br",null,null,-1)),Ri={key:0},ji=z(()=>u("td",null,[u("span",{class:"promptChangeIndicator"},"+ Prompt")],-1)),Li={key:1},Hi=z(()=>u("td",null,[u("span",{class:"negpromptChangeIndicator"},"- Prompt")],-1)),xi={key:2},Vi=z(()=>u("td",null,[u("span",{class:"seedChangeIndicator"},"Seed")],-1)),Ui={key:3},Ji=z(()=>u("td",null,[u("span",{class:"stepsChangeIndicator"},"Steps")],-1)),Wi={key:4},Ki=z(()=>u("td",null,[u("span",{class:"cfgChangeIndicator"},"Cfg Scale")],-1)),Yi={key:5},Gi=z(()=>u("td",null,[u("span",{class:"sizeChangeIndicator"},"Size")],-1)),qi={key:6},Zi=z(()=>u("td",null,[u("span",{class:"modelChangeIndicator"},"Model")],-1)),Xi=z(()=>u("br",null,null,-1)),es={key:7},ts=z(()=>u("td",null,[u("span",{class:"samplerChangeIndicator"},"Sampler")],-1)),ns=z(()=>u("br",null,null,-1)),is=z(()=>u("br",null,null,-1)),ss={key:0},rs=z(()=>u("span",{class:"otherChangeIndicator"},"Other",-1)),os=z(()=>u("br",null,null,-1)),ls=z(()=>u("br",null,null,-1)),as={key:1,class:"changeIndicatorsRight changeIndicators"},us={key:0,class:"promptChangeIndicator changeIndicator"},cs={key:1,class:"negpromptChangeIndicator changeIndicator"},ds={key:2,class:"seedChangeIndicator changeIndicator"},fs={key:3,class:"stepsChangeIndicator changeIndicator"},hs={key:4,class:"cfgChangeIndicator changeIndicator"},gs={key:5,class:"sizeChangeIndicator changeIndicator"},ps={key:6,class:"modelChangeIndicator changeIndicator"},vs={key:7,class:"samplerChangeIndicator changeIndicator"},ms={key:8,class:"otherChangeIndicator changeIndicator"},ys={class:"hoverOverlay"},bs=z(()=>u("strong",null,"This file",-1)),As=z(()=>u("br",null,null,-1)),Ss=z(()=>u("br",null,null,-1)),ks={key:0},_s=z(()=>u("td",null,[u("span",{class:"promptChangeIndicator"},"+ Prompt")],-1)),Is={key:1},Cs=z(()=>u("td",null,[u("span",{class:"negpromptChangeIndicator"},"- Prompt")],-1)),ws={key:2},Es=z(()=>u("td",null,[u("span",{class:"seedChangeIndicator"},"Seed")],-1)),Ts={key:3},Ps=z(()=>u("td",null,[u("span",{class:"stepsChangeIndicator"},"Steps")],-1)),Os={key:4},Ds=z(()=>u("td",null,[u("span",{class:"cfgChangeIndicator"},"Cfg Scale")],-1)),Ns={key:5},zs=z(()=>u("td",null,[u("span",{class:"sizeChangeIndicator"},"Size")],-1)),$s={key:6},Ms=z(()=>u("td",null,[u("span",{class:"modelChangeIndicator"},"Model")],-1)),Qs=z(()=>u("br",null,null,-1)),Bs={key:7},Fs=z(()=>u("td",null,[u("span",{class:"samplerChangeIndicator"},"Sampler")],-1)),Rs=z(()=>u("br",null,null,-1)),js=z(()=>u("br",null,null,-1)),Ls={key:0},Hs=z(()=>u("span",{class:"otherChangeIndicator"},"Other",-1)),xs=z(()=>u("br",null,null,-1)),Vs=z(()=>u("br",null,null,-1)),Us=X({__name:"ChangeIndicator",props:{genDiffToPrevious:{},genDiffToNext:{},genInfo:{}},setup(i){function t(n){const r=["prompt","negativePrompt","seed","steps","cfgScale","size","Model","others"],o=Object.keys(n).filter(p=>!r.includes(p));return Object.fromEntries(o.map(p=>[p,n[p]]))}function e(n){return Object.keys(t(n)).length>0}return(n,r)=>(l(),h("div",Ii,[n.genDiffToPrevious.empty?A("",!0):(l(),h("div",Ci,["prompt"in n.genDiffToPrevious.diff?(l(),h("div",wi,"P+")):A("",!0),"negativePrompt"in n.genDiffToPrevious.diff?(l(),h("div",Ei,"P-")):A("",!0),"seed"in n.genDiffToPrevious.diff?(l(),h("div",Ti,"Se")):A("",!0),"steps"in n.genDiffToPrevious.diff?(l(),h("div",Pi,"St")):A("",!0),"cfgScale"in n.genDiffToPrevious.diff?(l(),h("div",Oi,"Cf")):A("",!0),"size"in n.genDiffToPrevious.diff?(l(),h("div",Di,"Si")):A("",!0),"Model"in n.genDiffToPrevious.diff?(l(),h("div",Ni,"Mo")):A("",!0),"Sampler"in n.genDiffToPrevious.diff?(l(),h("div",zi,"Sa")):A("",!0),e(n.genDiffToPrevious.diff)?(l(),h("div",$i,"Ot")):A("",!0)])),u("div",Mi,[u("small",null,[b(R(He)),Qi,_(" vs "+v(n.genDiffToPrevious.otherFile)+" ",1),Bi,Fi,u("table",null,["prompt"in n.genDiffToPrevious.diff?(l(),h("tr",Ri,[ji,u("td",null,v(n.genDiffToPrevious.diff.prompt)+" tokens changed",1)])):A("",!0),"negativePrompt"in n.genDiffToPrevious.diff?(l(),h("tr",Li,[Hi,u("td",null,v(n.genDiffToPrevious.diff.negativePrompt)+" tokens changed",1)])):A("",!0),"seed"in n.genDiffToPrevious.diff?(l(),h("tr",xi,[Vi,u("td",null,[u("strong",null,v(n.genDiffToPrevious.diff.seed[0]),1),_(" vs "+v(n.genDiffToPrevious.diff.seed[1]),1)])])):A("",!0),"steps"in n.genDiffToPrevious.diff?(l(),h("tr",Ui,[Ji,u("td",null,[u("strong",null,v(n.genDiffToPrevious.diff.steps[0]),1),_(" vs "+v(n.genDiffToPrevious.diff.steps[1]),1)])])):A("",!0),"cfgScale"in n.genDiffToPrevious.diff?(l(),h("tr",Wi,[Ki,u("td",null,[u("strong",null,v(n.genDiffToPrevious.diff.cfgScale[0]),1),_(" vs "+v(n.genDiffToPrevious.diff.cfgScale[1]),1)])])):A("",!0),"size"in n.genDiffToPrevious.diff?(l(),h("tr",Yi,[Gi,u("td",null,[u("strong",null,v(n.genDiffToPrevious.diff.size[0]),1),_(" vs "+v(n.genDiffToPrevious.diff.size[1]),1)])])):A("",!0),"Model"in n.genDiffToPrevious.diff?(l(),h("tr",qi,[Zi,u("td",null,[u("strong",null,v(n.genDiffToPrevious.diff.Model[0]),1),Xi,_(" vs "+v(n.genDiffToPrevious.diff.Model[1]),1)])])):A("",!0),"Sampler"in n.genDiffToPrevious.diff?(l(),h("tr",es,[ts,u("td",null,[u("strong",null,v(n.genDiffToPrevious.diff.Sampler[0]),1),ns,_(" vs "+v(n.genDiffToPrevious.diff.Sampler[1]),1)])])):A("",!0)]),is,e(n.genDiffToPrevious.diff)?(l(),h("div",ss,[rs,_(" props that changed:"),os,ls,u("ul",null,[(l(!0),h(H,null,J(t(n.genDiffToPrevious.diff),(o,p)=>(l(),h("li",null,v(p),1))),256))])])):A("",!0)])]),n.genDiffToNext.empty?A("",!0):(l(),h("div",as,["prompt"in n.genDiffToNext.diff?(l(),h("div",us,"P+")):A("",!0),"negativePrompt"in n.genDiffToNext.diff?(l(),h("div",cs,"P-")):A("",!0),"seed"in n.genDiffToNext.diff?(l(),h("div",ds,"Se")):A("",!0),"steps"in n.genDiffToNext.diff?(l(),h("div",fs,"St")):A("",!0),"cfgScale"in n.genDiffToNext.diff?(l(),h("div",hs,"Cf")):A("",!0),"size"in n.genDiffToNext.diff?(l(),h("div",gs,"Si")):A("",!0),"Model"in n.genDiffToNext.diff?(l(),h("div",ps,"Mo")):A("",!0),"Sampler"in n.genDiffToNext.diff?(l(),h("div",vs,"Sa")):A("",!0),e(n.genDiffToNext.diff)?(l(),h("div",ms,"Ot")):A("",!0)])),u("div",ys,[u("small",null,[b(R(He)),bs,_(" vs "+v(n.genDiffToNext.otherFile)+" ",1),As,Ss,u("table",null,["prompt"in n.genDiffToNext.diff?(l(),h("tr",ks,[_s,u("td",null,v(n.genDiffToNext.diff.prompt)+" tokens changed",1)])):A("",!0),"negativePrompt"in n.genDiffToNext.diff?(l(),h("tr",Is,[Cs,u("td",null,v(n.genDiffToNext.diff.negativePrompt)+" tokens changed",1)])):A("",!0),"seed"in n.genDiffToNext.diff?(l(),h("tr",ws,[Es,u("td",null,[u("strong",null,v(n.genDiffToNext.diff.seed[0]),1),_(" vs "+v(n.genDiffToNext.diff.seed[1]),1)])])):A("",!0),"steps"in n.genDiffToNext.diff?(l(),h("tr",Ts,[Ps,u("td",null,[u("strong",null,v(n.genDiffToNext.diff.steps[0]),1),_(" vs "+v(n.genDiffToNext.diff.steps[1]),1)])])):A("",!0),"cfgScale"in n.genDiffToNext.diff?(l(),h("tr",Os,[Ds,u("td",null,[u("strong",null,v(n.genDiffToNext.diff.cfgScale[0]),1),_(" vs "+v(n.genDiffToNext.diff.cfgScale[1]),1)])])):A("",!0),"size"in n.genDiffToNext.diff?(l(),h("tr",Ns,[zs,u("td",null,[u("strong",null,v(n.genDiffToNext.diff.size[0]),1),_(" vs "+v(n.genDiffToNext.diff.size[1]),1)])])):A("",!0),"Model"in n.genDiffToNext.diff?(l(),h("tr",$s,[Ms,u("td",null,[u("strong",null,v(n.genDiffToNext.diff.Model[0]),1),Qs,_(" vs "+v(n.genDiffToNext.diff.Model[1]),1)])])):A("",!0),"Sampler"in n.genDiffToNext.diff?(l(),h("tr",Bs,[Fs,u("td",null,[u("strong",null,v(n.genDiffToNext.diff.Sampler[0]),1),Rs,_(" vs "+v(n.genDiffToNext.diff.Sampler[1]),1)])])):A("",!0)]),js,e(n.genDiffToNext.diff)?(l(),h("div",Ls,[Hs,_(" props that changed:"),xs,Vs,u("ul",null,[(l(!0),h(H,null,J(t(n.genDiffToNext.diff),(o,p)=>(l(),h("li",null,v(p),1))),256))])])):A("",!0)])])]))}});const Js=at(Us,[["__scopeId","data-v-4ea1ffe2"]]),Ws=["data-idx"],Ks={key:1,class:"more"},Ys={class:"float-btn-wrap"},Gs={key:1,class:"tags-container"},qs=["url"],Zs={class:"play-icon"},Xs=["src"],er={key:0,class:"tags-container"},tr={key:4,class:"preview-icon-wrap"},nr={key:1,class:"dir-cover-container"},ir=["src"],sr={key:5,class:"profile"},rr=["title"],or={class:"basic-info"},lr={style:{"margin-right":"4px"}},pe=160,ar=X({__name:"FileItem",props:{file:{},idx:{},selected:{type:Boolean,default:!1},showMenuIdx:{},cellWidth:{},fullScreenPreviewImageUrl:{},enableRightClickMenu:{type:Boolean,default:!0},enableCloseIcon:{type:Boolean,default:!1},isSelectedMutilFiles:{type:Boolean},genInfo:{},enableChangeIndicator:{type:Boolean},extraTags:{},coverFiles:{},getGenDiff:{},getGenDiffWatchDep:{}},emits:["update:showMenuIdx","fileItemClick","dragstart","dragend","previewVisibleChange","contextMenuClick","close-icon-click"],setup(i,{emit:t}){const e=i;Kt(s=>({f669a082:s.$props.cellWidth+"px"}));const n=Ie(),r=et(),o=L(),p=L(),d=ve(()=>{const{getGenDiff:s,file:c,idx:T}=e;s&&(p.value=s(c.gen_info_obj,T,1,c),o.value=s(c.gen_info_obj,T,-1,c))},200+100*Math.random());le(()=>{var s;return(s=e.getGenDiffWatchDep)==null?void 0:s.call(e,e.idx)},()=>{d()},{immediate:!0,deep:!0});const g=x(()=>r.tagMap.get(e.file.fullpath)??[]),y=x(()=>{const s=n.gridThumbnailResolution;return n.enableThumbnail?Qe(e.file,[s,s].join("x")):Yt(e.file)}),O=x(()=>{var s;return(((s=n.conf)==null?void 0:s.all_custom_tags)??[]).reduce((c,T)=>[...c,{...T,selected:!!g.value.find(P=>P.id===T.id)}],[])}),I=x(()=>O.value.find(s=>s.type==="custom"&&s.name==="like")),w=x(()=>O.value.find(s=>s.type==="custom"&&s.name==="nsfw")),$=()=>{oe(I.value),t("contextMenuClick",{key:`toggle-tag-${I.value.id}`},e.file,e.idx)},a=()=>{oe(w.value),t("contextMenuClick",{key:`toggle-tag-${w.value.id}`},e.file,e.idx)};return(s,c)=>{const T=ie("close-circle-outlined"),P=q,M=ie("star-filled"),m=ie("star-outlined"),C=ot,D=lt,B=tn,Q=dn;return l(),F(P,{trigger:["contextmenu"],visible:R(n).longPressOpenContextMenu?typeof s.idx=="number"&&s.showMenuIdx===s.idx:void 0,"onUpdate:visible":c[8]||(c[8]=N=>typeof s.idx=="number"&&t("update:showMenuIdx",N?s.idx:-1))},{overlay:k(()=>[s.enableRightClickMenu?(l(),F(Ye,{key:0,file:s.file,idx:s.idx,"selected-tag":g.value,onContextMenuClick:c[7]||(c[7]=(N,S,j)=>t("contextMenuClick",N,S,j)),"is-selected-mutil-files":s.isSelectedMutilFiles},null,8,["file","idx","selected-tag","is-selected-mutil-files"])):A("",!0)]),default:k(()=>{var N,S,j;return[(l(),h("li",{class:W(["file file-item-trigger grid",{clickable:s.file.type==="dir",selected:s.selected}]),"data-idx":s.idx,key:s.file.name,draggable:"true",onDragstart:c[4]||(c[4]=f=>t("dragstart",f,s.idx)),onDragend:c[5]||(c[5]=f=>t("dragend",f,s.idx)),onClickCapture:c[6]||(c[6]=f=>t("fileItemClick",f,s.file,s.idx))},[u("div",null,[s.enableCloseIcon?(l(),h("div",{key:0,class:"close-icon",onClick:c[0]||(c[0]=f=>t("close-icon-click"))},[b(T)])):A("",!0),s.enableRightClickMenu?(l(),h("div",Ks,[b(P,null,{overlay:k(()=>[b(Ye,{file:s.file,idx:s.idx,"selected-tag":g.value,onContextMenuClick:c[1]||(c[1]=(f,E,V)=>t("contextMenuClick",f,E,V)),"is-selected-mutil-files":s.isSelectedMutilFiles},null,8,["file","idx","selected-tag","is-selected-mutil-files"])]),default:k(()=>[u("div",Ys,[b(R(Gt))])]),_:1}),s.file.type==="file"?(l(),F(P,{key:0},{overlay:k(()=>[O.value.length>1?(l(),F(D,{key:0,onClick:c[2]||(c[2]=f=>t("contextMenuClick",f,s.file,s.idx))},{default:k(()=>[(l(!0),h(H,null,J(O.value,f=>(l(),F(C,{key:`toggle-tag-${f.id}`},{default:k(()=>[_(v(f.name)+" ",1),f.selected?(l(),F(M,{key:0})):(l(),F(m,{key:1}))]),_:2},1024))),128))]),_:1})):A("",!0)]),default:k(()=>{var f,E;return[u("div",{class:W(["float-btn-wrap",{"like-selected":(f=I.value)==null?void 0:f.selected}]),onClick:$},[(E=I.value)!=null&&E.selected?(l(),F(R(Rn),{key:0})):(l(),F(R(xn),{key:1}))],2)]}),_:1})):A("",!0),u("div",{class:W(["float-btn-wrap",{"nsfw-selected":(N=w.value)==null?void 0:N.selected}]),onClick:a},[(S=w.value)!=null&&S.selected?(l(),F(R(qt),{key:0})):(l(),F(R(Zt),{key:1}))],2)])):A("",!0),R(Xt)(s.file.name)?(l(),h("div",{key:s.file.fullpath,class:W(`idx-${s.idx} item-content`)},[s.enableChangeIndicator&&p.value&&o.value?(l(),F(Js,{key:0,"gen-diff-to-next":p.value,"gen-diff-to-previous":o.value},null,8,["gen-diff-to-next","gen-diff-to-previous"])):A("",!0),b(B,{class:W({blur:(s.extraTags??g.value).find(f=>f.type==="custom"&&f.name==="nsfw")}),src:y.value,fallback:R(Dn),preview:{src:s.fullScreenPreviewImageUrl,onVisibleChange:(f,E)=>t("previewVisibleChange",f,E)}},null,8,["class","src","fallback","preview"]),g.value&&s.cellWidth>pe?(l(),h("div",Gs,[(l(!0),h(H,null,J(s.extraTags??g.value,f=>(l(),F(Q,{key:f.id,color:R(r).getColor(f)},{default:k(()=>[_(v(f.name),1)]),_:2},1032,["color"]))),128))])):A("",!0)],2)):R(en)(s.file.name)?(l(),h("div",{key:3,class:W(`idx-${s.idx} item-content video`),url:R(he)(s.file),style:rt({"background-image":`url('${s.file.cover_url??R(he)(s.file)}')`}),onClick:c[3]||(c[3]=f=>R(sn)(s.file,E=>t("contextMenuClick",{key:`toggle-tag-${E}`},s.file,s.idx)))},[u("div",Zs,[u("img",{src:R(Kn),style:{width:"40px",height:"40px"}},null,8,Xs)]),g.value&&s.cellWidth>pe?(l(),h("div",er,[(l(!0),h(H,null,J(g.value,f=>(l(),F(Q,{key:f.id,color:R(r).getColor(f)},{default:k(()=>[_(v(f.name),1)]),_:2},1032,["color"]))),128))])):A("",!0)],14,qs)):(l(),h("div",tr,[s.file.type==="file"?(l(),F(R(bn),{key:0,class:"icon center"})):(j=s.coverFiles)!=null&&j.length&&s.cellWidth>160?(l(),h("div",nr,[(l(!0),h(H,null,J(s.coverFiles,f=>(l(),h("img",{class:"dir-cover-item",src:f.media_type==="image"?R(Qe)(f):R(he)(f),key:f.fullpath},null,8,ir))),128))])):(l(),F(R(_n),{key:2,class:"icon center"}))])),s.cellWidth>pe?(l(),h("div",sr,[u("div",{class:"name line-clamp-1",title:s.file.name},v(s.file.name),9,rr),u("div",or,[u("div",lr,v(s.file.type)+" "+v(s.file.size),1),u("div",null,v(s.file.date),1)])])):A("",!0)])],42,Ws))]}),_:1},8,["visible"])}}});const Cr=at(ar,[["__scopeId","data-v-85ed1171"]]);export{Cr as F,pr as N,Ye as _,vr as a,Ir as b,_r as c,gt as d,kr as e,br as f,G as g,Sr as h,yr as i,Ar as j,Yn as k,On as r,mr as s,qn as t,ue as u};
