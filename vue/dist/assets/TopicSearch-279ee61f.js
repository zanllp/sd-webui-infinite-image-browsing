import{ay as pe,P as ie,bK as Ne,d as Z,G as g,a as O,c as o,Z as ue,_ as Oe,cA as de,r as D,cB as Ge,bC as Te,cC as Je,b7 as Ae,h as J,u as Fe,be as Ue,cb as Qe,bc as Ve,ca as Ke,cw as Ye,a1 as Xe,J as He,B as E,m as we,o as Ze,bk as et,U as P,V as M,W as d,Y as m,a2 as Q,a3 as z,X as G,$ as B,cp as tt,a4 as H,a9 as at,a8 as nt,cD as st,cE as rt,cF as ot,z as le,ck as it,cG as lt,cH as ct,R as te,ak as ut,aj as dt,aO as pt,ah as vt,T as ft,aP as gt,aQ as ht,cI as mt,a0 as yt}from"./index-3d8fb8a9.js";/* empty css              */import{S as _t}from"./index-f55a6feb.js";import{_ as St}from"./index-b1a1fe66.js";/* empty css              */import{_ as kt}from"./index-802b7bfd.js";var je=pe("normal","exception","active","success"),bt=pe("line","circle","dashboard"),Ct=pe("default","small"),ne=function(){return{prefixCls:String,type:ie.oneOf(bt),percent:Number,format:{type:Function},status:ie.oneOf(je),showInfo:{type:Boolean,default:void 0},strokeWidth:Number,strokeLinecap:String,strokeColor:{type:[String,Object],default:void 0},trailColor:String,width:Number,success:{type:Object,default:function(){return{}}},gapDegree:Number,gapPosition:String,size:ie.oneOf(Ct),steps:Number,successPercent:Number,title:String}};function K(c){return!c||c<0?0:c>100?100:c}function ae(c){var e=c.success,r=c.successPercent,n=r;return e&&"progress"in e&&(Ne(!1,"Progress","`success.progress` is deprecated. Please use `success.percent` instead."),n=e.progress),e&&"percent"in e&&(n=e.percent),n}var Pt=["from","to","direction"],wt=function(){return O(O({},ne()),{},{prefixCls:String,direction:{type:String}})},xt=function(e){var r=[];return Object.keys(e).forEach(function(n){var i=parseFloat(n.replace(/%/g,""));isNaN(i)||r.push({key:i,value:e[n]})}),r=r.sort(function(n,i){return n.key-i.key}),r.map(function(n){var i=n.key,f=n.value;return"".concat(f," ").concat(i,"%")}).join(", ")},$t=function(e,r){var n=e.from,i=n===void 0?de.blue:n,f=e.to,l=f===void 0?de.blue:f,h=e.direction,k=h===void 0?r==="rtl"?"to left":"to right":h,p=Oe(e,Pt);if(Object.keys(p).length!==0){var v=xt(p);return{backgroundImage:"linear-gradient(".concat(k,", ").concat(v,")")}}return{backgroundImage:"linear-gradient(".concat(k,", ").concat(i,", ").concat(l,")")}};const Dt=Z({compatConfig:{MODE:3},name:"Line",props:wt(),setup:function(e,r){var n=r.slots,i=g(function(){var p=e.strokeColor,v=e.direction;return p&&typeof p!="string"?$t(p,v):{background:p}}),f=g(function(){return e.trailColor?{backgroundColor:e.trailColor}:void 0}),l=g(function(){var p=e.percent,v=e.strokeWidth,u=e.strokeLinecap,s=e.size;return O({width:"".concat(K(p),"%"),height:"".concat(v||(s==="small"?6:8),"px"),borderRadius:u==="square"?0:""},i.value)}),h=g(function(){return ae(e)}),k=g(function(){var p=e.strokeWidth,v=e.size,u=e.strokeLinecap,s=e.success;return{width:"".concat(K(h.value),"%"),height:"".concat(p||(v==="small"?6:8),"px"),borderRadius:u==="square"?0:"",backgroundColor:s==null?void 0:s.strokeColor}});return function(){var p;return o(ue,null,[o("div",{class:"".concat(e.prefixCls,"-outer")},[o("div",{class:"".concat(e.prefixCls,"-inner"),style:f.value},[o("div",{class:"".concat(e.prefixCls,"-bg"),style:l.value},null),h.value!==void 0?o("div",{class:"".concat(e.prefixCls,"-success-bg"),style:k.value},null):null])]),(p=n.default)===null||p===void 0?void 0:p.call(n)])}}});var It={percent:0,prefixCls:"vc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,trailColor:"#D9D9D9",trailWidth:1},Nt=function(e){var r=D(null);return Ge(function(){var n=Date.now(),i=!1;e.value.forEach(function(f){var l=(f==null?void 0:f.$el)||f;if(l){i=!0;var h=l.style;h.transitionDuration=".3s, .3s, .3s, .06s",r.value&&n-r.value<100&&(h.transitionDuration="0s, 0s")}}),i&&(r.value=Date.now())}),e},Ot={gapDegree:Number,gapPosition:{type:String},percent:{type:[Array,Number]},prefixCls:String,strokeColor:{type:[Object,String,Array]},strokeLinecap:{type:String},strokeWidth:Number,trailColor:String,trailWidth:Number,transition:String},Tt=["prefixCls","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","strokeColor"],xe=0;function $e(c){return+c.replace("%","")}function De(c){return Array.isArray(c)?c:[c]}function Ie(c,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,f=arguments.length>5?arguments[5]:void 0,l=50-n/2,h=0,k=-l,p=0,v=-2*l;switch(f){case"left":h=-l,k=0,p=2*l,v=0;break;case"right":h=l,k=0,p=-2*l,v=0;break;case"bottom":k=l,v=2*l;break}var u="M 50,50 m ".concat(h,",").concat(k,`
   a `).concat(l,",").concat(l," 0 1 1 ").concat(p,",").concat(-v,`
   a `).concat(l,",").concat(l," 0 1 1 ").concat(-p,",").concat(v),s=Math.PI*2*l,S={stroke:r,strokeDasharray:"".concat(e/100*(s-i),"px ").concat(s,"px"),strokeDashoffset:"-".concat(i/2+c/100*(s-i),"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s"};return{pathString:u,pathStyle:S}}const jt=Z({compatConfig:{MODE:3},name:"VCCircle",props:Te(Ot,It),setup:function(e){xe+=1;var r=D(xe),n=g(function(){return De(e.percent)}),i=g(function(){return De(e.strokeColor)}),f=Je(),l=Ae(f,2),h=l[0],k=l[1];Nt(k);var p=function(){var u=e.prefixCls,s=e.strokeWidth,S=e.strokeLinecap,x=e.gapDegree,_=e.gapPosition,T=0;return n.value.map(function(I,b){var j=i.value[b]||i.value[i.value.length-1],L=Object.prototype.toString.call(j)==="[object Object]"?"url(#".concat(u,"-gradient-").concat(r.value,")"):"",$=Ie(T,I,j,s,x,_),U=$.pathString,q=$.pathStyle;T+=I;var A={key:b,d:U,stroke:L,"stroke-linecap":S,"stroke-width":s,opacity:I===0?0:1,"fill-opacity":"0",class:"".concat(u,"-circle-path"),style:q};return o("path",O({ref:h(b)},A),null)})};return function(){var v=e.prefixCls,u=e.strokeWidth,s=e.trailWidth,S=e.gapDegree,x=e.gapPosition,_=e.trailColor,T=e.strokeLinecap;e.strokeColor;var I=Oe(e,Tt),b=Ie(0,100,_,u,S,x),j=b.pathString,L=b.pathStyle;delete I.percent;var $=i.value.find(function(q){return Object.prototype.toString.call(q)==="[object Object]"}),U={d:j,stroke:_,"stroke-linecap":T,"stroke-width":s||u,"fill-opacity":"0",class:"".concat(v,"-circle-trail"),style:L};return o("svg",O({class:"".concat(v,"-circle"),viewBox:"0 0 100 100"},I),[$&&o("defs",null,[o("linearGradient",{id:"".concat(v,"-gradient-").concat(r.value),x1:"100%",y1:"0%",x2:"0%",y2:"0%"},[Object.keys($).sort(function(q,A){return $e(q)-$e(A)}).map(function(q,A){return o("stop",{key:A,offset:q,"stop-color":$[q]},null)})])]),o("path",U,null),p().reverse()])}}});function Lt(c){var e=c.percent,r=c.success,n=c.successPercent,i=K(ae({success:r,successPercent:n}));return[i,K(K(e)-i)]}function Wt(c){var e=c.success,r=e===void 0?{}:e,n=c.strokeColor,i=r.strokeColor;return[i||de.green,n||null]}const zt=Z({compatConfig:{MODE:3},name:"Circle",inheritAttrs:!1,props:ne(),setup:function(e,r){var n=r.slots,i=g(function(){if(e.gapDegree||e.gapDegree===0)return e.gapDegree;if(e.type==="dashboard")return 75}),f=g(function(){var s=e.width||120;return{width:typeof s=="number"?"".concat(s,"px"):s,height:typeof s=="number"?"".concat(s,"px"):s,fontSize:"".concat(s*.15+6,"px")}}),l=g(function(){return e.strokeWidth||6}),h=g(function(){return e.gapPosition||e.type==="dashboard"&&"bottom"||"top"}),k=g(function(){return Lt(e)}),p=g(function(){return Object.prototype.toString.call(e.strokeColor)==="[object Object]"}),v=g(function(){return Wt({success:e.success,strokeColor:e.strokeColor})}),u=g(function(){var s;return s={},J(s,"".concat(e.prefixCls,"-inner"),!0),J(s,"".concat(e.prefixCls,"-circle-gradient"),p.value),s});return function(){var s;return o("div",{class:u.value,style:f.value},[o(jt,{percent:k.value,strokeWidth:l.value,trailWidth:l.value,strokeColor:v.value,strokeLinecap:e.strokeLinecap,trailColor:e.trailColor,prefixCls:e.prefixCls,gapDegree:i.value,gapPosition:h.value},null),(s=n.default)===null||s===void 0?void 0:s.call(n)])}}});var Rt=function(){return O(O({},ne()),{},{steps:Number,size:{type:String},strokeColor:String,trailColor:String})};const Et=Z({compatConfig:{MODE:3},name:"Steps",props:Rt(),setup:function(e,r){var n=r.slots,i=g(function(){return Math.round(e.steps*((e.percent||0)/100))}),f=g(function(){return e.size==="small"?2:14}),l=g(function(){for(var h=e.steps,k=e.strokeWidth,p=k===void 0?8:k,v=e.strokeColor,u=e.trailColor,s=e.prefixCls,S=[],x=0;x<h;x+=1){var _,T=(_={},J(_,"".concat(s,"-steps-item"),!0),J(_,"".concat(s,"-steps-item-active"),x<=i.value-1),_);S.push(o("div",{key:x,class:T,style:{backgroundColor:x<=i.value-1?v:u,width:"".concat(f.value,"px"),height:"".concat(p,"px")}},null))}return S});return function(){var h;return o("div",{class:"".concat(e.prefixCls,"-steps-outer")},[l.value,(h=n.default)===null||h===void 0?void 0:h.call(n)])}}}),qt=Z({compatConfig:{MODE:3},name:"AProgress",props:Te(ne(),{type:"line",percent:0,showInfo:!0,trailColor:null,size:"default",strokeLinecap:"round"}),slots:["format"],setup:function(e,r){var n=r.slots,i=Fe("progress",e),f=i.prefixCls,l=i.direction;Ne(e.successPercent==null,"Progress","`successPercent` is deprecated. Please use `success.percent` instead.");var h=g(function(){var u,s=e.type,S=e.showInfo,x=e.size,_=f.value;return u={},J(u,_,!0),J(u,"".concat(_,"-").concat(s==="dashboard"&&"circle"||s),!0),J(u,"".concat(_,"-show-info"),S),J(u,"".concat(_,"-").concat(x),x),J(u,"".concat(_,"-rtl"),l.value==="rtl"),u}),k=g(function(){var u=e.percent,s=u===void 0?0:u,S=ae(e);return parseInt(S!==void 0?S.toString():s.toString(),10)}),p=g(function(){var u=e.status;return je.indexOf(u)<0&&k.value>=100?"success":u||"normal"}),v=function(){var s=e.showInfo,S=e.format,x=e.type,_=e.percent,T=e.title,I=ae(e);if(!s)return null;var b,j=S||(n==null?void 0:n.format)||function($){return"".concat($,"%")},L=x==="line";return S||n!=null&&n.format||p.value!=="exception"&&p.value!=="success"?b=j(K(_),K(I)):p.value==="exception"?b=L?o(Ue,null,null):o(Qe,null,null):p.value==="success"&&(b=L?o(Ve,null,null):o(Ke,null,null)),o("span",{class:"".concat(f.value,"-text"),title:T===void 0&&typeof b=="string"?b:void 0},[b])};return function(){var u=e.type,s=e.steps,S=e.strokeColor,x=e.title,_=v(),T;u==="line"?T=s?o(Et,O(O({},e),{},{strokeColor:typeof S=="string"?S:void 0,prefixCls:f.value,steps:s}),{default:function(){return[_]}}):o(Dt,O(O({},e),{},{prefixCls:f.value}),{default:function(){return[_]}}):(u==="circle"||u==="dashboard")&&(T=o(zt,O(O({},e),{},{prefixCls:f.value}),{default:function(){return[_]}}));var I=O(O({},h.value),{},J({},"".concat(f.value,"-status-").concat(p.value),!0));return o("div",{class:I,title:x},[T])}}}),Mt=Ye(qt);const F=c=>(gt("data-v-c7b6d99f"),c=c(),ht(),c),Bt={class:"topic-search"},Gt={class:"toolbar"},Jt={class:"left"},At={class:"title"},Ft=F(()=>d("span",{class:"icon"},"ðŸ§ ",-1)),Ut={class:"right"},Qt={key:0,style:{opacity:"0.75"}},Vt={class:"label"},Kt={class:"label"},Yt={style:{display:"grid",gap:"6px"}},Xt=F(()=>d("span",{style:{"margin-right":"6px"}},"ðŸ”‘",-1)),Ht={key:0},Zt=F(()=>d("span",{style:{"margin-right":"6px"}},"ðŸ§©",-1)),ea=F(()=>d("span",{style:{"margin-right":"6px"}},"ðŸ",-1)),ta={style:{opacity:"0.85"}},aa=F(()=>d("span",{style:{"margin-right":"6px"}},"ðŸ’»",-1)),na={style:{display:"flex","align-items":"center",gap:"10px","flex-wrap":"wrap"}},sa={style:{opacity:"0.85"}},ra={key:3,style:{margin:"10px 0 0 0"}},oa={key:0,style:{"margin-top":"10px"}},ia={key:1,class:"grid"},la=["onClick"],ca={class:"card-top"},ua={class:"card-title line-clamp-1"},da={class:"card-count"},pa={class:"card-desc line-clamp-2"},va={key:2,class:"empty"},fa={class:"guide"},ga={class:"guide-row"},ha=F(()=>d("span",{class:"guide-icon"},"ðŸ—‚ï¸",-1)),ma={class:"guide-text"},ya={class:"guide-row"},_a=F(()=>d("span",{class:"guide-icon"},"ðŸ§ ",-1)),Sa={class:"guide-text"},ka={class:"guide-row"},ba=F(()=>d("span",{class:"guide-icon"},"ðŸ”Ž",-1)),Ca={class:"guide-text"},Pa={class:"guide-hint"},wa=F(()=>d("span",{class:"guide-icon"},"ðŸ’¡",-1)),xa={key:0,class:"guide-text"},$a={key:1,class:"guide-text"},Da="iib_topic_search_hide_requirements_v1",ce="topic_search_scope",Ia=Z({__name:"TopicSearch",props:{tabIdx:{},paneIdx:{}},setup(c){const e=c,r=Xe(),n=D(!1),i=D(.9),f=D(2),l=D(null),h=D(null),k=He(Da,!0),p=()=>{k.value=!1},v=D(null),u=D("");let s=null;const S=g(()=>{var a;const t=(a=v.value)==null?void 0:a.status;return t==="queued"||t==="running"}),x=g(()=>{var a;const t=String(((a=v.value)==null?void 0:a.stage)||"");return!t||t==="queued"||t==="init"?E("topicSearchJobQueued"):t==="embedding"?E("topicSearchJobStageEmbedding"):t==="clustering"?E("topicSearchJobStageClustering"):t==="titling"?E("topicSearchJobStageTitling"):t==="done"?E("topicSearchJobStageDone"):t==="error"?E("topicSearchJobStageError"):`${E("topicSearchJobStage")}: ${t}`}),_=g(()=>{var R;const t=(R=v.value)==null?void 0:R.progress;if(!t)return 0;const a=Number(t.to_embed??0),y=Number(t.embedded_done??0);if(a<=0)return 0;const C=Math.floor(y/a*100);return Math.max(0,Math.min(100,C))}),T=g(()=>{var a,y,C,R;const t=(a=v.value)==null?void 0:a.progress;if(!t)return"";if(((y=v.value)==null?void 0:y.stage)==="embedding"){const N=Number(t.embedded_done??0),W=Number(t.to_embed??0),re=Number(t.scanned??0),oe=String(t.folder??"");return E("topicSearchJobEmbeddingDesc",[N,W,re,oe])}if(((C=v.value)==null?void 0:C.stage)==="clustering"){const N=Number(t.items_done??0),W=Number(t.items_total??0);return E("topicSearchJobClusteringDesc",[N,W])}if(((R=v.value)==null?void 0:R.stage)==="titling"){const N=Number(t.clusters_done??0),W=Number(t.clusters_total??0);return E("topicSearchJobTitlingDesc",[N,W])}return""}),I=D(""),b=D(!1),j=D(null),L=D(!1),$=D([]),U=D(!1),q=D(!1);let A=null,ve="";const Le=g(()=>(r.quickMovePaths??[]).filter(a=>{const y=String((a==null?void 0:a.key)??"");return((a==null?void 0:a.types)??[]).includes("preset")&&["cwd","home","desktop"].includes(y)}).map(a=>String((a==null?void 0:a.dir)??"")).filter(Boolean));we(Le,t=>{t!=null&&t.length&&($.value=($.value??[]).filter(a=>!t.includes(a)))},{immediate:!0});const We=g(()=>(r.quickMovePaths??[]).filter(a=>{const y=String((a==null?void 0:a.key)??"");return!(((a==null?void 0:a.types)??[]).includes("preset")&&["cwd","home","desktop"].includes(y))}).map(a=>({value:a.dir,label:a.zh||a.dir}))),V=g(()=>($.value??[]).filter(Boolean).length),Y=g(()=>($.value??[]).filter(Boolean)),fe=g(()=>{var t;return((t=l.value)==null?void 0:t.clusters)??[]}),ze=async()=>{var y,C,R;if(U.value)return;try{const N=await st();r.conf=N}catch{}const t=((y=r.conf)==null?void 0:y.app_fe_setting)||{},a=(C=t==null?void 0:t[ce])==null?void 0:C.folder_paths;Array.isArray(a)&&a.length&&!((R=$.value)!=null&&R.length)&&($.value=a.map(N=>String(N)).filter(Boolean)),U.value=!0},ge=async()=>{var a,y;if((a=r.conf)!=null&&a.is_readonly||!U.value)return;const t={folder_paths:Y.value,updated_at:Date.now()};await rt(ce,t),(y=r.conf)!=null&&y.app_fe_setting&&(r.conf.app_fe_setting[ce]=t)},Re=()=>{var a;if((a=r.conf)!=null&&a.is_readonly||!U.value)return;const t=JSON.stringify(Y.value);t!==ve&&(A&&clearTimeout(A),A=setTimeout(async()=>{q.value=!0;try{await ge(),ve=t}finally{q.value=!1}},500))},ee=()=>{s&&(clearInterval(s),s=null)},he=async()=>{const t=u.value;if(!t)return;const a=await mt(t);v.value=a,a.status==="done"?(ee(),n.value=!1,a.result&&(l.value=a.result),h.value=null):a.status==="error"&&(ee(),n.value=!1,le.error(a.error||E("topicSearchJobFailed")))},Ee=async()=>{if(V.value)try{const t=await ot({threshold:i.value,min_cluster_size:f.value,lang:r.lang,folder_paths:Y.value});h.value=t,t.cache_hit&&t.result&&(l.value=t.result)}catch{}},se=async()=>{var t;if(!((t=r.conf)!=null&&t.is_readonly)){if(!V.value){le.warning(E("topicSearchNeedScope")),L.value=!0;return}ee(),n.value=!0,v.value=null,u.value="";try{await it();const a=await lt({threshold:i.value,min_cluster_size:f.value,lang:r.lang,folder_paths:Y.value});u.value=a.job_id,await he(),s=setInterval(()=>{he()},800)}catch(a){throw n.value=!1,a}}},me=async()=>{const t=(I.value||"").trim();if(t){if(!V.value){le.warning(E("topicSearchNeedScope")),L.value=!0;return}b.value=!0;try{j.value=await ct({query:t,top_k:80,ensure_embed:!0,folder_paths:Y.value}),ye()}finally{b.value=!1}}},ye=()=>{var R;const t=(((R=j.value)==null?void 0:R.results)??[]).map(N=>N.path).filter(Boolean);if(!t.length)return;const a=`Query: ${I.value.trim()}ï¼ˆ${t.length}ï¼‰`,y={type:"topic-search-matched-image-grid",name:a,key:Date.now()+te(),id:te(),title:a,paths:t},C=r.tabList[e.tabIdx];C.panes.push(y),C.key=y.key},qe=t=>{const a={type:"topic-search-matched-image-grid",name:`${t.title}ï¼ˆ${t.size}ï¼‰`,key:Date.now()+te(),id:te(),title:t.title,paths:t.paths},y=r.tabList[e.tabIdx];y.panes.push(a),y.key=a.key};return Ze(()=>{(async()=>(await ze(),V.value&&await Ee()))()}),et(()=>{ee()}),we(()=>Y.value,()=>{Re()},{deep:!0}),(t,a)=>{var _e,Se,ke,be,Ce,Pe;const y=kt,C=ut,R=dt,N=St,W=pt,re=Mt,oe=_t,Me=vt,Be=ft;return P(),M("div",Bt,[d("div",Gt,[d("div",Jt,[d("div",At,[Ft,d("span",null,m(t.$t("topicSearchTitleExperimental")),1)]),l.value?(P(),Q(y,{key:0,color:"blue"},{default:z(()=>[G("å…± "+m(l.value.count)+" å¼ ",1)]),_:1})):B("",!0),l.value?(P(),Q(y,{key:1,color:"geekblue"},{default:z(()=>[G("ä¸»é¢˜ "+m(l.value.clusters.length),1)]),_:1})):B("",!0),l.value?(P(),Q(y,{key:2,color:"default"},{default:z(()=>[G("å™ªå£° "+m(l.value.noise.length),1)]),_:1})):B("",!0)]),d("div",Ut,[o(C,{onClick:a[0]||(a[0]=w=>L.value=!0)},{default:z(()=>[G(m(t.$t("topicSearchScope"))+" ",1),V.value?(P(),M("span",Qt,"ï¼ˆ"+m(V.value)+"ï¼‰",1)):B("",!0)]),_:1}),o(R,{value:I.value,"onUpdate:value":a[1]||(a[1]=w=>I.value=w),style:{width:"min(420px, 72vw)"},placeholder:t.$t("topicSearchQueryPlaceholder"),disabled:b.value,onKeydown:tt(me,["enter"]),"allow-clear":""},null,8,["value","placeholder","disabled","onKeydown"]),o(C,{loading:b.value,onClick:me},{default:z(()=>[G(m(t.$t("search")),1)]),_:1},8,["loading"]),(Se=(_e=j.value)==null?void 0:_e.results)!=null&&Se.length?(P(),Q(C,{key:0,onClick:ye},{default:z(()=>[G(m(t.$t("topicSearchOpenResults")),1)]),_:1})):B("",!0),d("span",Vt,m(t.$t("topicSearchThreshold")),1),o(N,{value:i.value,"onUpdate:value":a[2]||(a[2]=w=>i.value=w),min:.5,max:.99,step:.01},null,8,["value"]),d("span",Kt,m(t.$t("topicSearchMinClusterSize")),1),o(N,{value:f.value,"onUpdate:value":a[3]||(a[3]=w=>f.value=w),min:1,max:50,step:1},null,8,["value"]),o(C,{type:"primary",ghost:"",loading:n.value,disabled:(ke=H(r).conf)==null?void 0:ke.is_readonly,onClick:se},{default:z(()=>[G(m(t.$t("refresh")),1)]),_:1},8,["loading","disabled"])])]),(be=H(r).conf)!=null&&be.is_readonly?(P(),Q(W,{key:0,type:"warning",message:t.$t("readonlyModeSettingPageDesc"),style:{margin:"12px 0"},"show-icon":""},null,8,["message"])):B("",!0),H(k)?(P(),Q(W,{key:1,type:"info","show-icon":"",closable:"",style:{margin:"10px 0 0 0"},message:t.$t("topicSearchRequirementsTitle"),onClose:p},{description:z(()=>[d("div",Yt,[d("div",null,[Xt,d("span",null,m(t.$t("topicSearchRequirementsOpenai")),1)]),H(at)?(P(),M("div",Ht,[Zt,d("span",null,m(t.$t("topicSearchRequirementsDepsDesktop")),1)])):(P(),M(ue,{key:1},[d("div",null,[ea,d("span",null,m(t.$t("topicSearchRequirementsDepsPython")),1)]),d("div",ta,[aa,d("span",null,m(t.$t("topicSearchRequirementsInstallCmd")),1)])],64))])]),_:1},8,["message"])):B("",!0),(Ce=h.value)!=null&&Ce.cache_hit&&((Pe=h.value)!=null&&Pe.stale)?(P(),Q(W,{key:2,type:"warning","show-icon":"",style:{margin:"10px 0 0 0"},message:t.$t("topicSearchCacheStale")},{description:z(()=>{var w;return[d("div",na,[d("span",sa,m(t.$t("topicSearchCacheStaleDesc")),1),o(C,{size:"small",loading:n.value||S.value,disabled:(w=H(r).conf)==null?void 0:w.is_readonly,onClick:se},{default:z(()=>[G(m(t.$t("topicSearchCacheUpdate")),1)]),_:1},8,["loading","disabled"])])]}),_:1},8,["message"])):B("",!0),S.value?(P(),M("div",ra,[o(W,{type:"info","show-icon":"",message:x.value,description:T.value},null,8,["message","description"]),o(re,{percent:_.value,size:"small",style:{"margin-top":"8px"}},null,8,["percent"])])):B("",!0),o(oe,{spinning:n.value},{default:z(()=>{var w;return[j.value?(P(),M("div",oa,[o(W,{type:"info",message:t.$t("topicSearchRecallMsg",[j.value.results.length,j.value.count,j.value.top_k]),"show-icon":""},null,8,["message"])])):B("",!0),fe.value.length?(P(),M("div",ia,[(P(!0),M(ue,null,nt(fe.value,X=>(P(),M("div",{class:"card",key:X.id,onClick:Na=>qe(X)},[d("div",ca,[d("div",ua,m(X.title),1),d("div",da,m(X.size),1)]),d("div",pa,m(X.sample_prompt),1)],8,la))),128))])):(P(),M("div",va,[o(W,{type:"info","show-icon":"",message:t.$t("topicSearchGuideTitle"),style:{"margin-bottom":"10px"}},null,8,["message"]),d("div",fa,[d("div",ga,[ha,d("span",ma,m(t.$t("topicSearchGuideStep1")),1),o(C,{size:"small",onClick:a[4]||(a[4]=X=>L.value=!0)},{default:z(()=>[G(m(t.$t("topicSearchScope")),1)]),_:1})]),d("div",ya,[_a,d("span",Sa,m(t.$t("topicSearchGuideStep2")),1),o(C,{size:"small",loading:n.value,disabled:(w=H(r).conf)==null?void 0:w.is_readonly,onClick:se},{default:z(()=>[G(m(t.$t("refresh")),1)]),_:1},8,["loading","disabled"])]),d("div",ka,[ba,d("span",Ca,m(t.$t("topicSearchGuideStep3")),1)]),d("div",Pa,[wa,V.value?(P(),M("span",$a,m(t.$t("topicSearchGuideEmptyReasonNoTopics")),1)):(P(),M("span",xa,m(t.$t("topicSearchGuideEmptyReasonNoScope")),1))])])]))]}),_:1},8,["spinning"]),o(Be,{visible:L.value,"onUpdate:visible":a[6]||(a[6]=w=>L.value=w),title:t.$t("topicSearchScopeModalTitle"),"mask-closable":!0,onOk:a[7]||(a[7]=()=>{L.value=!1,ge()})},{default:z(()=>[o(W,{type:"info","show-icon":"",message:t.$t("topicSearchScopeTip"),style:{"margin-bottom":"10px"}},null,8,["message"]),q.value?(P(),Q(W,{key:0,type:"info","show-icon":"",message:t.$t("topicSearchSavingToBackend"),style:{"margin-bottom":"10px"}},null,8,["message"])):B("",!0),o(Me,{value:$.value,"onUpdate:value":a[5]||(a[5]=w=>$.value=w),mode:"multiple",style:{width:"100%"},options:We.value,placeholder:t.$t("topicSearchScopePlaceholder"),"max-tag-count":3,getPopupContainer:w=>w.parentElement||w,"allow-clear":""},null,8,["value","options","placeholder","getPopupContainer"])]),_:1},8,["visible","title"])])}}});const Ra=yt(Ia,[["__scopeId","data-v-c7b6d99f"]]);export{Ra as default};
