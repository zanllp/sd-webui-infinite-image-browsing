import{F as w,s as b}from"./FileItem-71fdd7ed.js";import{u as y,b as k}from"./index-d3fa759a.js";import{d as x,r as F,c0 as h,$ as D,b7 as I,bb as C,o as z,k as E,c as n,y as V,z as e,O as S,cL as B,cN as R,q as $}from"./index-7f89456f.js";import"./index-7ba6e156.js";import"./index-31a27e12.js";import"./index-08e1e48f.js";import"./shortcut-7f420da3.js";import"./index-8dbe984d.js";import"./_isIterateeCall-eac05144.js";const q=x({__name:"gridView",props:{tabIdx:{},paneIdx:{},id:{},removable:{type:Boolean},allowDragAndDrop:{type:Boolean},files:{},paneKey:{}},setup(p){const o=p,m=F(),{stackViewEl:d}=y().toRefs(),{itemSize:l,gridItems:u,cellWidth:f}=k(),g=h(),s=D(o.files??[]),_=async t=>{const i=B(t);o.allowDragAndDrop&&i&&(s.value=R([...s.value,...i.nodes]))},v=t=>{s.value.splice(t,1)};return I(()=>{m.pageFuncExportMap.set(o.paneKey,{getFiles:()=>C(s.value),setFiles:t=>s.value=t})}),(t,i)=>(z(),E("div",{class:"container",ref_key:"stackViewEl",ref:d,onDrop:_},[n(e(b),{ref:"scroller",class:"file-list",items:s.value.slice(),"item-size":e(l).first,"key-field":"fullpath","item-secondary-size":e(l).second,gridItems:e(u)},{default:V(({item:a,index:r})=>{var c;return[n(w,{idx:r,file:a,"cell-width":e(f),"enable-close-icon":o.removable,onCloseIconClick:A=>v(r),"full-screen-preview-image-url":e(S)(a),"extra-tags":(c=a==null?void 0:a.tags)==null?void 0:c.map(e(g).tagConvert),"enable-right-click-menu":!1},null,8,["idx","file","cell-width","enable-close-icon","onCloseIconClick","full-screen-preview-image-url","extra-tags"])]}),_:1},8,["items","item-size","item-secondary-size","gridItems"])],544))}});const W=$(q,[["__scopeId","data-v-0c31f6b2"]]);export{W as default};
