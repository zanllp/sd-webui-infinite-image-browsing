import{d as O,a1 as z,r as E,m as te,n as K,U as b,V as S,c as a,a3 as s,a4 as e,B as d,a2 as v,$ as C,W as h,Z as R,aK as ae,aR as le,z as oe,G as x,J as ne,K as se,Y as g,aS as de,X as $,ac as T,aT as ue,ad as ie,a8 as A,a6 as re,ag as ce,a5 as F,a9 as me,aU as he,aV as pe,aW as fe,aX as ge,aO as be,ak as L,aj as ke,a0 as _e}from"./index-4c34d886.js";import{_ as M,a as G,F as ve}from"./numInput-e1388fb8.js";import"./index-2aad68c4.js";/* empty css              *//* empty css              */import{_ as D}from"./index-1e9959a9.js";import{g as Ce,C as we}from"./shortcut-c3286a1a.js";import"./isArrayLikeObject-3ea7634f.js";import"./numInput.vue_vue_type_style_index_0_scoped_55978858_lang-1da329eb.js";import"./Checkbox-818febf1.js";const N="/infinite_image_browsing/fe-static/assets/sample-55dcafc6.webp",Se=["width","height","src"],ye=O({__name:"ImageSetting",setup(j){function l(y,c){return new Promise(p=>{const f=new Image;f.onload=()=>{const i=document.createElement("canvas");i.width=f.width*c,i.height=f.height*c,i.getContext("2d").drawImage(f,0,0,i.width,i.height),p(i.toDataURL())},f.src=y})}const u=z(),w=E("");return te(()=>[u.enableThumbnail,u.gridThumbnailResolution],K(async()=>{u.enableThumbnail&&(w.value=await l(N,u.gridThumbnailResolution/1024))},300),{immediate:!0,deep:!0}),(y,c)=>{const p=G,f=D;return b(),S(R,null,[a(p,{label:e(d)("defaultGridCellWidth")},{default:s(()=>[a(M,{min:64,max:1024,step:16,modelValue:e(u).defaultGridCellWidth,"onUpdate:modelValue":c[0]||(c[0]=i=>e(u).defaultGridCellWidth=i)},null,8,["modelValue"])]),_:1},8,["label"]),a(p,{label:e(d)("useThumbnailPreview")},{default:s(()=>[a(f,{checked:e(u).enableThumbnail,"onUpdate:checked":c[1]||(c[1]=i=>e(u).enableThumbnail=i)},null,8,["checked"])]),_:1},8,["label"]),e(u).enableThumbnail?(b(),v(p,{key:0,label:e(d)("thumbnailResolution")},{default:s(()=>[a(M,{modelValue:e(u).gridThumbnailResolution,"onUpdate:modelValue":c[2]||(c[2]=i=>e(u).gridThumbnailResolution=i),min:256,max:1024,step:64},null,8,["modelValue"])]),_:1},8,["label"])):C("",!0),a(p,{label:e(d)("livePreview")},{default:s(()=>[h("div",null,[h("img",{width:e(u).defaultGridCellWidth,height:e(u).defaultGridCellWidth,src:e(u).enableThumbnail?w.value:e(N)},null,8,Se)])]),_:1},8,["label"]),a(p,{label:e(d)("defaultShowChangeIndicators")},{default:s(()=>[a(f,{checked:e(u).defaultChangeIndchecked,"onUpdate:checked":c[3]||(c[3]=i=>e(u).defaultChangeIndchecked=i)},null,8,["checked"])]),_:1},8,["label"]),e(u).defaultChangeIndchecked?(b(),v(p,{key:1,label:e(d)("defaultSeedAsChange")},{default:s(()=>[a(f,{checked:e(u).defaultSeedChangeChecked,"onUpdate:checked":c[4]||(c[4]=i=>e(u).defaultSeedChangeChecked=i)},null,8,["checked"])]),_:1},8,["label"])):C("",!0),a(p,{label:e(d)("previewMaskBackgroundOpacity")},{default:s(()=>[a(M,{min:0,max:1,step:.05,modelValue:e(u).previewBgOpacity,"onUpdate:modelValue":c[5]||(c[5]=i=>e(u).previewBgOpacity=i)},null,8,["modelValue"])]),_:1},8,["label"])],64)}}}),Ie={class:"panel"},$e={style:{"margin-top":"0"}},Re={class:"lang-select-wrap"},Me={style:{"padding-left":"8px",color:"#666"}},Ue={class:"col"},Pe=O({__name:"globalSetting",setup(j){const l=z(),u=ae(),w=E(!1),y=async()=>{window.location.reload()},c=[{value:"en",text:"English"},{value:"zhHans",text:"简体中文"},{value:"zhHant",text:"繁體中文"},{value:"de",text:"Deutsch"}],p=K(o=>{const t=l.shortcut[o];["ctrl","shift"].includes(t.toLowerCase())&&(l.shortcut[o]="")},700),f=le(()=>{oe.warn(d("notAllowSingleCtrlOrShiftAsShortcut"))},3e3),i=(o,t)=>{const m=Ce(o);["ctrl","shift"].includes(m.toLowerCase())&&(f(),p(t)),m&&(l.shortcut[t]=m)},V=async()=>{await he("shutdown_api_server_command"),await pe.removeFile(fe),await ge()},q=x(()=>[{value:"empty",text:d("emptyStartPage")},{value:"last-workspace-state",text:d("restoreLastWorkspaceState")},...u.snapshots.map(t=>({value:`workspace_snapshot_${t.id}`,text:d("restoreWorkspaceSnapshot",[t.name])}))]),W=x(()=>{const o=l.shortcut,t={};return Object.entries(o).forEach(([m,I])=>{var r;t[r=I+""]??(t[r]=0),t[I+""]++}),t}),H=x(()=>{var t;const o=[{key:"download",label:d("download")},{key:"delete",label:d("deleteSelected")}];return(t=l.conf)==null||t.all_custom_tags.forEach(m=>{o.push({key:`toggle_tag_${m.name}`,label:d("toggleTagSelection",{tag:m.name})})}),l.quickMovePaths.forEach(m=>{o.push({key:`copy_to_${m.dir}`,label:d("copyTo")+" "+m.zh})}),l.quickMovePaths.forEach(m=>{o.push({key:`move_to_${m.dir}`,label:d("moveTo")+" "+m.zh})}),o}),X=o=>o&&o in W.value&&W.value[o]>1,U=ne(se+"disable_maximize",!1);return(o,t)=>{var B;const m=be,I=L,r=G,k=D,J=M,P=L,Y=we,Z=ke,Q=ve;return b(),S("div",Ie,[(B=e(l).conf)!=null&&B.is_readonly?(b(),v(m,{key:0,message:o.$t("readonlyModeSettingPageDesc"),type:"warning"},null,8,["message"])):C("",!0),C("",!0),a(Q,null,{default:s(()=>[h("h2",$e,g(e(d)("ImageBrowsingSettings")),1),a(ye),h("h2",null,g(e(d)("imgSearch")),1),a(r,{label:o.$t("rebuildImageIndex")},{default:s(()=>[a(I,{onClick:e(de)},{default:s(()=>[$(g(o.$t("start")),1)]),_:1},8,["onClick"])]),_:1},8,["label"]),h("h2",null,g(e(d)("autoRefresh")),1),a(r,{label:o.$t("autoRefreshWalkMode")},{default:s(()=>[a(k,{checked:e(l).autoRefreshWalkMode,"onUpdate:checked":t[0]||(t[0]=n=>e(l).autoRefreshWalkMode=n)},null,8,["checked"])]),_:1},8,["label"]),a(r,{label:o.$t("autoRefreshNormalFixedMode")},{default:s(()=>[a(k,{checked:e(l).autoRefreshNormalFixedMode,"onUpdate:checked":t[1]||(t[1]=n=>e(l).autoRefreshNormalFixedMode=n)},null,8,["checked"])]),_:1},8,["label"]),a(r,{label:e(d)("autoRefreshWalkModePosLimit")},{default:s(()=>[a(J,{min:0,max:1024,step:16,modelValue:e(l).autoRefreshWalkModePosLimit,"onUpdate:modelValue":t[2]||(t[2]=n=>e(l).autoRefreshWalkModePosLimit=n)},null,8,["modelValue"])]),_:1},8,["label"]),h("h2",null,g(e(d)("other")),1),a(r,{label:o.$t("lang")},{default:s(()=>[h("div",Re,[a(e(T),{options:c,value:e(l).lang,"onUpdate:value":t[3]||(t[3]=n=>e(l).lang=n),onChange:t[4]||(t[4]=n=>w.value=!0)},null,8,["value"])]),w.value?(b(),v(P,{key:0,type:"primary",onClick:y,ghost:""},{default:s(()=>[$(g(e(d)("langChangeReload")),1)]),_:1})):C("",!0)]),_:1},8,["label"]),a(r,{label:o.$t("onlyFoldersAndImages")},{default:s(()=>[a(k,{checked:e(l).onlyFoldersAndImages,"onUpdate:checked":t[5]||(t[5]=n=>e(l).onlyFoldersAndImages=n)},null,8,["checked"])]),_:1},8,["label"]),a(r,{label:o.$t("showCommaInGenInfoPanel")},{default:s(()=>[a(k,{checked:e(l).showCommaInInfoPanel,"onUpdate:checked":t[6]||(t[6]=n=>e(l).showCommaInInfoPanel=n)},null,8,["checked"])]),_:1},8,["label"]),a(r,{label:o.$t("showRandomImageInStartup")},{default:s(()=>[a(k,{checked:e(l).showRandomImageInStartup,"onUpdate:checked":t[7]||(t[7]=n=>e(l).showRandomImageInStartup=n)},null,8,["checked"])]),_:1},8,["label"]),a(r,{label:o.$t("hideImageNavigationButtons")},{default:s(()=>[a(k,{checked:e(l).hideImageNavigationButtons,"onUpdate:checked":t[8]||(t[8]=n=>e(l).hideImageNavigationButtons=n)},null,8,["checked"])]),_:1},8,["label"]),a(r,{label:o.$t("defaultSortingMethod")},{default:s(()=>[a(e(T),{value:e(l).defaultSortingMethod,"onUpdate:value":t[9]||(t[9]=n=>e(l).defaultSortingMethod=n),conv:e(ue),options:e(ie)},null,8,["value","conv","options"])]),_:1},8,["label"]),a(r,{label:o.$t("longPressOpenContextMenu")},{default:s(()=>[a(k,{checked:e(l).longPressOpenContextMenu,"onUpdate:checked":t[10]||(t[10]=n=>e(l).longPressOpenContextMenu=n)},null,8,["checked"])]),_:1},8,["label"]),a(r,{label:o.$t("openOnAppStart")},{default:s(()=>[a(e(T),{value:e(l).defaultInitinalPage,"onUpdate:value":t[11]||(t[11]=n=>e(l).defaultInitinalPage=n),options:q.value},null,8,["value","options"])]),_:1},8,["label"]),(b(!0),S(R,null,A(e(l).ignoredConfirmActions,(n,_)=>(b(),v(r,{label:o.$t(_+"SkipConfirm"),key:_},{default:s(()=>[a(Y,{checked:e(l).ignoredConfirmActions[_],"onUpdate:checked":ee=>e(l).ignoredConfirmActions[_]=ee},null,8,["checked","onUpdate:checked"])]),_:2},1032,["label"]))),128)),a(r,{label:o.$t("disableMaximize")},{default:s(()=>[a(k,{checked:e(U),"onUpdate:checked":t[12]||(t[12]=n=>re(U)?U.value=n:null)},null,8,["checked"]),h("sub",Me,g(o.$t("takeEffectAfterReloadPage")),1)]),_:1},8,["label"]),h("h2",null,g(e(d)("shortcutKey")),1),(b(!0),S(R,null,A(H.value,n=>(b(),v(r,{label:n.label,key:n.key},{default:s(()=>[h("div",{class:ce(["col",{conflict:X(e(l).shortcut[n.key]+"")}]),onKeydown:t[13]||(t[13]=F(()=>{},["stop","prevent"]))},[a(Z,{value:e(l).shortcut[n.key],onKeydown:F(_=>i(_,n.key),["stop","prevent"]),placeholder:o.$t("shortcutKeyDescription")},null,8,["value","onKeydown","placeholder"]),a(P,{onClick:_=>e(l).shortcut[n.key]="",class:"clear-btn"},{default:s(()=>[$(g(o.$t("clear")),1)]),_:2},1032,["onClick"])],34)]),_:2},1032,["label"]))),128)),e(me)?(b(),S(R,{key:0},[h("h2",null,g(e(d)("clientSpecificSettings")),1),a(r,null,{default:s(()=>[h("div",Ue,[a(P,{onClick:V,class:"clear-btn"},{default:s(()=>[$(g(o.$t("initiateSoftwareStartupConfig")),1)]),_:1})])]),_:1})],64)):C("",!0)]),_:1})])}}});const ze=_e(Pe,[["__scopeId","data-v-bae4f93a"]]);export{ze as default};
