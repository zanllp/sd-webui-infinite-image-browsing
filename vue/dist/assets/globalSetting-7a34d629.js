import{d as z,a1 as E,r as K,m as te,n as G,U as b,V as S,c as a,a3 as s,a4 as e,B as d,a2 as v,$ as C,W as p,Z as R,aK as ae,aR as le,z as oe,G as P,J as ne,K as se,Y as g,aS as de,X as $,ac as T,aT as ue,ad as ie,a8 as B,a6 as re,ag as ce,a5 as F,a9 as me,aU as pe,aV as he,aW as fe,aX as ge,aO as be,ak as L,aj as ke,a0 as _e}from"./index-e52903e1.js";import{_ as M,a as N,F as ve}from"./numInput-a8053c31.js";import"./index-7132ec3f.js";/* empty css              *//* empty css              */import{_ as D}from"./index-9619ee85.js";import"./index-3a9d389b.js";import{g as Ce,C as we}from"./shortcut-48a3aaf1.js";import"./numInput.vue_vue_type_style_index_0_scoped_55978858_lang-0303141f.js";import"./Checkbox-c11e7d8d.js";const O="/infinite_image_browsing/fe-static/assets/sample-55dcafc6.webp",Se=["width","height","src"],ye=z({__name:"ImageSetting",setup(j){function l(y,c){return new Promise(h=>{const f=new Image;f.onload=()=>{const i=document.createElement("canvas");i.width=f.width*c,i.height=f.height*c,i.getContext("2d").drawImage(f,0,0,i.width,i.height),h(i.toDataURL())},f.src=y})}const u=E(),w=K("");return te(()=>[u.enableThumbnail,u.gridThumbnailResolution],G(async()=>{u.enableThumbnail&&(w.value=await l(O,u.gridThumbnailResolution/1024))},300),{immediate:!0,deep:!0}),(y,c)=>{const h=N,f=D;return b(),S(R,null,[a(h,{label:e(d)("defaultGridCellWidth")},{default:s(()=>[a(M,{min:64,max:1024,step:16,modelValue:e(u).defaultGridCellWidth,"onUpdate:modelValue":c[0]||(c[0]=i=>e(u).defaultGridCellWidth=i)},null,8,["modelValue"])]),_:1},8,["label"]),a(h,{label:e(d)("useThumbnailPreview")},{default:s(()=>[a(f,{checked:e(u).enableThumbnail,"onUpdate:checked":c[1]||(c[1]=i=>e(u).enableThumbnail=i)},null,8,["checked"])]),_:1},8,["label"]),e(u).enableThumbnail?(b(),v(h,{key:0,label:e(d)("thumbnailResolution")},{default:s(()=>[a(M,{modelValue:e(u).gridThumbnailResolution,"onUpdate:modelValue":c[2]||(c[2]=i=>e(u).gridThumbnailResolution=i),min:256,max:1024,step:64},null,8,["modelValue"])]),_:1},8,["label"])):C("",!0),a(h,{label:e(d)("livePreview")},{default:s(()=>[p("div",null,[p("img",{width:e(u).defaultGridCellWidth,height:e(u).defaultGridCellWidth,src:e(u).enableThumbnail?w.value:e(O)},null,8,Se)])]),_:1},8,["label"]),a(h,{label:e(d)("defaultShowChangeIndicators")},{default:s(()=>[a(f,{checked:e(u).defaultChangeIndchecked,"onUpdate:checked":c[3]||(c[3]=i=>e(u).defaultChangeIndchecked=i)},null,8,["checked"])]),_:1},8,["label"]),e(u).defaultChangeIndchecked?(b(),v(h,{key:1,label:e(d)("defaultSeedAsChange")},{default:s(()=>[a(f,{checked:e(u).defaultSeedChangeChecked,"onUpdate:checked":c[4]||(c[4]=i=>e(u).defaultSeedChangeChecked=i)},null,8,["checked"])]),_:1},8,["label"])):C("",!0),a(h,{label:e(d)("previewMaskBackgroundOpacity")},{default:s(()=>[a(M,{min:0,max:1,step:.05,modelValue:e(u).previewBgOpacity,"onUpdate:modelValue":c[5]||(c[5]=i=>e(u).previewBgOpacity=i)},null,8,["modelValue"])]),_:1},8,["label"])],64)}}}),Ie={class:"panel"},$e={style:{"margin-top":"0"}},Re={class:"lang-select-wrap"},Me={style:{"padding-left":"8px",color:"#666"}},Ue={class:"col"},xe=z({__name:"globalSetting",setup(j){const l=E(),u=ae(),w=K(!1),y=async()=>{window.location.reload()},c=[{value:"en",text:"English"},{value:"zhHans",text:"简体中文"},{value:"zhHant",text:"繁體中文"},{value:"de",text:"Deutsch"}],h=G(o=>{const t=l.shortcut[o];["ctrl","shift"].includes(t.toLowerCase())&&(l.shortcut[o]="")},700),f=le(()=>{oe.warn(d("notAllowSingleCtrlOrShiftAsShortcut"))},3e3),i=(o,t)=>{const m=Ce(o);["ctrl","shift"].includes(m.toLowerCase())&&(f(),h(t)),m&&(l.shortcut[t]=m)},V=async()=>{await pe("shutdown_api_server_command"),await he.removeFile(fe),await ge()},q=P(()=>[{value:"empty",text:d("emptyStartPage")},{value:"last-workspace-state",text:d("restoreLastWorkspaceState")},...u.snapshots.map(t=>({value:`workspace_snapshot_${t.id}`,text:d("restoreWorkspaceSnapshot",[t.name])}))]),W=P(()=>{const o=l.shortcut,t={};return Object.entries(o).forEach(([m,I])=>{var r;t[r=I+""]??(t[r]=0),t[I+""]++}),t}),H=P(()=>{var t;const o=[{key:"download",label:d("download")},{key:"delete",label:d("deleteSelected")}];return(t=l.conf)==null||t.all_custom_tags.forEach(m=>{o.push({key:`toggle_tag_${m.name}`,label:d("toggleTagSelection",{tag:m.name})})}),l.quickMovePaths.forEach(m=>{o.push({key:`copy_to_${m.dir}`,label:d("copyTo")+" "+m.zh})}),l.quickMovePaths.forEach(m=>{o.push({key:`move_to_${m.dir}`,label:d("moveTo")+" "+m.zh})}),o}),X=o=>o&&o in W.value&&W.value[o]>1,U=ne(se+"disable_maximize",!1);return(o,t)=>{var A;const m=be,I=L,r=N,k=D,J=M,x=L,Y=we,Z=ke,Q=ve;return b(),S("div",Ie,[(A=e(l).conf)!=null&&A.is_readonly?(b(),v(m,{key:0,message:o.$t("readonlyModeSettingPageDesc"),type:"warning"},null,8,["message"])):C("",!0),C("",!0),a(Q,null,{default:s(()=>[p("h2",$e,g(e(d)("ImageBrowsingSettings")),1),a(ye),p("h2",null,g(e(d)("imgSearch")),1),a(r,{label:o.$t("rebuildImageIndex")},{default:s(()=>[a(I,{onClick:e(de)},{default:s(()=>[$(g(o.$t("start")),1)]),_:1},8,["onClick"])]),_:1},8,["label"]),p("h2",null,g(e(d)("autoRefresh")),1),a(r,{label:o.$t("autoRefreshWalkMode")},{default:s(()=>[a(k,{checked:e(l).autoRefreshWalkMode,"onUpdate:checked":t[0]||(t[0]=n=>e(l).autoRefreshWalkMode=n)},null,8,["checked"])]),_:1},8,["label"]),a(r,{label:o.$t("autoRefreshNormalFixedMode")},{default:s(()=>[a(k,{checked:e(l).autoRefreshNormalFixedMode,"onUpdate:checked":t[1]||(t[1]=n=>e(l).autoRefreshNormalFixedMode=n)},null,8,["checked"])]),_:1},8,["label"]),a(r,{label:e(d)("autoRefreshWalkModePosLimit")},{default:s(()=>[a(J,{min:0,max:1024,step:16,modelValue:e(l).autoRefreshWalkModePosLimit,"onUpdate:modelValue":t[2]||(t[2]=n=>e(l).autoRefreshWalkModePosLimit=n)},null,8,["modelValue"])]),_:1},8,["label"]),p("h2",null,g(e(d)("other")),1),a(r,{label:o.$t("lang")},{default:s(()=>[p("div",Re,[a(e(T),{options:c,value:e(l).lang,"onUpdate:value":t[3]||(t[3]=n=>e(l).lang=n),onChange:t[4]||(t[4]=n=>w.value=!0)},null,8,["value"])]),w.value?(b(),v(x,{key:0,type:"primary",onClick:y,ghost:""},{default:s(()=>[$(g(e(d)("langChangeReload")),1)]),_:1})):C("",!0)]),_:1},8,["label"]),a(r,{label:o.$t("onlyFoldersAndImages")},{default:s(()=>[a(k,{checked:e(l).onlyFoldersAndImages,"onUpdate:checked":t[5]||(t[5]=n=>e(l).onlyFoldersAndImages=n)},null,8,["checked"])]),_:1},8,["label"]),a(r,{label:o.$t("showCommaInGenInfoPanel")},{default:s(()=>[a(k,{checked:e(l).showCommaInInfoPanel,"onUpdate:checked":t[6]||(t[6]=n=>e(l).showCommaInInfoPanel=n)},null,8,["checked"])]),_:1},8,["label"]),a(r,{label:o.$t("showRandomImageInStartup")},{default:s(()=>[a(k,{checked:e(l).showRandomImageInStartup,"onUpdate:checked":t[7]||(t[7]=n=>e(l).showRandomImageInStartup=n)},null,8,["checked"])]),_:1},8,["label"]),a(r,{label:o.$t("defaultSortingMethod")},{default:s(()=>[a(e(T),{value:e(l).defaultSortingMethod,"onUpdate:value":t[8]||(t[8]=n=>e(l).defaultSortingMethod=n),conv:e(ue),options:e(ie)},null,8,["value","conv","options"])]),_:1},8,["label"]),a(r,{label:o.$t("longPressOpenContextMenu")},{default:s(()=>[a(k,{checked:e(l).longPressOpenContextMenu,"onUpdate:checked":t[9]||(t[9]=n=>e(l).longPressOpenContextMenu=n)},null,8,["checked"])]),_:1},8,["label"]),a(r,{label:o.$t("openOnAppStart")},{default:s(()=>[a(e(T),{value:e(l).defaultInitinalPage,"onUpdate:value":t[10]||(t[10]=n=>e(l).defaultInitinalPage=n),options:q.value},null,8,["value","options"])]),_:1},8,["label"]),(b(!0),S(R,null,B(e(l).ignoredConfirmActions,(n,_)=>(b(),v(r,{label:o.$t(_+"SkipConfirm"),key:_},{default:s(()=>[a(Y,{checked:e(l).ignoredConfirmActions[_],"onUpdate:checked":ee=>e(l).ignoredConfirmActions[_]=ee},null,8,["checked","onUpdate:checked"])]),_:2},1032,["label"]))),128)),a(r,{label:o.$t("disableMaximize")},{default:s(()=>[a(k,{checked:e(U),"onUpdate:checked":t[11]||(t[11]=n=>re(U)?U.value=n:null)},null,8,["checked"]),p("sub",Me,g(o.$t("takeEffectAfterReloadPage")),1)]),_:1},8,["label"]),p("h2",null,g(e(d)("shortcutKey")),1),(b(!0),S(R,null,B(H.value,n=>(b(),v(r,{label:n.label,key:n.key},{default:s(()=>[p("div",{class:ce(["col",{conflict:X(e(l).shortcut[n.key]+"")}]),onKeydown:t[12]||(t[12]=F(()=>{},["stop","prevent"]))},[a(Z,{value:e(l).shortcut[n.key],onKeydown:F(_=>i(_,n.key),["stop","prevent"]),placeholder:o.$t("shortcutKeyDescription")},null,8,["value","onKeydown","placeholder"]),a(x,{onClick:_=>e(l).shortcut[n.key]="",class:"clear-btn"},{default:s(()=>[$(g(o.$t("clear")),1)]),_:2},1032,["onClick"])],34)]),_:2},1032,["label"]))),128)),e(me)?(b(),S(R,{key:0},[p("h2",null,g(e(d)("clientSpecificSettings")),1),a(r,null,{default:s(()=>[p("div",Ue,[a(x,{onClick:V,class:"clear-btn"},{default:s(()=>[$(g(o.$t("initiateSoftwareStartupConfig")),1)]),_:1})])]),_:1})],64)):C("",!0)]),_:1})])}}});const Ee=_e(xe,[["__scopeId","data-v-dd38255f"]]);export{Ee as default};
