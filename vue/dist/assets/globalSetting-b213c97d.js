import{d as x,r as B,v as F,s as z,ao as L,o as p,k as v,c as l,A as a,B as e,a6 as r,z as C,p as k,l as i,n as $,t as c,m as _,S as A,ap as O,N as q,I as M,C as I,J as H,aq as J,ar as X,as as j,at as Q,X as V,W as Y,q as Z}from"./index-4577cc7c.js";import{N as K,_ as D,a as N,F as ee}from"./numInput-bfdb5501.js";import"./index-ca4afed7.js";/* empty css              *//* empty css              */import{o as te,g as le,C as ne}from"./functionalCallableComp-14c6d2fe.js";const R="/infinite_image_browsing/fe-static/assets/sample-55dcafc6.webp",ae=["width","height","src"],oe=x({__name:"ImageSetting",setup(G){function s(S,u){return new Promise(m=>{const n=new Image;n.onload=()=>{const t=document.createElement("canvas");t.width=n.width*u,t.height=n.height*u,t.getContext("2d").drawImage(n,0,0,t.width,t.height),m(t.toDataURL())},n.src=S})}const o=B(),w=F("");return z(()=>[o.enableThumbnail,o.gridThumbnailResolution],L(async()=>{o.enableThumbnail&&(w.value=await s(R,o.gridThumbnailResolution/1024))},300),{immediate:!0,deep:!0}),(S,u)=>{const m=D,n=N;return p(),v($,null,[l(m,{label:e(r)("defaultGridCellWidth")},{default:a(()=>[l(K,{min:64,max:1024,step:32,modelValue:e(o).defaultGridCellWidth,"onUpdate:modelValue":u[0]||(u[0]=t=>e(o).defaultGridCellWidth=t)},null,8,["modelValue"])]),_:1},8,["label"]),l(m,{label:e(r)("useThumbnailPreview")},{default:a(()=>[l(n,{checked:e(o).enableThumbnail,"onUpdate:checked":u[1]||(u[1]=t=>e(o).enableThumbnail=t)},null,8,["checked"])]),_:1},8,["label"]),e(o).enableThumbnail?(p(),C(m,{key:0,label:e(r)("thumbnailResolution")},{default:a(()=>[l(K,{modelValue:e(o).gridThumbnailResolution,"onUpdate:modelValue":u[2]||(u[2]=t=>e(o).gridThumbnailResolution=t),min:256,max:1024,step:64},null,8,["modelValue"])]),_:1},8,["label"])):k("",!0),l(m,{label:e(r)("livePreview")},{default:a(()=>[i("div",null,[i("img",{width:e(o).defaultGridCellWidth,height:e(o).defaultGridCellWidth,src:e(o).enableThumbnail?w.value:e(R)},null,8,ae)])]),_:1},8,["label"]),l(m,{label:e(r)("defaultShowChangeIndicators")},{default:a(()=>[l(n,{checked:e(o).defaultChangeIndchecked,"onUpdate:checked":u[3]||(u[3]=t=>e(o).defaultChangeIndchecked=t)},null,8,["checked"])]),_:1},8,["label"]),e(o).defaultChangeIndchecked?(p(),C(m,{key:1,label:e(r)("defaultSeedAsChange")},{default:a(()=>[l(n,{checked:e(o).defaultSeedChangeChecked,"onUpdate:checked":u[4]||(u[4]=t=>e(o).defaultSeedChangeChecked=t)},null,8,["checked"])]),_:1},8,["label"])):k("",!0)],64)}}}),se={class:"panel"},de={style:{"margin-top":"0"}},ue={class:"lang-select-wrap"},ie={class:"col"},re={class:"col"},ce={class:"col"},me={class:"col"},he=x({__name:"globalSetting",setup(G){const s=B(),o=F(!1),w=async()=>{window.location.reload()},S=[{value:"en",text:"English"},{value:"zhHans",text:"简体中文"},{value:"zhHant",text:"繁體中文"},{value:"de",text:"Deutsch"}],u=(n,t)=>{const f=le(n);f&&(s.shortcut[t]=f)},m=async()=>{await J("shutdown_api_server_command"),await X.removeFile(j),await Q()};return(n,t)=>{const f=V,h=D,T=N,b=V,P=ne,y=Y,W=ee;return p(),v("div",se,[k("",!0),l(W,null,{default:a(()=>{var U;return[i("h2",de,c(e(r)("ImageBrowsingSettings")),1),l(oe),i("h2",null,c(e(r)("imgSearch")),1),l(h,{label:n.$t("rebuildImageIndex")},{default:a(()=>[l(f,{onClick:e(te)},{default:a(()=>[_(c(n.$t("start")),1)]),_:1},8,["onClick"])]),_:1},8,["label"]),i("h2",null,c(e(r)("other")),1),l(h,{label:n.$t("onlyFoldersAndImages")},{default:a(()=>[l(T,{checked:e(s).onlyFoldersAndImages,"onUpdate:checked":t[0]||(t[0]=d=>e(s).onlyFoldersAndImages=d)},null,8,["checked"])]),_:1},8,["label"]),l(h,{label:n.$t("defaultSortingMethod")},{default:a(()=>[l(e(A),{value:e(s).defaultSortingMethod,"onUpdate:value":t[1]||(t[1]=d=>e(s).defaultSortingMethod=d),conv:e(O),options:e(q)},null,8,["value","conv","options"])]),_:1},8,["label"]),l(h,{label:n.$t("longPressOpenContextMenu")},{default:a(()=>[l(T,{checked:e(s).longPressOpenContextMenu,"onUpdate:checked":t[2]||(t[2]=d=>e(s).longPressOpenContextMenu=d)},null,8,["checked"])]),_:1},8,["label"]),l(h,{label:n.$t("lang")},{default:a(()=>[i("div",ue,[l(e(A),{options:S,value:e(s).lang,"onUpdate:value":t[3]||(t[3]=d=>e(s).lang=d),onChange:t[4]||(t[4]=d=>o.value=!0)},null,8,["value"])]),o.value?(p(),C(b,{key:0,type:"primary",onClick:w,ghost:""},{default:a(()=>[_(c(e(r)("langChangeReload")),1)]),_:1})):k("",!0)]),_:1},8,["label"]),(p(!0),v($,null,M(e(s).ignoredConfirmActions,(d,g)=>(p(),C(h,{label:n.$t(g+"SkipConfirm"),key:g},{default:a(()=>[l(P,{checked:e(s).ignoredConfirmActions[g],"onUpdate:checked":E=>e(s).ignoredConfirmActions[g]=E},null,8,["checked","onUpdate:checked"])]),_:2},1032,["label"]))),128)),i("h2",null,c(e(r)("shortcutKey")),1),l(h,{label:n.$t("download")},{default:a(()=>[i("div",ie,[l(y,{value:e(s).shortcut.download,onKeydown:t[5]||(t[5]=I(d=>u(d,"download"),["stop","prevent"])),placeholder:n.$t("shortcutKeyDescription")},null,8,["value","placeholder"]),l(b,{onClick:t[6]||(t[6]=d=>e(s).shortcut.download=""),class:"clear-btn"},{default:a(()=>[_(c(n.$t("clear")),1)]),_:1})])]),_:1},8,["label"]),l(h,{label:n.$t("deleteSelected")},{default:a(()=>[i("div",re,[l(y,{value:e(s).shortcut.delete,onKeydown:t[7]||(t[7]=I(d=>u(d,"delete"),["stop","prevent"])),placeholder:n.$t("shortcutKeyDescription")},null,8,["value","placeholder"]),l(b,{onClick:t[8]||(t[8]=d=>e(s).shortcut.delete=""),class:"clear-btn"},{default:a(()=>[_(c(n.$t("clear")),1)]),_:1})])]),_:1},8,["label"]),(p(!0),v($,null,M(((U=e(s).conf)==null?void 0:U.all_custom_tags)??[],d=>(p(),C(h,{label:n.$t("toggleTagSelection",{tag:d.name}),key:d.id},{default:a(()=>[i("div",ce,[l(y,{value:e(s).shortcut[`toggle_tag_${d.name}`],onKeydown:I(g=>u(g,`toggle_tag_${d.name}`),["stop","prevent"]),placeholder:n.$t("shortcutKeyDescription")},null,8,["value","onKeydown","placeholder"]),l(b,{onClick:g=>e(s).shortcut[`toggle_tag_${d.name}`]="",class:"clear-btn"},{default:a(()=>[_(c(n.$t("clear")),1)]),_:2},1032,["onClick"])])]),_:2},1032,["label"]))),128)),e(H)?(p(),v($,{key:0},[i("h2",null,c(e(r)("clientSpecificSettings")),1),l(h,null,{default:a(()=>[i("div",me,[l(b,{onClick:m,class:"clear-btn"},{default:a(()=>[_(c(n.$t("initiateSoftwareStartupConfig")),1)]),_:1})])]),_:1})],64)):k("",!0)]}),_:1})])}}});const Ce=Z(he,[["__scopeId","data-v-e5d3d829"]]);export{Ce as default};
